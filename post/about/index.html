<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="Philosopher blog">
<meta name="description" content="WORLD AS CODE">
<meta name="theme-color" content="#000">
<title>å…³äº | Philosopher</title>
<link rel="shortcut icon" href="/favicon.ico?v=1677726157535">
<link rel="stylesheet" href="/media/css/pisces.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/default.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/media/js/jquery.js"></script>
<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>






  <meta name="description" content="å…³äº" />
  <meta name="keywords" content="" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="pisces">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>Philosopher</span>
            </a>  
          
        </div>
        
          <p class="subtitle">WORLD AS CODE</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> é¦–é¡µ
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> å½’æ¡£
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> æ ‡ç­¾
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> å…³äº
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> å‹é“¾
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">æœç´¢</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout pisces ">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper bg-color right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active language" data-lan="index">æ–‡ç« ç›®å½•</span>
            <span id="metaSideBar" class="sidebar-title-item language" data-lan="preview">ç«™ç‚¹æ¦‚è§ˆ</span>
          </div>
        </div>
      
      <div class="sidebar-body pisces" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">Philosopher</p>
    
    <div class="site-description right-motion">
      
      
      
        <p>world-as-code</p>
      
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">12</span>
        <span class="site-item-stat-name language" data-lan="article">æ–‡ç« </span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">5</span>
        <span class="site-item-stat-name language" data-lan="category">åˆ†ç±»</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">5</span>
        <span class="site-item-stat-name language" data-lan="tag">æ ‡ç­¾</span>
      </a>
    </div>
  </div>
  
    
      <div class="sidebar-item">
        <span class="site-item-rss">
            <i class="fa fa-rss"></i>
            <a href="https://philosopherzb.github.io/atom.xml" target="_blank">RSS</a>
        </span>
      </div>
    
  
  



</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper auto-number auto"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99">ğŸ  å…³äºæœ¬ç«™</a></li>
<li><a href="#%E5%8D%9A%E4%B8%BB%E6%98%AF%E8%B0%81">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</a></li>
<li><a href="#%E8%81%94%E7%B3%BB%E6%88%91%E5%91%80">ğŸ“¬ è”ç³»æˆ‘å‘€</a></li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // ä¿å­˜liå…ƒç´ 
      if (elem.children[0] && elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // å¤„ç†ä¸æ˜¯ä»#ä¸€çº§æ ‡é¢˜å¼€å§‹ç›®å½•
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    window.Velocity(hideElement, 'stop');
    window.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        window.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <section class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://philosopherzb.github.io/post/about/">
      å…³äº
    </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span class="language" data-lan="publish">å‘å¸ƒäº</span>
      <span class="publish-time" data-t="2019-01-25 19:09:48">2019-01-25</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span>1<span class="language" data-lan="minute">åˆ†é’Ÿ</span></span>
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span>88<span class="pc-show language" data-lan="words">å­—æ•°</span></span>
    </span>
    
    
    
    <span id="/post/about/" data-flag-title="å…³äº" class="meta-item pc-show leancloud_visitors">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-eye"></i>
      <span><span class="language" data-lan="view">æµè§ˆé‡</span>ï¼š<span class="leancloud-visitors-count"></span></span>
    </span>
    
  </div>
</section>
            <div class="post-body next-md-body" id="post_body">
              <blockquote>
<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤</p>
</blockquote>
<h2 id="å…³äºæœ¬ç«™">ğŸ  å…³äºæœ¬ç«™</h2>
<p>æœ¬ç«™ä½¿ç”¨github-pagesåŠGrideaæ­å»ºè€Œæˆï¼Œä¸“é—¨ç”¨äºæŠ€æœ¯åˆ†äº«ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·å‚ä¸ã€‚</p>
<blockquote>
<p>github-pages doc: <a href="https://docs.github.com/en/pages">https://docs.github.com/en/pages</a><br>
gridea doc: <a href="https://gridea.dev/gridea-start/">https://gridea.dev/gridea-start/</a></p>
</blockquote>
<h2 id="åšä¸»æ˜¯è°">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</h2>
<p>æ±‚çŸ¥è·¯ä¸Šçš„é™Œç”Ÿäºº</p>
<h2 id="è”ç³»æˆ‘å‘€">ğŸ“¬ è”ç³»æˆ‘å‘€</h2>
<p>æœ‰é—®é¢˜å¯ä»¥ç•™è¨€è®¨è®ºå“ˆğŸ˜„</p>

            </div>
            
            
            
  <script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<div id="vcomments" style="padding: 10px 0px 0px 0px"></div>

<style>
  .v .veditor {
    min-height: 10rem;
    background-image: url('');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: right;
    background-color: rgba(255, 255, 255, 0);
    resize: none;
  }

  .v .vwrap {
    border: 1px solid #000 !important;
  }

  .v .vbtn {
    padding: .4rem 1.2rem !important;
    border-color: #fff !important;
    background-color: #49b1f5 !important;
    color: #fff !important;
    font-size: .7rem !important;
  }

  .v .vcards .vcard .vh .vmeta .vat {
    padding: 0 .8rem !important;
    border: 1px solid #00c4b6 !important;
    border-radius: 5px !important;
    color: #00c4b6 !important;
  }
</style>
<script>
  new Valine({
    el: '#vcomments',
    appId: 'vTL9neewLgXcivf073tLdmIO-gzGzoHsz',
    appKey: '6EMsHOzs5kmg8TqCyk0OI7qU',
    avatar: 'mp',
    placeholder: 'Comments welcome',
    pageSize: '10',
    lang: 'zh-cn',
    enableQQ: 'true' === 'false',
    visitor: 'true' === 'true',
    highlight: 'true' === 'true',
    avatarForce: 'true' === 'false',
  });
</script>

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <span id="busuanzi_container_site_pv">æµè§ˆæ•° <span id="busuanzi_value_site_pv"></span> æ¬¡</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº</span>
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> Â©2019 | Theme By <a
        href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      
    </div>
  </footer>
  
  
  <div class="pisces back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
  
  
  <div class="bg-img">
    <img src="https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/1580483397838.jpeg" />
  </div>
  
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
    back2TopText = document.querySelector('#back_to_top_text'),
    drawerBox = document.querySelector('#drawer_box'),
    rightSideBar = document.querySelector('.sidebar'),
    viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });


  let hasCacu = false;
  window.addEventListener('resize', function (e) {
    calcuHeight();
  });

  function calcuHeight() {
    // åŠ¨æ€è°ƒæ•´ç«™ç‚¹æ¦‚è§ˆé«˜åº¦
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      jQuery.Velocity(rightSideBar, 'stop');
      jQuery.Velocity(viewport, 'stop');
      jQuery.Velocity(rightMotions, 'stop');
      if (open) {
        jQuery.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function () {
            jQuery.Velocity(rightMotions, transitionDir, {});
          }
        })
        jQuery.Velocity(viewport, openProp, {
          duration: MOTION_TIME
        });
      } else {
        jQuery.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function () {
            jQuery.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        jQuery.Velocity(viewport, closeProp, {
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // é“¾æ¥è·³è½¬
  let newWindow = 'true'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target", "_blank");
      }
    })
  }

  let faSearch = document.querySelector('#fa_search');
  faSearch && faSearch.addEventListener('click', function () {
    document.querySelector('#search_mask').style = ''
  })

  // ä»£ç é«˜äº®
  hljs.initHighlightingOnLoad();
  
  // ç¦»å¼€å½“å‰é¡µtitleå˜åŒ–
  var leaveTitle = "";
  if (leaveTitle) {
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState == 'hidden') {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }

</script>

<link rel="stylesheet" href="/media/css/jquery.fancybox.css" />
<script src="/media/js/jquery.fancybox.js"></script>

<script>
  let images = document.querySelectorAll('.section img');
  images.forEach(image => {
    var parent = image.parentElement;
    var next = image.nextElementSibling;
    parent.removeChild(image);
    var aelem = document.createElement('a');
    aelem.href = image.src;
    aelem.dataset['fancybox'] = 'images';
    aelem.dataset['rel'] = 'fancybox-button';
    aelem.classList.add('fancybox');
    aelem.appendChild(image);
    parent.insertBefore(aelem, next);
  })
</script>

    <div class="reward-mask" style="display: none;">
  <div class="reward-relative">
    <span class="close" aria-hidden="true">x</span>
    <div class="reward-body">
      <h2>æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼Œæˆ‘ä¼šç»§ç»­åŠªåŠ›çš„!</h2>
      <div class="reward-img-box">
        <div style="position: relative; width: 140px; height: 140px;">
          
          
          
        </div>
      </div>
      <p class="reward-word">æ‰«ç æ‰“èµï¼Œä½ è¯´å¤šå°‘å°±å¤šå°‘</p>
      <p class="reward-tip">æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
    </div>
    <div class="bottom">
      
      
    </div>
  </div>
</div>
<style>
  .reward-mask {
    position: fixed;
    z-index: 99999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #00000054;
  }

  .reward-relative {
    position: relative;
    width: 480px;
    text-align: center;
    margin: 0 auto;
    border-radius: 5px;
    background-color: #fff;
    top: 50%;
    margin-top: -205px;
  }

  .reward-relative .close {
    position: absolute;
    right: 10px;
    font-weight: normal;
    font-size: 16px;
    color: #929292;
  }

  .reward-body {
    padding: 40px 20px 20px;
  }

  .bottom {
    display: flex;
  }

  .reward-btn {
    text-align: center;
  }

  .reward-btn-text {
    display: inline-block;
    cursor: pointer;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    background-color: #ff9734;
    color: #FFF;
    margin-top: 20px;
  }

  .pay-text {
    margin-top: 10px;
    padding: 10px;
    flex: 1;
    transition: all .2s linear;
  }

  .pay-text:hover {
    background-color: #a5a5a536;
  }

  .reward-body h2 {
    padding-top: 10px;
    text-align: center;
    color: #a3a3a3;
    font-size: 16px;
    font-weight: normal;
    margin: 0 0 20px;
  }

  .reward-body h2:after,
  .reward-body h2:before {
    font-family: Arial, Helvetica, sans-serif;
    background: 0 0;
    width: 0;
    height: 0;
    font-style: normal;
    color: #eee;
    font-size: 80px;
    position: absolute;
    top: 20px;
  }

  .reward-body h2:before {
    content: '\201c';
    left: 50px;
  }

  .reward-body h2:after {
    content: '\201d';
    right: 80px;
  }

  .reward-img-box {
    display: inline-block;
    padding: 10px;
    border: 6px solid #ea5f00;
    margin: 0 auto;
    border-radius: 3px;
    position: relative;
  }

  .reward-img {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
  }

  @media (max-width: 767px) {
    .reward-relative {
      height: 100%;
      top: 0px;
      margin-top: 0;
      width: auto;
    }

    .reward-relative .bottom {
      flex-direction: column;
    }

    .reward-relative .pay-text {
      width: 80%;
      margin: 5px auto;
      border: 1px solid silver;
      padding: 6px;
      border-radius: 4px;
    }

    .reward-body h2:after {
      right: 40px;
    }

    .reward-body h2:after,
    .reward-body h2:before {
      font-size: 60px;
    }

    .reward-body h2:before {
      left: 20px;
    }
  }
</style>
<script>
  !function () {
    var mask = document.querySelector('.reward-mask');
    let close = document.querySelector('.reward-relative .close');
    let rewardBtn = document.querySelector('.reward-btn');

    let zfb = document.querySelector('#zfb'),
      wx = document.querySelector('#wx'),
      zfbBtn = document.querySelector('#zfbBtn'),
      wxBtn = document.querySelector('#wxBtn');

    if (zfbBtn && wxBtn) {
      zfbBtn.addEventListener('click', () => {
        window.Velocity(zfb, 'transition.slideLeftIn', {
          duration: 400
        });
        window.Velocity(wx, 'transition.slideRightOut', {
          display: 'none',
          duration: 400
        });
      });

      wxBtn.addEventListener('click', () => {
        window.Velocity(wx, 'transition.slideRightIn', {
          duration: 400
        });
        window.Velocity(zfb, 'transition.slideLeftOut', {
          display: 'none',
          duration: 400
        });
      });
    }

    rewardBtn.addEventListener('click', (e) => {
      window.Velocity(mask, 'transition.slideDownIn', {
        duration: 400
      })
    });

    close.addEventListener('click', (e) => {
      e.preventDefault();
      window.Velocity(mask, 'transition.slideUpOut', {
        duration: 400
      })
    })
  }()
</script>

  </div>
</body>

<div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="æœç´¢">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">æ¡ç›¸å…³æ¡ç›®ï¼Œä½¿ç”¨äº†</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">æ¯«ç§’</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/idea-shu-xing-ji-cha-jian-pei-zhi/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°IDEAå¸¸ç”¨çš„ä¸€äº›é…ç½®ä»¥åŠç›¸å…³æ’ä»¶ï¼Œæ­é…ä½¿ç”¨æˆ–å¯æå‡ç¼–ç æ•ˆç‡ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/valley-90388_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;ideaç»Ÿä¸€è®¾ç½®&#34;&gt;IDEAç»Ÿä¸€è®¾ç½®&lt;/h2&gt;
&lt;p&gt;ä¸ºä¿è¯å¤§å®¶æœ‰ç»Ÿä¸€çš„ä»£ç è§„èŒƒå’ŒIDEè¡Œä¸ºï¼Œç°å¯¹IDEAçš„è®¾ç½®è¿›è¡Œç»Ÿä¸€è¯´æ˜ã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œä¸‹åˆ—çš„IDEAè®¾ç½®ï¼Œå‡åœ¨é»˜è®¤è®¾ç½®çš„åŸºç¡€ä¸Šè¿›è¡Œä¸ªæ€§åŒ–å˜æ›´çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨IDEAçš„è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œå¯¹æ‰€æœ‰æºæ–‡ä»¶ä»¥åŠé…ç½®æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–åæäº¤ã€‚ï¼ˆIDEAé»˜è®¤çš„å¿«æ·é”®ä¸ºï¼šCtrl + Alt + Lï¼Œmacç³»ç»Ÿä¸º:command + option + Lï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨IDEAçš„ä¼˜åŒ–å¯¼å…¥ç±»å’ŒåŒ…è¿›è¡Œimportè¯­å¥çš„åˆç†æ’åˆ—ã€‚ï¼ˆIDEAçš„é»˜è®¤å¿«æ·é”®ä¸ºï¼šCtrl + Alt + Oï¼Œmacç³»ç»Ÿä¸º:command + option + Oï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®ç±»&#34;&gt;é…ç½®ç±»&lt;/h3&gt;
&lt;p&gt;é…ç½®ç±»çš„è®¾ç½®å…¥å£ä¸ºFile-&amp;gt;Settings,ä¸‹é¢æ‰€è¯´çš„æ‰€æœ‰é…ç½®ï¼Œéƒ½æ˜¯åœ¨è¿™ä¸ªèœå•ä¸‹è¿›è¡Œçš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å¯¼åŒ…ä¼˜åŒ–é…ç½®&#34;&gt;å¯¼åŒ…ä¼˜åŒ–é…ç½®&lt;/h4&gt;
&lt;p&gt;è¿›è¡Œä¼˜åŒ–å¯¼å…¥åŒ…æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å‡ ä¸ªé€šåŒ…è·¯å¾„ä¸‹çš„ç±»å‡ºç°æŠ˜å æˆ*çš„æƒ…å†µï¼Œè¿™æ˜¯è¿åé€šç”¨ç¼–ç è§„çº¦çš„ï¼ˆå­˜åœ¨å¯¼é”™åŒ…çš„æƒ…å½¢ï¼‰ã€‚å› æ­¤ï¼Œåœ¨è¿›è¡Œå¯¼åŒ…ä¼˜åŒ–ä¹‹å‰ï¼Œè¯·è®¾ç½®IDEAçš„è‡ªåŠ¨æŠ˜å åŠŸèƒ½ä¸º999ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;ä¾æ¬¡è¿›å…¥Editor-&amp;gt;Code Style-&amp;gt;Java å°†Class count to use import â€˜*â€™è¿™ä¸€é¡¹åé¢çš„æ•°å€¼æ”¹ä¸º999&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301031.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;æ–‡ä»¶ç¼–ç é…ç½®&#34;&gt;æ–‡ä»¶ç¼–ç é…ç½®&lt;/h4&gt;
&lt;p&gt;ä¾æ¬¡è¿›å…¥Editor-&amp;gt;File Encodingsï¼Œå°†æ‰€æœ‰å­—ç¬¦é›†è®¾ç½®ï¼Œè°ƒæ•´ä¸ºUTF-8ï¼Œå¹¶ä¸”å°†UTF-8çš„pomè®¾ç½®ä¸ºno pomï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301032.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;æ¢è¡Œç¬¦ç»Ÿä¸€é…ç½®&#34;&gt;æ¢è¡Œç¬¦ç»Ÿä¸€é…ç½®&lt;/h4&gt;
&lt;p&gt;ç»Ÿä¸€ä½¿ç”¨Unixé£æ ¼çš„æ¢è¡Œç¬¦ï¼Œæ‰¾åˆ°Editor-&amp;gt;Code Style-&amp;gt;Line separatorï¼Œè®¾ç½®æˆUnix and OS X(\n)&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301033.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;ä¸ªæ€§åŒ–é…ç½®&#34;&gt;ä¸ªæ€§åŒ–é…ç½®&lt;/h4&gt;
&lt;p&gt;ä¸€äº›ä¸ªæ€§åŒ–çš„ç®€å•é…ç½®ã€‚&lt;/p&gt;
&lt;h5 id=&#34;å­—ä½“é…ç½®å¦‚ä¸‹editor-font&#34;&gt;å­—ä½“é…ç½®å¦‚ä¸‹Editor-&amp;gt;Fontï¼š&lt;/h5&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301034.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;gité…ç½®å¦‚ä¸‹version-control-gitéœ€è¦äº‹å…ˆå®‰è£…gitæ‰¾åˆ°å¯¹åº”çš„binç›®å½•å³å¯&#34;&gt;gité…ç½®å¦‚ä¸‹Version Control-&amp;gt;Git(éœ€è¦äº‹å…ˆå®‰è£…gitï¼Œæ‰¾åˆ°å¯¹åº”çš„binç›®å½•å³å¯)ï¼š&lt;/h5&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301035.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;åºåˆ—åŒ–æ—¶æœªå¼•å…¥åºåˆ—åŒ–idæŠ¥è­¦é…ç½®å¦‚ä¸‹editor-inspections&#34;&gt;åºåˆ—åŒ–æ—¶æœªå¼•å…¥åºåˆ—åŒ–idæŠ¥è­¦é…ç½®å¦‚ä¸‹Editor-&amp;gt;Inspectionsï¼š&lt;/h5&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301036.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ç±»å¤´è‡ªåŠ¨åŠ è½½æ³¨é‡Šé…ç½®å¦‚ä¸‹Editor-&amp;gt;File and Code Templatesï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301037.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;æ’ä»¶ç±»&#34;&gt;æ’ä»¶ç±»&lt;/h3&gt;
&lt;p&gt;ä¸ºç®€åŒ–å¼€å‘æ­¥éª¤ï¼Œå¹¶ä¸”è®©å¤§å®¶åœ¨æ²Ÿé€šä¸€äº›æ’ä»¶åŠŸèƒ½æ—¶ï¼Œå¯ä»¥ç”¨ç»Ÿä¸€çš„è¯­è¨€ï¼Œç°å¯¹å¼€å‘æ—¶ä½¿ç”¨çš„åŸºæœ¬æ’ä»¶è¿›è¡Œä¸‹åˆ—çº¦å®šï¼Œè¯·å¼€å‘å‰ï¼Œåœ¨IDEAä¸­å®‰è£…ä¸‹åˆ—æ’ä»¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;lombokæ’ä»¶&#34;&gt;Lombokæ’ä»¶&lt;/h4&gt;
&lt;p&gt;å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¼–å†™JavaBeanï¼Œéœ€è¦äº›å¤§é‡çš„get setæ–¹æ³•ï¼Œè™½ç„¶IDEAæœ‰å¿«æ·é”®å¯ä»¥ç”Ÿæˆè¿™äº›æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äºæ•´ä½“ä»£ç çš„æ•´æ´åº¦ï¼Œå¤šå¤šå°‘å°‘è¿˜æ˜¯æœ‰ä¸€äº›å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå¤§é‡ç”¨åˆ°Lombokï¼Œåœ¨ç¼–è¯‘æœŸè‡ªåŠ¨ç”Ÿæˆget setæ–¹æ³•ï¼Œequalsæ–¹æ³•ä»¥åŠhashcodeæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æ’ä»¶ï¼Œå¯ä»¥è‡ªåŠ¨è¯†åˆ«@Dataç­‰æ³¨è§£ï¼Œè®©ä»£ç IDEAèƒ½å¤Ÿå¯¹è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•è¿›è¡Œå¯¼èˆªã€‚å¹¶ä¸”åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¯¹get,setæ–¹æ³•è¿›è¡Œæç¤ºè¡¥å…¨ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301038.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;maven-helperæ’ä»¶&#34;&gt;Maven Helperæ’ä»¶&lt;/h4&gt;
&lt;p&gt;ç¼–å†™pomè¿‡ç¨‹ä¸­ï¼Œæ€»ä¼šé‡åˆ°å„ç§å„æ ·çš„ä¾èµ–é—®é¢˜ï¼ŒMaven Helperæ’ä»¶ï¼Œæä¾›äº†ä¸€ç§mvn dependency:treeä¹‹å¤–çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301039.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å®‰è£…æ’ä»¶åï¼Œåœ¨æ‰“å¼€pomæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å¤šäº†Dependency Analyzeræ ‡ç­¾ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301040.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å¯ä»¥æ–¹ä¾¿åœ°æ‰¾åˆ°å†²çªçš„ä¾èµ–,å¹¶ä¸”æ”¯æŒä»¥å›¾å½¢åŒ–çš„å½¢å¼æŸ¥çœ‹ä¾èµ–æ ‘ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;12&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301041.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;free-mybatis-pluginæ’ä»¶&#34;&gt;Free Mybatis pluginæ’ä»¶&lt;/h4&gt;
&lt;p&gt;ç”¨äºMybatisæ¥å£ä¸xmlæ–‡ä»¶çš„å¿«é€Ÿè·³è½¬ã€‚å®‰è£…æ’ä»¶åï¼Œå¯ä»¥åœ¨æ¥å£ä¸­ç›´æ¥è·³è½¬åˆ°å¯¹åº”mybatis xmlé…ç½®æ–‡ä»¶çš„å¯¹åº”æ–¹æ³•ä¸Šã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;13&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301042.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;14&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301043.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;15&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301044.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;alibaba-java-coding-guidelinesæ’ä»¶&#34;&gt;Alibaba Java Coding Guidelinesæ’ä»¶&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨â€œAlibaba Java Coding Guidelinesâ€ï¼Œæ’ä»¶ï¼Œå¯¹å·¥ç¨‹ä¸‹æ‰€æœ‰ä»£ç è¿›è¡Œæ‰«æã€‚ä¸€æœŸæš‚å®šæ¶ˆé™¤æ‰€æœ‰Blockerä¸Critialçš„é”™è¯¯ï¼ŒåŒæ—¶Majorçš„é”™è¯¯ä¸å¾—è¶…è¿‡50ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œå¿…ç„¶ä¼šäº§ç”Ÿè­¦å‘Šï¼ˆæ¯”å¦‚æ— æ³•é¿å…çš„æ³›å‹è½¬åŸå§‹ç±»å‹ï¼‰ï¼Œåœ¨ç¡®è®¤ä¸ä¼šäº§ç”Ÿæ„å¤–é”™è¯¯æ—¶ï¼Œä½¿ç”¨@SuppressWarning æ¥æŠ‘åˆ¶è­¦å‘Šã€‚è‹¥å¦‚æ­¤åšï¼Œä»£ç è¯„å®¡æ—¶ï¼Œä¼šå¯¹æ­¤æ³¨è§£è¿›è¡Œé‡ç‚¹å…³æ³¨ã€‚æ‰€ä»¥åŠ¡å¿…ç¡®ä¿è¯¥æ³¨è§£ä¸è¢«æ»¥ç”¨ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;16&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301045.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ç›´æ¥å³å‡»é¡¹ç›®ï¼Œé€‰æ‹©ç¼–ç è§„çº¦æ‰«æ&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;17&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301046.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;findbugsæ’ä»¶&#34;&gt;FindBugsæ’ä»¶&lt;/h4&gt;
&lt;p&gt;å¯¹å·¥ç¨‹ä¸‹æ‰€æœ‰ä»£ç è¿›è¡Œæ‰«æï¼Œæ£€æŸ¥å­˜åœ¨çš„bugã€‚&lt;a href=&#34;https://plugins.jetbrains.com/plugin/3847-findbugs-idea/versions&#34;&gt;ç‚¹å‡»æ­¤å¤„è·³è½¬ä¸‹è½½é¡µé¢&lt;/a&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;18&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301047.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;19&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301048.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;find-sec-bugsä¸ºFindBugs-IDEAçš„æ‰©å±•åº“ï¼Œå¯ä»¥å¢åŠ é¢å¤–çš„æ‰«æç»“æœã€‚&lt;a href=&#34;https://find-sec-bugs.github.io/download.htm&#34;&gt;ç‚¹å‡»æ­¤å¤„è·³è½¬ä¸‹è½½é¡µé¢&lt;/a&gt;&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;20&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301049.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;visualvm-launcheræ’ä»¶&#34;&gt;VisualVM Launcheræ’ä»¶&lt;/h4&gt;
&lt;p&gt;è¿è¡Œjavaç¨‹åºçš„æ—¶å€™å¯åŠ¨visualvmï¼Œæ–¹ä¾¿æŸ¥çœ‹jvmçš„æƒ…å†µ æ¯”å¦‚å †å†…å­˜å¤§å°çš„åˆ†é…&lt;/p&gt;
&lt;p&gt;æŸä¸ªå¯¹è±¡å ç”¨äº†å¤šå¤§çš„å†…å­˜ï¼Œjvmè°ƒä¼˜å¿…å¤‡å·¥å…·ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;21&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301050.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;22&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301051.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä½¿ç”¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;23&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301052.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;jclasslibæ’ä»¶&#34;&gt;jclasslibæ’ä»¶&lt;/h4&gt;
&lt;p&gt;æŸ¥çœ‹javaå­—èŠ‚ç æ’ä»¶ï¼Œç›¸æ¯”äºå‘½ä»¤è¡Œçš„javap -v classNameæ›´åŠ æ–¹ä¾¿ã€‚ç›´æ¥åœ¨ideaçš„æ’ä»¶ä¸­æœç´¢å¹¶ä¸‹è½½å³å¯ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;24&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301053.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä½¿ç”¨æ—¶ï¼Œå…ˆé€‰æ‹©éœ€è¦æŸ¥çœ‹å­—èŠ‚ç çš„javaç±»ï¼Œä¹‹åé€‰æ‹©View -&amp;gt; Show Bytecode With jclasslibå³å¯æ‰“å¼€å­—èŠ‚ç è§†å›¾ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;25&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301054.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;26&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301055.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;bashsupportæ’ä»¶&#34;&gt;bashsupportæ’ä»¶&lt;/h4&gt;
&lt;p&gt;æ”¯æŒbashç¼–ç ï¼Œæ™ºèƒ½æç¤ºã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;27&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301056.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;é…ç½®å¯åŠ¨é¡¹ï¼Œé€‰æ‹©gitå®‰è£…ç›®å½•ä¸­çš„bash.exeå³å¯ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;28&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301057.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;29&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301058.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ç¼–å†™å®Œæˆåï¼Œç›´æ¥å³å‡»runä¾¿å¯çœ‹åˆ°æ‰§è¡Œç»“æœã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;30&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301059.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
">IDEAå±æ€§åŠæ’ä»¶é…ç½®</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java-zhong-de-chang-yong-pai-xu-suan-fa/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°javaä¸­å¸¸ç”¨çš„ä¸€äº›æ’åºç®—æ³•æå…¶å®ç°ä»£ç ï¼Œå¦‚äºŒåˆ†æŸ¥æ‰¾ï¼Œå¿«é€Ÿæ’åºï¼Œå †æ’ï¼Œå½’å¹¶æ’åºï¼Œå†’æ³¡æ’åºç­‰ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/lake-192979_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;javaä¸­çš„å¸¸ç”¨ç®—æ³•&#34;&gt;Javaä¸­çš„å¸¸ç”¨ç®—æ³•&lt;/h2&gt;
&lt;h3 id=&#34;æœ¯è¯­è¯´æ˜åŠæ’åºå›¾è¡¨&#34;&gt;æœ¯è¯­è¯´æ˜åŠæ’åºå›¾è¡¨&lt;/h3&gt;
&lt;p&gt;ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ï¼ˆå¦‚æœæˆ‘ä»¬åªå¯¹ä¸€ä¸²æ•°å­—æ’åºï¼Œé‚£ä¹ˆç¨³å®šä¸å¦ç¡®å®ä¸é‡è¦ï¼Œå› ä¸ºä¸€ä¸²æ•°å­—çš„å±æ€§æ˜¯å•ä¸€çš„ï¼Œå°±æ˜¯æ•°å­—å€¼çš„å¤§å°ã€‚ä½†æ˜¯æ’åºçš„å…ƒç´ å¾€å¾€ä¸åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯¹ä¸€ç¾¤äººæŒ‰å¹´é¾„æ’åºï¼Œä½†æ˜¯äººé™¤äº†å¹´é¾„å±æ€§è¿˜æœ‰èº«é«˜ä½“é‡å±æ€§ï¼Œåœ¨å¹´é¾„ç›¸åŒæ—¶å¦‚æœä¸æƒ³ç ´ååŸå…ˆèº«é«˜ä½“é‡çš„æ¬¡åºï¼Œå°±å¿…é¡»ç”¨ç¨³å®šæ’åºç®—æ³•.ï¼‰ï¼›&lt;/p&gt;
&lt;p&gt;ä¸ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bçš„å‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaå¯èƒ½ä¼šå‡ºç°åœ¨bçš„åé¢ï¼›&lt;/p&gt;
&lt;p&gt;å†…æ’åºï¼šæ‰€æœ‰æ’åºæ“ä½œéƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼›&lt;/p&gt;
&lt;p&gt;å¤–æ’åºï¼šç”±äºæ•°æ®å¤ªå¤§ï¼Œå› æ­¤æŠŠæ•°æ®æ”¾åœ¨ç£ç›˜ä¸­ï¼Œè€Œæ’åºé€šè¿‡ç£ç›˜å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“æ‰èƒ½è¿›è¡Œï¼›&lt;/p&gt;
&lt;p&gt;æ—¶é—´å¤æ‚åº¦ï¼š ä¸€ä¸ªç®—æ³•æ‰§è¡Œæ‰€è€—è´¹çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ç©ºé—´å¤æ‚åº¦ï¼šè¿è¡Œå®Œä¸€ä¸ªç¨‹åºæ‰€éœ€å†…å­˜çš„å¤§å°ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230302005.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230302006.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;äºŒåˆ†æŸ¥æ‰¾&#34;&gt;äºŒåˆ†æŸ¥æ‰¾&lt;/h3&gt;
&lt;p&gt;åˆç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œè¦æ±‚å¾…æŸ¥æ‰¾çš„åˆ—è¡¨æœ‰åºï¼Œæ¯æ¬¡å–ä¸­é—´ä½ç½®çš„å€¼ä¸å¾…æŸ¥å…³é”®å­—æ¯”è¾ƒï¼Œå¦‚æœä¸­é—´ä½ç½®çš„å€¼æ¯”å…³é”®å­—å¤§ï¼Œåˆ™åœ¨åˆ—è¡¨å‰åŠéƒ¨åˆ†å¾ªç¯æ­¤æŸ¥æ‰¾è¿‡ç¨‹ï¼Œå¦åˆ™åœ¨åˆ—è¡¨ååŠéƒ¨åˆ†å¾ªç¯æ­¤æŸ¥æ‰¾è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    // æ­£å¸¸äºŒåˆ†æŸ¥æ‰¾
    int[] array = {1, 2, 3, 4, 5, 6};
    int a = 3;
    System.out.println(binarySerach(array, a));

    // å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾
    int[] array_left = {1, 2, 2, 4, 4, 6};
    int a_left = 2;
    System.out.println(binarySerachForLeftBound(array_left, a_left));

    // å¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾
    int[] array_right = {1, 2, 2, 5, 5, 6};
    int a_right = 5;
    System.out.println(binarySerachForRightBound(array_right, a_right));
}

/**
 * äºŒåˆ†æŸ¥æ‰¾,å¦‚æœå­˜åœ¨ï¼Œåˆ™è¾“å‡ºå¾…æŸ¥æ‰¾æ•°æ®åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡å€¼ï¼Œå¦åˆ™è¿”å›-1
 *
 * @param numbers æŒ‡å®šæŸ¥è¯¢æ•°ç»„
 * @param target  å¾…æŸ¥æ‰¾æ•°æ®
 * @return æŸ¥æ‰¾ç»“æœ
 */
private static int binarySerach(int[] numbers, int target) {
    int low = 0;
    int high = numbers.length - 1;
    int middle;
    // æ­¤å¤„ç”¨ &amp;lt;= æ˜¯å› ä¸ºhigh = numbers.length - 1
    // å¦‚æœhigh = numbers.lengthï¼Œåˆ™æ­¤å¤„éœ€è¦ä½¿ç”¨ &amp;lt;,åŒæ—¶è¿”å›ç»“æœéœ€è¦æ›´æ”¹ä¸º return numbers[low] == target ? low : -1;
    while (low &amp;lt;= high) {
        // (low + high)/2ï¼Œå¦‚æœlow + highå¤§äºIntegerçš„MAX_VALUEä¼šå‘ç”Ÿæ•´å‹æº¢å‡º
        // ä½¿ç”¨low + (high - low) / 2å¯ä»¥é˜²æ­¢æ•´å‹æº¢å‡ºã€‚
        middle = low + (high - low) / 2;
        // åŒ¹é…ç›®æ ‡å€¼ï¼Œè¿”å›å…¶åœ¨æ•°ç»„ä¸­æ‰€åœ¨çš„ä¸‹æ ‡
        if (numbers[middle] == target) {
            return middle;
        } else if (numbers[middle] &amp;gt; target) {
            high = middle - 1;
        } else if (numbers[middle] &amp;lt; target) {
            low = middle + 1;
        }
    }
    return -1;
}

/**
 * å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾,å¦‚æœå­˜åœ¨ï¼Œåˆ™è¾“å‡ºå¾…æŸ¥æ‰¾æ•°æ®åœ¨æ•°ç»„ä¸­æœ€å·¦ä¾§çš„ä¸‹æ ‡å€¼ï¼Œå¦åˆ™è¿”å›-1
 *
 * @param numbers æŒ‡å®šæŸ¥è¯¢æ•°ç»„
 * @param target  å¾…æŸ¥æ‰¾æ•°æ®
 * @return æŸ¥æ‰¾ç»“æœ
 */
private static int binarySerachForLeftBound(int[] numbers, int target) {
    int low = 0;
    int high = numbers.length - 1;
    int middle;
    // æ­¤å¤„ç”¨ &amp;lt;= æ˜¯å› ä¸ºhigh = numbers.length - 1
    // å¦‚æœhigh = numbers.lengthï¼Œåˆ™æ­¤å¤„éœ€è¦ä½¿ç”¨ &amp;lt;,åŒæ—¶è¿”å›ç»“æœéœ€è¦æ›´æ”¹ä¸º return numbers[low] == target ? low : -1;
    while (low &amp;lt;= high) {
        // åŒ¹é…è¿”å›ä¸‹æ ‡
        if (numbers[low] == target) {
            return low;
        }
        // (low + high)/2ï¼Œå¦‚æœlow + highå¤§äºIntegerçš„MAX_VALUEä¼šå‘ç”Ÿæ•´å‹æº¢å‡º
        // ä½¿ç”¨low + (high - low) / 2å¯ä»¥é˜²æ­¢æ•´å‹æº¢å‡ºã€‚
        middle = low + (high - low) / 2;
        // åŒ¹é…ç›®æ ‡å€¼ï¼Œå°†å…¶ä¸‹æ ‡èµ‹ç»™highï¼Œå¾€å·¦ä¾§ç¼©å°è¾¹ç•Œ
        if (numbers[middle] == target) {
            high = middle;
        } else if (numbers[middle] &amp;gt; target) {
            high = middle - 1;
        } else if (numbers[middle] &amp;lt; target) {
            low = middle + 1;
        }
    }
    return -1;
}

/**
 * å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾,å¦‚æœå­˜åœ¨ï¼Œåˆ™è¾“å‡ºå¾…æŸ¥æ‰¾æ•°æ®åœ¨æ•°ç»„ä¸­æœ€å³ä¾§çš„ä¸‹æ ‡å€¼ï¼Œå¦åˆ™è¿”å›-1
 *
 * @param numbers æŒ‡å®šæŸ¥è¯¢æ•°ç»„
 * @param target  å¾…æŸ¥æ‰¾æ•°æ®
 * @return æŸ¥æ‰¾ç»“æœ
 */
private static int binarySerachForRightBound(int[] numbers, int target) {
    int low = 0;
    int high = numbers.length - 1;
    int middle;
    // æ­¤å¤„ç”¨ &amp;lt;= æ˜¯å› ä¸ºhigh = numbers.length - 1
    // å¦‚æœhigh = numbers.lengthï¼Œåˆ™æ­¤å¤„éœ€è¦ä½¿ç”¨ &amp;lt;,åŒæ—¶è¿”å›ç»“æœéœ€è¦æ›´æ”¹ä¸º return numbers[low] == target ? low : -1;
    while (low &amp;lt;= high) {
        // (low + high)/2ï¼Œå¦‚æœlow + highå¤§äºIntegerçš„MAX_VALUEä¼šå‘ç”Ÿæ•´å‹æº¢å‡º
        // ä½¿ç”¨low + (high - low) / 2å¯ä»¥é˜²æ­¢æ•´å‹æº¢å‡ºã€‚
        middle = low + (high - low) / 2;
        // åŒ¹é…ç›®æ ‡å€¼ï¼Œå°†å…¶ä¸‹æ ‡+1èµ‹ç»™lowï¼Œå¾€å³ä¾§è¾¹ç•Œç¼©å°
        if (numbers[middle] == target) {
            low = middle + 1;
        } else if (numbers[middle] &amp;gt; target) {
            high = middle - 1;
        } else if (numbers[middle] &amp;lt; target) {
            low = middle + 1;
        }
    }
    // åŒ¹é…è¿”å›ä¸‹æ ‡
    return numbers[high] == target ? high : -1;
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å†’æ³¡æ’åº&#34;&gt;å†’æ³¡æ’åº&lt;/h3&gt;
&lt;p&gt;æ¯”è¾ƒå‰åç›¸é‚»çš„ä¸¤ä¸ªçš„æ•°æ®ï¼Œå¦‚æœå‰é¢æ•°æ®å¤§äºåé¢æ•°æ®ï¼Œåˆ™å°†ä¸¤ä¸ªæ•°æ®æ‰€åœ¨ä½ç½®äº¤æ¢ã€‚æ­¥éª¤å¦‚ä¸‹ï¼ˆä»¥ä»å°åˆ°å¤§ä¸ºä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ªï¼›&lt;/li&gt;
&lt;li&gt;å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œè¿™æ ·åœ¨æœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼›&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼›&lt;/li&gt;
&lt;li&gt;é‡å¤æ­¥éª¤1~3ï¼Œç›´åˆ°æ’åºå®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] numbers = {4, 2, 5, 3, 7, 9, 1};
    bubbleSort3(numbers);
    for (int number : numbers) {
        System.out.println(number);
    }
}

// ä»å°åˆ°å¤§
private static void bubbleSort(int[] numbers) {
    if (numbers.length == 0) {
        return;
    }
    for (int i = 0; i &amp;lt; numbers.length; i++) {
        for (int j = 0; j &amp;lt; numbers.length - 1 - i; j++) {
            if (numbers[j] &amp;gt; numbers[j + 1]) {
                int temp = numbers[j];
                numbers[j] = numbers[j + 1];
                numbers[j + 1] = temp;
            }
        }
    }
}

// ä¼˜åŒ–ï¼Œå»æ‰å¤šä½™æ’åº
private static void bubbleSort2(int[] numbers) {
    if (numbers.length == 0) {
        return;
    }
    for (int i = 0; i &amp;lt; numbers.length; i++) {
        // æ’åºæ ‡è¯†
        boolean isSorted = true;
        for (int j = 0; j &amp;lt; numbers.length - 1 - i; j++) {
            if (numbers[j] &amp;gt; numbers[j + 1]) {
                int temp = numbers[j];
                numbers[j] = numbers[j + 1];
                numbers[j + 1] = temp;
                // å­˜åœ¨äº¤æ¢è¿‡ç¨‹ï¼Œç»§ç»­æ’åº
                isSorted = false;
            }
        }
        if (isSorted) {
            break;
        }
    }
}

//ä»å¤§åˆ°å°
private static void bubbleSort3(int[] numbers) {
    if (numbers.length == 0) {
        return;
    }
    for (int i = numbers.length - 1; i &amp;gt; 0; i--) {
        for (int j = numbers.length - 1; j &amp;gt; numbers.length - 1 - i; j--) {
            if (numbers[j] &amp;gt; numbers[j - 1]) {
                int temp = numbers[j];
                numbers[j] = numbers[j - 1];
                numbers[j - 1] = temp;
            }
        }
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;é€‰æ‹©æ’åº&#34;&gt;é€‰æ‹©æ’åº&lt;/h3&gt;
&lt;p&gt;æ¯ä¸€æ¬¡ä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œå­˜æ”¾åœ¨åºåˆ—çš„èµ·å§‹ï¼ˆæœ«å°¾ï¼‰ä½ç½®ï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºæ•°æ®æ’å®Œã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºæ–¹æ³•ï¼Œæ¯”å¦‚åºåˆ—[5ï¼Œ 5ï¼Œ 3]ç¬¬ä¸€æ¬¡å°±å°†ç¬¬ä¸€ä¸ª[5]ä¸[3]äº¤æ¢ï¼Œå¯¼è‡´ç¬¬ä¸€ä¸ª5æŒªåŠ¨åˆ°ç¬¬äºŒä¸ª5åé¢ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹çŠ¶æ€ï¼šæ— åºåŒºä¸ºR[1..n]ï¼Œæœ‰åºåŒºä¸ºç©ºï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬iè¶Ÿæ’åº(i=1,2,3â€¦n-1)å¼€å§‹æ—¶ï¼Œå½“å‰æœ‰åºåŒºå’Œæ— åºåŒºåˆ†åˆ«ä¸ºR[1..i-1]å’ŒR(i..nï¼‰ã€‚è¯¥è¶Ÿæ’åºä»å½“å‰æ— åºåŒºä¸­-é€‰å‡ºå…³é”®å­—æœ€å°çš„è®°å½• R[k]ï¼Œå°†å®ƒä¸æ— åºåŒºçš„ç¬¬1ä¸ªè®°å½•Räº¤æ¢ï¼Œä½¿R[1..i]å’ŒR[i+1..n)åˆ†åˆ«å˜ä¸ºè®°å½•ä¸ªæ•°å¢åŠ 1ä¸ªçš„æ–°æœ‰åºåŒºå’Œè®°å½•ä¸ªæ•°å‡å°‘1ä¸ªçš„æ–°æ— åºåŒºï¼›&lt;/li&gt;
&lt;li&gt;n-1è¶Ÿç»“æŸï¼Œæ•°ç»„æœ‰åºåŒ–äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {2, 3, 1, 5, 4};
    selectSort(array);
    System.out.println(Arrays.toString(array));
}

private static void selectSort(int[] array) {
    if (array.length == 0) {
        return;
    }
    int minIndex;
    for (int i = 0; i &amp;lt; array.length; i++) {
        minIndex = i;
        for (int j = i + 1; j &amp;lt; array.length; j++) {
            if (array[minIndex] &amp;gt; array[j]) {
                minIndex = j;
            }
        }
        if (minIndex != i) {
            int temp = array[minIndex];
            array[minIndex] = array[i];
            array[i] = temp;
        }
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æ’å…¥æ’åº&#34;&gt;æ’å…¥æ’åº&lt;/h3&gt;
&lt;p&gt;é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºçš„æ•°æ®ï¼Œåœ¨å·²æ’åºçš„æ•°æ®ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”çš„ä½ç½®å¹¶æ’å…¥ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼›&lt;/li&gt;
&lt;li&gt;å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼›&lt;/li&gt;
&lt;li&gt;é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼›&lt;/li&gt;
&lt;li&gt;å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åï¼›&lt;/li&gt;
&lt;li&gt;é‡å¤æ­¥éª¤2~5ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {3, 1, 2, 5, 4};
    binaryInsertSort(array);
    System.out.println(Arrays.toString(array));
}

// ç›´æ¥æ’å…¥
private static void insertSort(int[] array) {
    for (int i = 1; i &amp;lt; array.length; i++) {
        // å¾…æ’å…¥æ•°æ®
        int insertVal = array[i];
        // å¾…æ’å…¥æ•°æ®çš„å‰ä¸€ä¸ªæ•°æ®
        int insertIndex = i - 1;
        // insertIndex &amp;gt;= 0é˜²æ­¢æ•°ç»„è¶Šç•Œ
        while (insertIndex &amp;gt;= 0 &amp;amp;&amp;amp; insertVal &amp;lt; array[insertIndex]) {
            // å¦‚æœæ’å…¥æ•°æ®æ¯”å·²æ’åºæ•°æ®è¦å°ï¼Œåˆ™å°†å·²æ’åºæ•°æ®å‘åç§»åŠ¨ä¸€ä½
            array[insertIndex + 1] = array[insertIndex];
            // åŒæ—¶ï¼Œè®©insertIndexå‘å‰ç§»åŠ¨ä¸€ä½
            insertIndex--;
        }
        // æ’å…¥æŒ‡å®šä½ç½®
        array[insertIndex + 1] = insertVal;
    }
}

// æŠ˜åŠæ’å…¥
private static void binaryInsertSort(int[] array) {
    int temp;
    int low, high, middle;
    for (int i = 1; i &amp;lt; array.length; i++) {
        // å¾…æ’å…¥æ•°æ®
        temp = array[i];
        // äºŒåˆ†æŸ¥æ‰¾åˆé€‚çš„æ’å…¥ä½ç½®
        // å·¦è¾¹é»˜è®¤ä¸ºå·²æ’åº
        low = 0;
        // å³è¾¹ç»ˆç‚¹å–å·²æ’åºæ•°ç»„çš„ç´¢å¼•
        high = i - 1;
        while (low &amp;lt;= high) {
            // æ— ç¬¦å·å³ç§»ä¸€ä½ï¼Œç­‰åŒäº/2
            middle = (low + high) &amp;gt;&amp;gt;&amp;gt; 1;
            if (array[middle] &amp;gt; temp) {
                high = middle - 1;
            } else {
                // ç­‰äºçš„æƒ…å½¢åŒ…å«åœ¨æ­¤ï¼Œå› ä¸ºç›¸ç­‰çš„è¯ï¼Œæ’å…¥æ•°æ®åœ¨å…¶å·¦è¾¹ï¼Œå³è¾¹éƒ½æ˜¯ä¸€è‡´çš„
                low = middle + 1;
            }
        }
        // å·²æ’åºçš„æ‰€æœ‰æ•°æ®å‘åç§»åŠ¨
//        for (int j = i - 1; j &amp;gt;= high + 1; j--) {
//            array[j + 1] = array[j];
//        }
        if (i - (high + 1) &amp;gt;= 0) {
            System.arraycopy(array, high + 1, array, high + 1 + 1, i - (high + 1));
        }
        // æ’å…¥å…ƒç´ 
        array[high + 1] = temp;
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å¸Œå°”æ’åº&#34;&gt;å¸Œå°”æ’åº&lt;/h3&gt;
&lt;p&gt;åˆç§°ç¼©å°å¢é‡æ’åºï¼Œå®ƒæŒ‰ä¸€å®šçš„å¢é‡ï¼ˆgap=lengh/2 -&amp;gt; gap=gap/2,ä¹Ÿç§°å¸Œå°”å¢é‡ï¼‰è¿›è¡Œåˆ†ç»„ï¼Œå¯¹æ¯ä¸€ç»„æ•°æ®è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œç›´è‡³å¢é‡å‡ä¸º1ï¼Œæ‰€æœ‰åˆ†ç»„å†æ¬¡åˆå¹¶ä¸ºä¸€ä¸ªï¼Œæ¥ç€å¯¹è¿™ä¸ªæœ€ç»ˆåˆ†ç»„è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå³å¯å¾—åˆ°æ’åºç»“æœã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti&amp;gt;tjï¼Œtk=1ï¼›&lt;/li&gt;
&lt;li&gt;æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›&lt;/li&gt;
&lt;li&gt;æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {2, 3, 1, 5, 4};
    shellSort(array);
    System.out.println(Arrays.toString(array));
}

// å¸Œå°”æ’åº
private static void shellSort(int[] array) {
    if (array.length == 0) {
        return;
    }
    // æ— ç¬¦å·å³ç§»1ä½ï¼Œç­‰åŒ/2
    int gap = array.length &amp;gt;&amp;gt;&amp;gt; 1;
    while (gap &amp;gt; 0) {
        for (int i = gap; i &amp;lt; array.length; i++) {
            // å¾…æ’å…¥æ•°æ®
            int insertVal = array[i];
            // å¾…æ’å…¥æ•°æ®çš„å‰ä¸€ä¸ªæ•°æ®
            int insertIndex = i - gap;
            // insertIndex &amp;gt;= 0é˜²æ­¢æ•°ç»„è¶Šç•Œ
            while (insertIndex &amp;gt;= 0 &amp;amp;&amp;amp; insertVal &amp;lt; array[insertIndex]) {
                // å¦‚æœæ’å…¥æ•°æ®æ¯”å·²æ’åºæ•°æ®è¦å°ï¼Œåˆ™å°†å·²æ’åºæ•°æ®å‘åç§»åŠ¨ä¸€ä½
                array[insertIndex + gap] = array[insertIndex];
                // åŒæ—¶ï¼Œè®©insertIndexå‘å‰ç§»åŠ¨ä¸€ä½
                insertIndex -= gap;
            }
            // æ’å…¥æŒ‡å®šä½ç½®
            array[insertIndex + gap] = insertVal;
        }
        // æ— ç¬¦å·å³ç§»1ä½ï¼Œç­‰åŒ/2
        gap &amp;gt;&amp;gt;&amp;gt;= 1;
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å½’å¹¶æ’åº&#34;&gt;å½’å¹¶æ’åº&lt;/h3&gt;
&lt;p&gt;å½’å¹¶æ’åºï¼ˆMERGE-SORTï¼‰æ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•,è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—ï¼›å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åºã€‚è‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸ºäºŒè·¯å½’å¹¶ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŠŠé•¿åº¦ä¸ºnçš„è¾“å…¥åºåˆ—åˆ†æˆä¸¤ä¸ªé•¿åº¦ä¸ºn/2çš„å­åºåˆ—ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹è¿™ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«é‡‡ç”¨å½’å¹¶æ’åºï¼›&lt;/li&gt;
&lt;li&gt;å°†ä¸¤ä¸ªæ’åºå¥½çš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„æ’åºåºåˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {2, 1, 3, 9, 5, 8, 4, 6};
    System.out.println(Arrays.toString(mergeSort(array)));
}

private static int[] mergeSort(int[] array) {
    // åªæœ‰ä¸€ä½æˆ–è€…æ²¡æœ‰æ•°æ®æ—¶ï¼Œç›´æ¥è¿”å›åŸæ•°ç»„
    if (array.length &amp;lt; 2) {
        return array;
    }
    // æ— ç¬¦å·å³ç§»ï¼ˆæ­¤å¤„å¿…ä¸ºæ­£æ•°ï¼Œæ•ˆæœä¸å³ç§»ä¸€è‡´ï¼‰ï¼Œç­‰åŒäº/2
    int middle = array.length &amp;gt;&amp;gt;&amp;gt; 1;
    int[] left = Arrays.copyOfRange(array, 0, middle);
    int[] right = Arrays.copyOfRange(array, middle, array.length);
    return merge(mergeSort(left), mergeSort(right));
}

private static int[] merge(int[] left, int[] right) {
    // åˆå¹¶ä¹‹åçš„æ•°ç»„
    int[] result = new int[left.length + right.length];
    for (int index = 0, i = 0, j = 0; index &amp;lt; result.length; index++) {
        // å·¦ä¾§æ•°ç»„å·²ç»å…¨éƒ¨æ”¾å…¥ç»“æœæ•°ç»„ä¸­,å°†å³ä¾§æ•°ç»„æ•°æ®ç›´æ¥é€’å¢æ”¾å…¥
        if (i &amp;gt;= left.length) {
            result[index] = right[j++];
        } else if (j &amp;gt;= right.length) {
            // å³ä¾§æ•°ç»„å·²ç»å…¨éƒ¨æ”¾å…¥ç»“æœæ•°ç»„ä¸­,å°†å·¦ä¾§æ•°ç»„æ•°æ®ç›´æ¥é€’å¢æ”¾å…¥
            result[index] = left[i++];
        } else if (left[i] &amp;gt; right[j]) {
            // å·¦ä¾§æ•°ç»„ä¸­çš„æ•°æ®æ¯”å³ä¾§æ•°ç»„ä¸­çš„æ•°æ®å€¼å¤§,å°†å³ä¾§æ•°ç»„æ•°æ®ç›´æ¥æ”¾å…¥ï¼Œéšåé€’å¢
            result[index] = right[j++];
        } else {
            // å·¦ä¾§æ•°ç»„ä¸­çš„æ•°æ®æ¯”å³ä¾§æ•°ç»„ä¸­çš„æ•°æ®å€¼å°,å°†å·¦ä¾§æ•°ç»„æ•°æ®ç›´æ¥æ”¾å…¥ï¼Œéšåé€’å¢
            result[index] = left[i++];
        }
    }
    return result;
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å¿«é€Ÿæ’åº&#34;&gt;å¿«é€Ÿæ’åº&lt;/h3&gt;
&lt;p&gt;å¿«é€Ÿæ’åºç”±C. A. R. Hoareåœ¨1962å¹´æå‡ºã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥é€’å½’è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šåœ¨æ­¤è¿‡ç¨‹ä¸­éœ€è¦å…ˆé€‰å–ä¸€ä¸ªå…³é”®å€¼ä½œä¸ºåŸºå‡†å€¼ï¼Œè¿™æ ·æ¯”åŸºå‡†å€¼å°çš„éƒ½åœ¨å·¦è¾¹ï¼Œå¤§çš„éƒ½åœ¨å³è¾¹ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†â€ï¼ˆpivotï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼›&lt;/li&gt;
&lt;li&gt;é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230302007.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48, 1};
    quickSort(array, 0, array.length - 1);
    System.out.println(Arrays.toString(array));
}

// å¡«å‘æ³•
private static void quickSort(int[] array, int start, int end) {
    if (array.length &amp;lt; 1 || start &amp;lt; 0 || end &amp;gt;= array.length || start &amp;gt; end) {
        return;
    }
    int i = start;
    int j = end;
    // åŸºå‡†å€¼
    int pivot = array[i];
    // å·¦å³ä¸¤è¾¹åŒæ—¶æ‰«æï¼Œç›´åˆ°ä¸¤è€…äº¤é”™
    while (i &amp;lt;= j) {
        // ä»å³è¾¹å¯»æ‰¾æ¯”åŸºå‡†å€¼å°çš„æ•°
        while (array[j] &amp;gt; pivot) {
            j--;
        }
        // ä»å·¦è¾¹å¯»æ‰¾æ¯”åŸºå‡†å€¼å¤§çš„æ•°
        while (array[i] &amp;lt; pivot) {
            i++;
        }
        // æ­¤å¤„å·²æ‰¾åˆ°æ¯”åŸºå‡†å€¼å¤§çš„æ•°ï¼ˆå·¦è¾¹ï¼‰ï¼Œæ¯”åŸºå‡†å€¼å°çš„æ•°ï¼ˆå³è¾¹ï¼‰ï¼Œä¸¤è€…è¿›è¡Œäº¤æ¢
        if (i &amp;lt;= j) {
            swap(array, i, j);
            i++;
            j--;
        }
    }
    // å·¦è¾¹å†åšæ’åºï¼Œç›´åˆ°åªå‰©ä¸‹ä¸€ä¸ªæ•°ï¼Œåˆ™é€€å‡ºé€’å½’
    if (start &amp;lt; j) {
        quickSort(array, start, j);
    }
    // å³è¾¹å†åšæ’åºï¼Œç›´åˆ°åªå‰©ä¸‹ä¸€ä¸ªæ•°ï¼Œåˆ™é€€å‡ºé€’å½’
    if (end &amp;gt; i) {
        quickSort(array, i, end);
    }
}

private static void swap(int[] array, int i, int j) {
    if (i != j) {
        int temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å †æ’åº&#34;&gt;å †æ’åº&lt;/h3&gt;
&lt;p&gt;å †æ’åº(Heapsort)æ˜¯æŒ‡åˆ©ç”¨å †ç§¯æ ‘ï¼ˆå †ï¼‰è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ï¼Œå®ƒæ˜¯é€‰æ‹©æ’åºçš„ä¸€ç§ã€‚å¯ä»¥åˆ©ç”¨æ•°ç»„çš„ç‰¹ç‚¹å¿«é€Ÿå®šä½æŒ‡å®šç´¢å¼•çš„å…ƒç´ ã€‚å †åˆ†ä¸ºå¤§æ ¹å †å’Œå°æ ¹å †ï¼Œæ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ—(R1,R2â€¦.Rn)æ„å»ºæˆå¤§é¡¶å †ï¼Œæ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒºï¼›&lt;/li&gt;
&lt;li&gt;å°†å †é¡¶å…ƒç´ R[1]ä¸æœ€åä¸€ä¸ªå…ƒç´ R[n]äº¤æ¢ï¼Œæ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)å’Œæ–°çš„æœ‰åºåŒº(Rn),ä¸”æ»¡è¶³R[1,2â€¦n-1]&amp;lt;=R[n]ï¼›&lt;/li&gt;
&lt;li&gt;ç”±äºäº¤æ¢åæ–°çš„å †é¡¶R[1]å¯èƒ½è¿åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)è°ƒæ•´ä¸ºæ–°å †ï¼Œç„¶åå†æ¬¡å°†R[1]ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2â€¦.Rn-2)å’Œæ–°çš„æœ‰åºåŒº(Rn-1,Rn)ã€‚ä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸ºn-1ï¼Œåˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48, 1};
    heapSort(array);
    System.out.println(Arrays.toString(array));
}

private static void heapSort(int[] array) {
    int length = array.length;
    if (length &amp;lt; 1) {
        return;
    }
    buildMaxHeap(array, length);
    while (length &amp;gt; 0) {
        swap(array, 0, length - 1);
        length--;
        adjustHeap(array, 0, length);
    }
}

private static void buildMaxHeap(int[] array, int length) {
    // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹å‘ä¸Šæ„å»ºæœ€å¤§å †
    for (int i = (length / 2 - 1); i &amp;gt;= 0; i--) {
        adjustHeap(array, i, length);
    }
}

private static void adjustHeap(int[] array, int i, int length) {
    int maxIndex = i;
    // å¦‚æœæœ‰å·¦å­æ ‘ï¼Œä¸”å·¦å­æ ‘å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œåˆ™å°†æœ€å¤§æŒ‡é’ˆæŒ‡å‘å·¦å­æ ‘
    if (i * 2 &amp;lt; length &amp;amp;&amp;amp; array[i * 2] &amp;gt; array[maxIndex]) {
        maxIndex = i * 2;
    }
    // å¦‚æœæœ‰å³å­æ ‘ï¼Œä¸”å³å­æ ‘å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œåˆ™å°†æœ€å¤§æŒ‡é’ˆæŒ‡å‘å³å­æ ‘
    if (i * 2 + 1 &amp;lt; length &amp;amp;&amp;amp; array[i * 2 + 1] &amp;gt; array[maxIndex]) {
        maxIndex = i * 2 + 1;
    }
    // å¦‚æœçˆ¶èŠ‚ç‚¹ä¸æ˜¯æœ€å¤§å€¼ï¼Œåˆ™å°†çˆ¶èŠ‚ç‚¹ä¸æœ€å¤§å€¼äº¤æ¢ï¼Œå¹¶é€’å½’è°ƒæ•´ä¸çˆ¶èŠ‚ç‚¹äº¤æ¢çš„ä½ç½®
    if (maxIndex != i) {
        swap(array, maxIndex, i);
        adjustHeap(array, maxIndex, length);
    }
}

private static void swap(int[] array, int i, int j) {
    if (i != j) {
        int temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;è®¡æ•°æ’åº&#34;&gt;è®¡æ•°æ’åº&lt;/h3&gt;
&lt;p&gt;è®¡æ•°æ’åºçš„æ ¸å¿ƒåœ¨äºå°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ã€‚ ä½œä¸ºä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºï¼Œè®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚&lt;/p&gt;
&lt;p&gt;è®¡æ•°æ’åº(Counting sort)æ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚è®¡æ•°æ’åºä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„æ•°ç»„Cï¼Œå…¶ä¸­ç¬¬iä¸ªå…ƒç´ æ˜¯å¾…æ’åºæ•°ç»„Aä¸­å€¼ç­‰äºiçš„å…ƒç´ çš„ä¸ªæ•°ã€‚ç„¶åæ ¹æ®æ•°ç»„Cæ¥å°†Aä¸­çš„å…ƒç´ æ’åˆ°æ­£ç¡®çš„ä½ç½®ã€‚å®ƒåªèƒ½å¯¹æ•´æ•°è¿›è¡Œæ’åºã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ï¼›&lt;/li&gt;
&lt;li&gt;ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸ºiçš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ•°ç»„Cçš„ç¬¬ié¡¹ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä»Cä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´ iæ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬C(i)é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°†C(i)å‡å»1ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48, 1};
    CountingSort(array);
    System.out.println(Arrays.toString(array));
}

private static void CountingSort(int[] array) {
    if (array.length &amp;lt; 1) {
        return;
    }
    int bias, min = array[0], max = array[0];
    for (int i = 1; i &amp;lt; array.length; i++) {
        if (array[i] &amp;gt; max)
            max = array[i];
        if (array[i] &amp;lt; min)
            min = array[i];
    }
    bias = 0 - min;
    int[] bucket = new int[max - min + 1];
    Arrays.fill(bucket, 0);
    for (int anArray : array) {
        bucket[anArray + bias]++;
    }
    int index = 0, i = 0;
    while (index &amp;lt; array.length) {
        if (bucket[i] != 0) {
            array[index] = i - bias;
            bucket[i]--;
            index++;
        } else
            i++;
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æ¡¶æ’åº&#34;&gt;æ¡¶æ’åº&lt;/h3&gt;
&lt;p&gt;æ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚å®ƒåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚&lt;/p&gt;
&lt;p&gt;æ¡¶æ’åº (Bucket sort)çš„å·¥ä½œçš„åŸç†ï¼šå‡è®¾è¾“å…¥æ•°æ®æœä»å‡åŒ€åˆ†å¸ƒï¼Œå°†æ•°æ®åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶å†åˆ†åˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šå¦‚æœé€’å½’ä½¿ç”¨æ¡¶æ’åºä¸ºå„ä¸ªæ¡¶æ’åºï¼Œåˆ™å½“æ¡¶æ•°é‡ä¸º1æ—¶è¦æ‰‹åŠ¨å‡å°BucketSizeå¢åŠ ä¸‹ä¸€å¾ªç¯æ¡¶çš„æ•°é‡ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯ï¼Œå¯¼è‡´å†…å­˜æº¢å‡ºã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äººä¸ºè®¾ç½®ä¸€ä¸ªBucketSizeï¼Œä½œä¸ºæ¯ä¸ªæ¡¶æ‰€èƒ½æ”¾ç½®å¤šå°‘ä¸ªä¸åŒæ•°å€¼ï¼ˆä¾‹å¦‚å½“BucketSize==5æ—¶ï¼Œè¯¥æ¡¶å¯ä»¥å­˜æ”¾ï½›1,2,3,4,5ï½è¿™å‡ ç§æ•°å­—ï¼Œä½†æ˜¯å®¹é‡ä¸é™ï¼Œå³å¯ä»¥å­˜æ”¾100ä¸ª3ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;éå†è¾“å…¥æ•°æ®ï¼Œå¹¶ä¸”æŠŠæ•°æ®ä¸€ä¸ªä¸€ä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œå»ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶è¿›è¡Œæ’åºï¼Œå¯ä»¥ä½¿ç”¨å…¶å®ƒæ’åºæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é€’å½’ä½¿ç”¨æ¡¶æ’åºï¼›&lt;/li&gt;
&lt;li&gt;ä»ä¸æ˜¯ç©ºçš„æ¡¶é‡ŒæŠŠæ’å¥½åºçš„æ•°æ®æ‹¼æ¥èµ·æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    Integer[] array = {3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48, 1};
    ArrayList&amp;lt;Integer&amp;gt; list = new ArrayList&amp;lt;&amp;gt;(array.length);
    Collections.addAll(list, array);
    System.out.println(bucketSort(list, array.length));
}

private static ArrayList&amp;lt;Integer&amp;gt; bucketSort(ArrayList&amp;lt;Integer&amp;gt; array, int bucketSize) {
    if (array == null || array.size() &amp;lt; 2)
        return array;
    int max = array.get(0), min = array.get(0);
    // æ‰¾åˆ°æœ€å¤§å€¼æœ€å°å€¼
    for (Integer i : array) {
        if (i &amp;gt; max)
            max = i;
        if (i &amp;lt; min)
            min = i;
    }
    int bucketCount = (max - min) / bucketSize + 1;
    ArrayList&amp;lt;ArrayList&amp;lt;Integer&amp;gt;&amp;gt; bucketArr = new ArrayList&amp;lt;&amp;gt;(bucketCount);
    ArrayList&amp;lt;Integer&amp;gt; resultArr = new ArrayList&amp;lt;&amp;gt;();
    for (int i = 0; i &amp;lt; bucketCount; i++) {
        bucketArr.add(new ArrayList&amp;lt;&amp;gt;());
    }
    for (Integer i : array) {
        bucketArr.get((i - min) / bucketSize).add(i);
    }
    for (int i = 0; i &amp;lt; bucketCount; i++) {
        if (bucketSize == 1) { // å¦‚æœå¸¦æ’åºæ•°ç»„ä¸­æœ‰é‡å¤æ•°å­—æ—¶
            resultArr.addAll(bucketArr.get(i));
        } else {
            if (bucketCount == 1) {
                bucketSize--;
            }
            ArrayList&amp;lt;Integer&amp;gt; temp = BucketSort(bucketArr.get(i), bucketSize);
            resultArr.addAll(temp);
        }
    }
    return resultArr;
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;åŸºæ•°æ’åº&#34;&gt;åŸºæ•°æ’åº&lt;/h3&gt;
&lt;p&gt;åŸºæ•°æ’åº(radix sort)å±äº&amp;quot;åˆ†é…å¼æ’åº&amp;quot;(distribution sort)ï¼Œåˆç§°&amp;quot;æ¡¶å­æ³•&amp;quot;(bucket sort)æˆ–bin sortï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯é€è¿‡é”®å€¼çš„éƒ¨ä»½èµ„è®¯ï¼Œå°†è¦æ’åºçš„å…ƒç´ åˆ†é…è‡³æŸäº›&amp;quot;æ¡¶&amp;quot;ä¸­ï¼Œè—‰ä»¥è¾¾åˆ°æ’åºçš„ä½œç”¨ï¼ŒåŸºæ•°æ’åºæ³•æ˜¯å±äºç¨³å®šæ€§çš„æ’åºï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºO (nlog(r)m)ï¼Œå…¶ä¸­rä¸ºæ‰€é‡‡å–çš„åŸºæ•°ï¼Œè€Œmä¸ºå †æ•°ï¼Œåœ¨æŸäº›æ—¶å€™ï¼ŒåŸºæ•°æ’åºæ³•çš„æ•ˆç‡é«˜äºå…¶å®ƒçš„ç¨³å®šæ€§æ’åºæ³•ã€‚&lt;/p&gt;
&lt;p&gt;åŸºæ•°æ’åºæ˜¯æŒ‰ç…§ä½ä½å…ˆæ’åºï¼Œç„¶åæ”¶é›†ï¼›å†æŒ‰ç…§é«˜ä½æ’åºï¼Œç„¶åå†æ”¶é›†ï¼›ä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æœ€é«˜ä½ã€‚æœ‰æ—¶å€™æœ‰äº›å±æ€§æ˜¯æœ‰ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œå…ˆæŒ‰ä½ä¼˜å…ˆçº§æ’åºï¼Œå†æŒ‰é«˜ä¼˜å…ˆçº§æ’åºã€‚æœ€åçš„æ¬¡åºå°±æ˜¯é«˜ä¼˜å…ˆçº§é«˜çš„åœ¨å‰ï¼Œé«˜ä¼˜å…ˆçº§ç›¸åŒçš„ä½ä¼˜å…ˆçº§é«˜çš„åœ¨å‰ã€‚åŸºæ•°æ’åºåŸºäºåˆ†åˆ«æ’åºï¼Œåˆ†åˆ«æ”¶é›†ï¼Œæ‰€ä»¥æ˜¯ç¨³å®šçš„ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    int[] array = {3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48, 1};
    radixSort(array);
    System.out.println(Arrays.toString(array));
}

private static void radixSort(int[] array) {
    if (array == null || array.length &amp;lt; 2) {
        return;
    }
    // 1.å…ˆç®—å‡ºæœ€å¤§æ•°çš„ä½æ•°ï¼›
    int max = array[0];
    for (int i = 1; i &amp;lt; array.length; i++) {
        max = Math.max(max, array[i]);
    }
    int maxDigit = 0;
    while (max != 0) {
        max /= 10;
        maxDigit++;
    }
    int mod = 10, div = 1;
    ArrayList&amp;lt;ArrayList&amp;lt;Integer&amp;gt;&amp;gt; bucketList = new ArrayList&amp;lt;ArrayList&amp;lt;Integer&amp;gt;&amp;gt;();
    for (int i = 0; i &amp;lt; 10; i++) {
        bucketList.add(new ArrayList&amp;lt;&amp;gt;());
    }
    for (int i = 0; i &amp;lt; maxDigit; i++, mod *= 10, div *= 10) {
        for (int j : array) {
            int num = (j % mod) / div;
            bucketList.get(num).add(j);
        }
        int index = 0;
        for (ArrayList&amp;lt;Integer&amp;gt; buckets : bucketList) {
            for (Integer bucket : buckets) {
                array[index++] = bucket;
            }
            buckets.clear();
        }
    }
}

&lt;/code&gt;&lt;/pre&gt;
">Javaä¸­çš„å¸¸ç”¨æ’åºç®—æ³•</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java-zhong-yin-yong-andioandlei-jia-zai-anddui-xiang-chuang-jian-guo-cheng/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Javaä¸­çš„å››ç§å¼•ç”¨ç±»å‹ï¼ŒJavaIOç±»å‹ï¼ˆBIOï¼ŒNIOï¼ŒAIOï¼‰ï¼ŒJavaç±»åŠ è½½æœºåˆ¶ä»¥åŠHotspot JVMè™šæ‹Ÿæœºå¯¹è±¡çš„æ¢ç©¶ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/boat-1014711_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;å››ç§å¼•ç”¨&#34;&gt;å››ç§å¼•ç”¨&lt;/h2&gt;
&lt;h3 id=&#34;å¼ºå¼•ç”¨&#34;&gt;å¼ºå¼•ç”¨&lt;/h3&gt;
&lt;p&gt;æŠŠä¸€ä¸ªå¯¹è±¡å¤åˆ¶ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸ªå¼•ç”¨å˜é‡å°±æ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«å¼ºå¼•ç”¨å˜é‡å¼•ç”¨æ—¶ï¼Œå®ƒå¤„äºå¯è¾¾çŠ¶æ€ï¼Œè¿™æ—¶ï¼ŒGCä¸ä¼šå¯¹å…¶è¿›è¡Œå›æ”¶ï¼ˆé€ æˆOOMçš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼‰ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// å¼ºå¼•ç”¨
String str = &amp;quot;test&amp;quot;;
// å–æ¶ˆå¼ºå¼•ç”¨
str = null;

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;è½¯å¼•ç”¨&#34;&gt;è½¯å¼•ç”¨&lt;/h3&gt;
&lt;p&gt;è½¯å¼•ç”¨éœ€è¦ä½¿ç”¨SoftReferenceç±»æ¥å®ç°ï¼Œå¯¹äºè½¯å¼•ç”¨å¯¹è±¡æ¥è¯´ï¼Œå½“ç³»ç»Ÿå†…å­˜è¶³å¤Ÿæ—¶ä¸ä¼šå¯¹å…¶è¿›è¡Œå›æ”¶ï¼Œåä¹‹åˆ™è¿›è¡Œå›æ”¶ã€‚é€šå¸¸åº”ç”¨åœ¨å¯¹å†…å­˜æ•æ„Ÿçš„ç¨‹åºä¸­ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è½¯å¼•ç”¨
SoftReference&amp;lt;String&amp;gt; softReference = new SoftReference&amp;lt;&amp;gt;(&amp;quot;test&amp;quot;);

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å¼±å¼•ç”¨&#34;&gt;å¼±å¼•ç”¨&lt;/h3&gt;
&lt;p&gt;å¼±å¼•ç”¨éœ€è¦ä½¿ç”¨WeakReferenceç±»æ¥å®ç°ï¼Œå®ƒæ¯”è½¯å¼•ç”¨ç”Ÿå­˜å‘¨æœŸæ›´çŸ­ï¼Œå¯¹äºå¼±å¼•ç”¨å¯¹è±¡æ¥è¯´ï¼Œåªè¦åƒåœ¾å›æ”¶æœºåˆ¶ä¸€è¿è¡Œï¼Œä¸ç®¡JVMå†…å­˜ç©ºé—´æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå¯¹å…¶è¿›è¡Œå›æ”¶ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// å¼±å¼•ç”¨
WeakReference&amp;lt;String&amp;gt; weakReference = new WeakReference&amp;lt;&amp;gt;(&amp;quot;test&amp;quot;);

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;è™šå¼•ç”¨&#34;&gt;è™šå¼•ç”¨&lt;/h3&gt;
&lt;p&gt;è™šå¼•ç”¨éœ€è¦ä½¿ç”¨PhantomReferenceç±»æ¥å®ç°ï¼Œå®ƒä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»ä¸å¼•ç”¨é˜Ÿåˆ—è”åˆä½¿ç”¨ã€‚è™šå¼•ç”¨çš„ä¸»è¦ä½œç”¨æ˜¯è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è™šå¼•ç”¨
ReferenceQueue&amp;lt;String&amp;gt; queue = new ReferenceQueue&amp;lt;&amp;gt;();
PhantomReference&amp;lt;String&amp;gt; pr = new PhantomReference&amp;lt;&amp;gt;(&amp;quot;test&amp;quot;, queue);

&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;javaä¸­çš„io&#34;&gt;Javaä¸­çš„I/O&lt;/h2&gt;
&lt;h3 id=&#34;bioblock-io&#34;&gt;BIOï¼ˆBlock IOï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŒæ­¥é˜»å¡å¼IOï¼Œä¸€èˆ¬æŒ‡å¹³å¸¸æ‰€ç”¨çš„IOç±»ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªå“åº”ï¼Œä¸ºäº†åˆç†çš„åˆ©ç”¨èµ„æºï¼Œå¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹ï¼ˆçº¿ç¨‹æ± ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤IOä¸€èˆ¬é’ˆå¯¹å¹¶å‘é‡è¾ƒå°çš„åœºæ™¯ï¼ˆ&amp;lt;1000ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;BIOæ“ä½œçš„å¯¹è±¡æ˜¯æµï¼ˆStreamï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚ï¼šåœ¨ATMæœºä¸Šå–é’±ï¼Œåªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„å–ï¼Œå‰é¢æœ‰äººçš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…ï¼›å–é’±çš„æ—¶å€™ï¼Œéœ€è¦æœ¬äººè¿›è¡Œç›¸å…³å–é’±æ“ä½œï¼ˆå–å‡ºä¹‹åæ‹¿åˆ°é’±æ‰èµ°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;nionew-io&#34;&gt;NIOï¼ˆNew IOï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŒæ­¥éé˜»å¡å¼IOã€‚&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨Channelï¼ˆé€šé“ï¼‰é€šè®¯ï¼Œå®ç°äº†å¤šè·¯å¤ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ ¸å¿ƒç»„ä»¶ï¼šBufferï¼ˆç¼“å†²åŒºï¼‰ï¼ŒChannelï¼ˆé€šé“ï¼‰ï¼ŒSelectorï¼ˆé€‰æ‹©å™¨ï¼‰&lt;/li&gt;
&lt;li&gt;NIOæ“ä½œçš„å¯¹è±¡æ˜¯ç¼“å­˜åŒºï¼ˆBufferï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åŸºæœ¬è¿è¡Œæµç¨‹ï¼šå½“Channelå‘ç”Ÿæ–°è¿æ¥ã€å°±ç»ªè¯»ï¼Œå°±ç»ªå†™çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šåœ¨Selectorä¸Šæ³¨å†Œç›¸åº”çš„äº‹ä»¶ï¼Œç”Ÿæˆä¸€ä¸ªä¸Channelç»‘å®šçš„selectKeyï¼›å…¶æ¬¡ç”±ä¸€ä¸ªçº¿ç¨‹è½®è¯¢selectKeyé›†åˆï¼Œåˆ©ç”¨æ“ä½œç³»ç»Ÿåº•å±‚çš„å‡½æ•°select() æˆ–è€… epollï¼ˆLinux 2.6ä¹‹å‰æ˜¯selectã€pollï¼Œ2.6ä¹‹åæ˜¯epollï¼ŒWindowsæ˜¯iocpï¼‰å»æ“ä½œç³»ç»ŸæŸ¥è¯¢IOæ˜¯å¦å°±ç»ªï¼Œå¦‚æœå°±ç»ªåˆ™æ‰§è¡Œç›¸åº”çš„äº‹ä»¶å¤„ç†å™¨ï¼ˆé€šè¿‡selectKeyæ‰¾åˆ°Channelï¼Œç„¶ååˆ©ç”¨ä¸Channelç»‘å®šçš„bufferè¿›è¡Œå®é™…è¯»å†™ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚ï¼šåœ¨é“¶è¡Œå¤§å…å–é’±ï¼Œå¯¹äºå‰é¢æ˜¯å¦æœ‰äººç­‰å€™ï¼Œåªéœ€è¦éš”ä¸€æ®µæ—¶é—´å»é—®ä¸€ä¸‹å¤§å ‚ç»ç†æ˜¯å¦å¯ä»¥å–é’±å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ä¸€ç›´å»æ’é˜Ÿï¼ˆè¿™æ®µæ—¶é—´å¯ä»¥åšå…¶ä»–äº‹ï¼‰ï¼›å–é’±çš„æ—¶å€™ï¼Œéœ€è¦æŸœå‘˜è¿›è¡Œç›¸å…³æ“ä½œï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ä¿è¯ä½ ä¹Ÿåœ¨æŸœå‘˜é¢å‰ï¼ˆä¸èƒ½ç¦»å¼€ï¼Œä¸ç„¶æŸœå‘˜å¯èƒ½ä¼šæ‰¾ä¸åˆ°ä½ ï¼Œç„¶åé’±å°±æ²¡æœ‰å®é™…æ‹¿åˆ°æ‰‹é‡Œäº†ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;aioasynchronous-io&#34;&gt;AIOï¼ˆAsynchronous IOï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¼‚æ­¥éé˜»å¡å¼IOã€‚&lt;/li&gt;
&lt;li&gt;å…¶å®ç°æ˜¯åŸºäºäº‹ä»¶ä»¥åŠå›è°ƒæœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;AIOä¸NIOæœ‰ç‚¹ç›¸ä¼¼ï¼Œä¸è¿‡å¯¹äºå®é™…è¯»å†™è€Œè¨€ï¼ŒAIOæ˜¯äº¤ç»™æ“ä½œç³»ç»Ÿåº•å±‚è‡ªå·±å»å®Œæˆçš„ï¼Œå®Œæˆä¹‹åä¼šè¿”å›ä¸€ä¸ªIOå®Œæˆçš„å›è°ƒæ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚ï¼šåŒæ ·æ˜¯å»é“¶è¡Œå–é’±ï¼Œä¸è¿‡è¿™æ¬¡ä½ æ˜¯è®©æœ‹å‹å»å¸®å¿™å–çš„ï¼Œä½ æœ‹å‹ä¼šå¸®ä½ æ’é˜Ÿï¼Œç„¶åå–é’±ï¼Œæ¥ç€æŠŠé’±ç»™ä½ ï¼Œå¹¶å‘Šè¯‰ä½ å·²ç»å–å¥½äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ioé˜¶æ®µ&#34;&gt;IOé˜¶æ®µ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;IOä¸­å¯¹äºè¯»å†™ä¸€èˆ¬åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šå°±ç»ªè¯»å†™ï¼ˆå‡†å¤‡æ•°æ®ï¼‰ä»¥åŠå®é™…è¯»å†™ï¼ˆçœŸæ­£è¯»å†™æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹åº”ä¸Šé¢å–é’±ä¾‹å­è€Œè¨€ï¼Œå°±ç»ªè¯»å†™æŒ‡çš„æ˜¯æ’é˜Ÿï¼Œå®é™…è¯»å†™æŒ‡çš„æ˜¯å–é’±æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åŒæ­¥å¼‚æ­¥&#34;&gt;åŒæ­¥ï¼Œå¼‚æ­¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŒæ­¥æŒ‡çš„æ˜¯æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…å½“å‰ä»»åŠ¡è¿”å›ç»“æœï¼›å¼‚æ­¥åˆ™ç›¸åï¼Œå®ƒä¸éœ€è¦ç­‰å¾…å½“å‰ä»»åŠ¡è¿”å›ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯ä¾èµ–äºäº‹ä»¶ï¼Œå›è°ƒæœºåˆ¶æ¥å®ç°ä»»åŠ¡é—´çš„æ¬¡åºå…³ç³»ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ­¥ï¼Œå¼‚æ­¥å¯¹äºIOè€Œè¨€æŒ‡çš„æ˜¯å®é™…è¯»å†™é˜¶æ®µï¼›å¯¹åº”å–é’±ä¾‹å­è€Œè¨€ï¼Œå°±æ˜¯çœŸæ­£å–é’±æ“ä½œï¼ˆåŒæ­¥ï¼Œè‡ªå·±å–é’±ï¼›å¼‚æ­¥ï¼Œæœ‹å‹å¸®å¿™å–é’±ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é˜»å¡éé˜»å¡&#34;&gt;é˜»å¡ï¼Œéé˜»å¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é˜»å¡æŒ‡çš„æ˜¯å¦‚æœä»»åŠ¡åœ¨æ‰§è¡Œï¼Œå½“å‰çº¿ç¨‹ä¼šé˜»å¡ï¼Œéœ€è¦ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œï¼Œè¿™æœŸé—´è¯¥çº¿ç¨‹ä¸èƒ½æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼›éé˜»å¡åˆ™æ˜¯è¯´åœ¨ä¸€ä¸ªä»»åŠ¡æ‰§è¡ŒæœŸé—´ï¼Œçº¿ç¨‹ä¸ä¼šé˜»å¡ï¼Œå¯ä»¥æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;é˜»å¡ï¼Œéé˜»å¡å¯¹äºIOè€Œè¨€æŒ‡çš„æ˜¯å°±ç»ªè¯»å†™é˜¶æ®µï¼›å¯¹åº”å–é’±ä¾‹å­è€Œè¨€ï¼Œå°±æ˜¯æ’é˜Ÿç­‰å€™ï¼ˆé˜»å¡ï¼Œæ’é˜Ÿæ²¡å¸¦æ‰‹æœºï¼Œåªèƒ½å¹²ç­‰ç€ï¼›éé˜»å¡ï¼Œæ’é˜Ÿå¸¦äº†æ‰‹æœºï¼Œå¯ä»¥ä¸€è¾¹ç©æ‰‹æœºä¸€è¾¹æ’é˜Ÿï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;jvmç±»åŠ è½½&#34;&gt;JVMç±»åŠ è½½&lt;/h2&gt;
&lt;h3 id=&#34;ç±»åŠ è½½æœºåˆ¶&#34;&gt;ç±»åŠ è½½æœºåˆ¶&lt;/h3&gt;
&lt;p&gt;JVMç±»åŠ è½½æœºåˆ¶åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼šåŠ è½½ï¼ŒéªŒè¯ï¼Œå‡†å¤‡ï¼Œè§£æï¼Œåˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301027.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;1ã€åŠ è½½ï¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„å…¥å£ï¼ˆæ³¨æ„ï¼šä¸ä¸€å®šéå¾—ä»Classæ–‡ä»¶ä¸­è·å–ï¼Œä¹Ÿå¯ä»¥ä»ZIPï¼ˆå¦‚jarï¼Œwarï¼‰ä¸­è¯»å–ï¼Œæˆ–è€…åœ¨è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼ˆåŠ¨æ€ä»£ç†ï¼‰ï¼Œæˆ–è€…ç”±å…¶ä»–æ–‡ä»¶è½¬æ¢è€Œæ¥ï¼ˆå¦‚JSPè½¬æ¢ä¸ºClassï¼‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;2ã€éªŒè¯ï¼šç¡®ä¿Classæ–‡ä»¶å­—èŠ‚æµä¸­æ‰€åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;3ã€å‡†å¤‡ï¼šæ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶ä¸ºå…¶è®¾ç½®åˆå§‹å€¼ï¼Œå³åœ¨æ–¹æ³•åŒºä¸­åˆ†é…è¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚éœ€è¦æ³¨æ„è¿™é‡Œæ‰€è¯´çš„åˆå§‹å€¼æ¦‚å¿µï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªç±»å˜é‡å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static int port = 8080;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é‚£ä¹ˆæ­¤å˜é‡åœ¨å‡†å¤‡é˜¶æ®µæ‰€è°“çš„è®¾ç½®åˆå§‹å€¼ï¼Œæ˜¯è®¾ç½®å…¶ä¸º0ï¼Œè€Œä¸æ˜¯8080ã€‚å°†portèµ‹å€¼ä¸º8080çš„put static æŒ‡ä»¤æ˜¯ç¨‹åºè¢«ç¼–è¯‘åï¼Œå­˜æ”¾äºç±»æ„é€ å™¨&lt;code&gt;&amp;lt;Client&amp;gt;&lt;/code&gt;æ–¹æ³•ä¸­çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å¦‚æœå˜é‡å£°æ˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static final int port = 8080;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é‚£ä¹ˆåœ¨ç¼–è¯‘æœŸé—´ï¼Œä¼šä¸ºportç”ŸæˆConstantValueå±æ€§ï¼Œåœ¨å‡†å¤‡é˜¶æ®µè™šæ‹Ÿæœºä¼šæ ¹æ®ConstantValueå±æ€§å°†portèµ‹å€¼ä¸º8080.&lt;/p&gt;
&lt;p&gt;4ã€è§£æï¼šæ­¤é˜¶æ®µæŒ‡è™šæ‹Ÿæœºå°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¦å·å¼•ç”¨ï¼šä¸è™šæ‹Ÿæœºå®ç°çš„å¸ƒå±€æ— å…³ï¼Œå¼•ç”¨çš„ç›®æ ‡ä¸ä¸€å®šè¦å·²ç»åŠ è½½è‡³å†…å­˜ä¸­ã€‚å„ç§è™šæ‹Ÿæœºçš„å†…å­˜å¸ƒå±€å¯ä»¥ä¸ä¸€è‡´ï¼Œä½†å®ƒä»¬èƒ½æ¥å—çš„ç¬¦å·å¼•ç”¨å¿…é¡»ä¸€è‡´ï¼Œå› ä¸ºç¬¦å·å¼•ç”¨çš„å­—é¢é‡å½¢å¼æ˜ç¡®çš„å®šä¹‰åœ¨javaè™šæ‹Ÿæœºè§„èŒƒçš„Classæ–‡ä»¶æ ¼å¼ä¸­ã€‚ã€&lt;/p&gt;
&lt;p&gt;ç›´æ¥å¼•ç”¨ï¼šæ˜¯å¯ä»¥ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆï¼Œç›¸å¯¹åç§»é‡æˆ–æ˜¯ä¸€ä¸ªèƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥å¼•ç”¨ï¼Œé‚£ä¹ˆå¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»åœ¨å†…å­˜ä¸­å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;5ã€åˆå§‹åŒ–ï¼šæ­¤é˜¶æ®µå¼€å§‹çœŸæ­£æ‰§è¡Œç±»ä¸­å®šä¹‰çš„javaç¨‹åºä»£ç ï¼Œå³å¼€å§‹å¼€å§‹æ‰§è¡Œç±»æ„é€ å™¨&lt;code&gt;&amp;lt;client&amp;gt;&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;client&amp;gt;&lt;/code&gt;æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„ç±»é™æ€å˜é‡èµ‹å€¼ä»¥åŠé™æ€è¯­å¥å—ä¸­çš„è¯­å¥åˆå¹¶è€Œæˆçš„ã€‚è™šæ‹Ÿæœºä¼šä¿è¯å­&lt;code&gt;&amp;lt;client&amp;gt;&lt;/code&gt;æ‰§è¡Œä¹‹å‰ï¼Œçˆ¶&lt;code&gt;&amp;lt;client&amp;gt;&lt;/code&gt;å·²ç»æ‰§è¡Œå®Œæ¯•ï¼ˆå¦‚æœä¸€ä¸ªç±»ä¸­æ—¢æ²¡æœ‰ç±»é™æ€å˜é‡èµ‹å€¼ï¼Œä¹Ÿæ²¡æœ‰é™æ€è¯­å¥å—ï¼Œé‚£è™šæ‹Ÿæœºå¯ä»¥ä¸ä¸ºå…¶ç”Ÿæˆ&lt;code&gt;&amp;lt;client&amp;gt;&lt;/code&gt;æ–¹æ³•ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ä»¥ä¸‹å‡ ç§æƒ…å½¢ä¸ä¼šæ‰§è¡Œç±»åˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œåªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å®šä¹‰å¯¹è±¡æ•°ç»„ï¼Œä¸ä¼šè§¦å‘è¯¥ç±»çš„åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å¸¸é‡åœ¨ç¼–è¯‘æœŸé—´ä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨å®šä¹‰å¸¸é‡çš„ç±»ï¼Œä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡æ‰€åœ¨ç±»çš„åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ç±»åè·å–Classå¯¹è±¡ï¼Œä¸ä¼šè§¦å‘åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡Class.forNameåŠ è½½æŒ‡å®šç±»æ—¶ï¼Œå¦‚æœæŒ‡å®šå‚æ•°initializeä¸ºfalseï¼ˆinitializeæ˜¯å‘Šè¯‰è™šæ‹Ÿæœºæ˜¯å¦è¦å¯¹è¯¥ç±»è¿›è¡Œåˆå§‹åŒ–ï¼‰ï¼Œä¹Ÿä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ClassLoaderé»˜è®¤çš„loadClassæ–¹æ³•ï¼Œä¸ä¼šè§¦å‘ç±»åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç±»åŠ è½½å™¨&#34;&gt;ç±»åŠ è½½å™¨&lt;/h3&gt;
&lt;p&gt;ç±»çš„åŠ è½½å¹¶æ²¡æœ‰å‘ç”Ÿåœ¨JVMä¸­ï¼Œè€Œæ˜¯ç”±åº”ç”¨ç¨‹åºæ¥ç¡®å®šå¦‚ä½•è·å–æ‰€éœ€è¦çš„ç±»ã€‚ä¸ºæ­¤JVMæä¾›äº†ä¸‰ç§ç±»åŠ è½½å™¨ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;1ã€å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½JAVA_HOME\libç›®å½•ä¸­çš„ï¼Œæˆ–é€šè¿‡-Xbootclasspathå‚æ•°æŒ‡å®šè·¯å¾„ä¸­çš„ï¼Œä¸”è¢«è™šæ‹Ÿæœºè®¤å¯çš„ç±»ï¼ˆæŒ‰æ–‡ä»¶åè¯†åˆ«ï¼Œå¦‚ï¼šrt.jarï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;2ã€æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½JAVA_HOME\lib\extç›®å½•ä¸­çš„ï¼Œæˆ–é€šè¿‡java.ext.dirsç³»ç»Ÿå˜é‡æŒ‡å®šè·¯å¾„ä¸­çš„ç±»åº“ã€‚&lt;/p&gt;
&lt;p&gt;3ã€åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½ç”¨æˆ·è·¯å¾„ï¼ˆclasspathï¼‰ä¸Šçš„ç±»åº“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŒäº²å§”æ´¾æ¨¡å‹&#34;&gt;åŒäº²å§”æ´¾æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;JVMé€šè¿‡åŒäº²å§”æ´¾æ¨¡å‹è¿›è¡Œç±»çš„åŠ è½½ï¼Œå½“ç„¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡é›†æˆjava.lang.ClassLoaderå®ç°è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301028.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;åŒäº²å§”æ´¾è¿‡ç¨‹ï¼šå½“ä¸€ä¸ªç±»æ”¶åˆ°ç±»åŠ è½½è¯·æ±‚æ—¶ï¼Œå®ƒé¦–å…ˆä¸ä¼šå°è¯•è‡ªå·±å»åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯å°†è¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»å»å®Œæˆï¼Œæ¯ä¸€å±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤æ“ä½œï¼Œå› æ­¤æ‰€æœ‰çš„ç±»åŠ è½½è¯·æ±‚éƒ½åº”è¯¥ä¼šä¼ é€åˆ°å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ï¼Œåªæœ‰å½“çˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½æ­¤ç±»æ—¶ï¼ˆåœ¨å®ƒçš„åŠ è½½è·¯å¾„ä¸‹æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€åŠ è½½çš„Classï¼‰ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚&lt;/p&gt;
&lt;p&gt;åŒäº²å§”æ´¾è§£å†³äº†javaåŸºç¡€ç±»ç»Ÿä¸€åŠ è½½çš„é—®é¢˜ï¼Œä½†æŸäº›æƒ…å†µä¸‹çˆ¶ç±»åŠ è½½å™¨éœ€è¦å§”æ‰˜å­ç±»åŠ è½½å™¨å»åŠ è½½Classæ–‡ä»¶ï¼Œä¾‹å¦‚SPIï¼ˆService Provider Interfaceï¼‰ä»£ç ï¼ˆspiæ˜¯ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶ï¼šå³ä¸ºæŸä¸ªæ¥å£å¯»æ‰¾æœåŠ¡å®ç°çš„æœºåˆ¶ã€‚ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä»¥jdbcä¸ºä¾‹è°ˆåŒäº²å§”æ´¾æ¨¡å‹çš„ç ´å&#34;&gt;ä»¥JDBCä¸ºä¾‹è°ˆåŒäº²å§”æ´¾æ¨¡å‹çš„ç ´å&lt;/h3&gt;
&lt;p&gt;Javaæœ¬èº«æœ‰ä¸€å¥—èµ„æºç®¡ç†æœåŠ¡JNDIï¼ˆJava Naming and Directory Interfaceï¼Œæ ¹æ®åç§°å¯ä»¥åœ¨å…¶ä¸­æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•æˆ–è€…å…¶ä»–å‚æ•°ï¼‰ï¼Œå…¶æ”¾ç½®äºrt.jarä¸­ï¼Œç”±å¯åŠ¨ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥æ•°æ®åº“ç®¡ç†JDBCä¸ºä¾‹ï¼Œjavaç»™æ•°æ®åº“æ“ä½œæä¾›äº†ä¸€ä¸ªDriverï¼ˆjava.sql.Driverï¼‰æ¥å£ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªDriverManagerï¼ˆjava.sql.DriverManagerï¼‰æ¥ç®¡ç†Driverçš„å…·ä½“å®ç°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä¸ç ´ååŒäº²å§”æ´¾æ¨¡å‹ä¸ä½¿ç”¨jdni&#34;&gt;ä¸ç ´ååŒäº²å§”æ´¾æ¨¡å‹ï¼ˆä¸ä½¿ç”¨JDNIï¼‰&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;// åŠ è½½æ•°æ®åº“é©±åŠ¨
Class.forName(&amp;quot;com.mysql.jdbc.Driver&amp;quot;);
// è¿æ¥åˆ°æ•°æ®åº“ä¸Šå»
Connection connection = DriverManager.getConnection(&amp;quot;jdbc:mysql://localhost:3306/db?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;allowMultiQueries=true&amp;amp;serverTimezone=Asia/Shanghai&amp;quot;,&amp;quot;root&amp;quot;,&amp;quot;root&amp;quot;);

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Class.forName()è§¦å‘äº†mysqlé©±åŠ¨ç±»çš„åŠ è½½ï¼Œé€šè¿‡æºç å¯ä»¥å‘ç°ï¼Œmysqlçš„é©±åŠ¨ç±»å·²ç»åœ¨é™æ€å—ä¸­è¢«æ³¨å†Œåˆ°äº†DriverManagerä¸­ï¼Œæ‰€ä»¥åç»­ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥å»ºç«‹è¿æ¥ã€‚å…¶æ ¸å¿ƒå®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public class Driver extends NonRegisteringDriver implements java.sql.Driver {
    public Driver() throws SQLException {
    }

    static {
        try {
            DriverManager.registerDriver(new Driver());
        } catch (SQLException var1) {
            throw new RuntimeException(&amp;quot;Can&#39;t register driver!&amp;quot;);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;public static synchronized void registerDriver(java.sql.Driver driver,
        DriverAction da)
    throws SQLException {

    /* Register the driver if it has not already been added to our list */
    if(driver != null) {
        registeredDrivers.addIfAbsent(new DriverInfo(driver, da));
    } else {
        // This is for compatibility with the original DriverManager
        throw new NullPointerException();
    }

    println(&amp;quot;registerDriver: &amp;quot; + driver);

}

&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;ç ´ååŒäº²å§”æ´¾æ¨¡å‹ä½¿ç”¨jdni&#34;&gt;ç ´ååŒäº²å§”æ´¾æ¨¡å‹ï¼ˆä½¿ç”¨JDNIï¼‰&lt;/h4&gt;
&lt;p&gt;JDBC4.0ä»¥åï¼Œå¼€å§‹æ”¯æŒspiæ³¨å†ŒDriverï¼Œå…·ä½“åšæ³•ä¾¿æ˜¯åœ¨mysqlçš„jarä¸­çš„META-INF/services/java.sql.Driveræ–‡ä»¶ä¸­æŒ‡æ˜å½“å‰çš„Driverï¼Œç„¶åé€šè¿‡ä¸‹åˆ—æ–¹å¼å³å¯ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è¿æ¥åˆ°æ•°æ®åº“ä¸Šå»
Connection connection = DriverManager.getConnection(&amp;quot;jdbc:mysql://localhost:3306/db?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;allowMultiQueries=true&amp;amp;serverTimezone=Asia/Shanghai&amp;quot;,&amp;quot;root&amp;quot;,&amp;quot;root&amp;quot;);

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ­¤å¤„ç›¸æ¯”äºä¸ç ´ååŒäº²å§”æ´¾æ¨¡å‹ï¼Œå°‘äº†ä¸€å¥Class.forName()ï¼Œå³åŠ è½½é©±åŠ¨ç±»çš„æ­¥éª¤ã€‚å…¶å¯¹åº”çš„Driveræ˜¯é…ç½®åœ¨META-INF/services/java.sql.Driveæ–‡ä»¶ä¸­çš„ï¼Œç”±æ­¤å¯ä»¥çŸ¥é“å…¶æ“ä½œä¸ºï¼šå…ˆä»é…ç½®æ–‡ä»¶ä¸­è¯»å–Driverï¼Œéšåå†è¿›è¡ŒåŠ è½½ï¼ˆä½¿ç”¨Class.forName()ï¼‰&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒClass.forName()åŠ è½½çš„æ˜¯è°ƒç”¨è€…çš„ClassLoaderï¼Œè¿™ä¸ªè°ƒç”¨è€…DriverManageræ˜¯åœ¨rt.jarä¸­ï¼ŒClassLoaderæ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œè€Œcom.mysql.cj.jdbc.Driverå¹¶æ²¡æœ‰ä½äº&amp;lt;JAVA_HOME&amp;gt;/libä¸‹ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯æ— æ³•ç›´æ¥åŠ è½½åˆ°mysqlçš„è¿™ä¸ªç±»çš„ã€‚è¿™è¾¹æ˜¯åŒäº²å§”æ´¾çš„å±€é™æ€§ï¼Œçˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½å­ç±»åŠ è½½å™¨è·¯å¾„ä¸­çš„ç±»ï¼ˆçˆ¶å¯¹å­é€æ˜ï¼Œå­å¯¹çˆ¶ä¸é€æ˜ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©çˆ¶ç±»åŠ è½½å™¨åŠ è½½å­ç±»åŠ è½½å™¨è·¯å¾„ä¸­çš„ç±»ï¼Œå¯ä»¥é€šè¿‡çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨å»åŠ è½½ç¬¬ä¸‰æ–¹jaråŒ…ä¸­çš„Driverï¼Œè¿™ä¾¿æ‰“ç ´äº†åŒäº²å§”æ´¾æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥DriverManagerä¸ºä¾‹ï¼Œå½“è°ƒç”¨å…¶getConnection()æ–¹æ³•æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œå™¨é™æ€å—ä¸­çš„åˆå§‹åŒ–ä»£ç ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/**
 * Load the initial JDBC drivers by checking the System property
 * jdbc.properties and then use the {@code ServiceLoader} mechanism
 */
static {
    loadInitialDrivers();
    println(&amp;quot;JDBC DriverManager initialized&amp;quot;);
}

&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;AccessController.doPrivileged(new PrivilegedAction&amp;lt;Void&amp;gt;() {
    public Void run() {
        // å„ä¸ªsqlå‚å•†åœ¨è‡ªå·±çš„jaråŒ…ä¸­é€šè¿‡spiæ³¨å†Œçš„é©±åŠ¨
        ServiceLoader&amp;lt;Driver&amp;gt; loadedDrivers = ServiceLoader.load(Driver.class);
        Iterator&amp;lt;Driver&amp;gt; driversIterator = loadedDrivers.iterator();

        /* Load these drivers, so that they can be instantiated.
         * It may be the case that the driver class may not be there
         * i.e. there may be a packaged driver with the service class
         * as implementation of java.sql.Driver but the actual class
         * may be missing. In that case a java.util.ServiceConfigurationError
         * will be thrown at runtime by the VM trying to locate
         * and load the service.
         *
         * Adding a try catch block to catch those runtime errors
         * if driver not available in classpath but it&#39;s
         * packaged as service and that service is there in classpath.
         */
        try{
            while(driversIterator.hasNext()) {
                driversIterator.next();
            }
        } catch(Throwable t) {
        // Do nothing
        }
        return null;
    }
});

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ServiceLoader.load()ä¾¿æ˜¯æ‹¿åˆ°çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨ï¼Œå¹¶æ„é€ äº†ä¸€ä¸ªServiceLoaderè¿›è¡Œè¿”å›ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static &amp;lt;S&amp;gt; ServiceLoader&amp;lt;S&amp;gt; load(Class&amp;lt;S&amp;gt; service) {
    ClassLoader cl = Thread.currentThread().getContextClassLoader();
    return ServiceLoader.load(service, cl);
}

public static &amp;lt;S&amp;gt; ServiceLoader&amp;lt;S&amp;gt; load(Class&amp;lt;S&amp;gt; service,
                                        ClassLoader loader)
{
    return new ServiceLoader&amp;lt;&amp;gt;(service, loader);
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;DriverManagerä¸­çš„doPrivileged()ä¸­è¿˜æœ‰ä¸€å¥driversIterator.next()ï¼Œå…¶ä¸­å®ç°äº†ç±»åŠ è½½è¿‡ç¨‹ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;private S nextService() {
    if (!hasNextService())
        throw new NoSuchElementException();
    String cn = nextName;
    nextName = null;
    Class&amp;lt;?&amp;gt; c = null;
    try {
        // æ­¤å¤„çš„cnä¾¿æ˜¯ä¾¿æ˜¯å‚å•†åœ¨META-INF/services/java.sql.Driveæ–‡ä»¶ä¸­é…ç½®çš„å…¨é™å®šé©±åŠ¨ç±»å
        // loaderåˆ™æ˜¯ä¸Šæ–‡ä¸­ServiceLoader.load()è¿”å›çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨ã€‚
        c = Class.forName(cn, false, loader);
    } catch (ClassNotFoundException x) {
        fail(service,
             &amp;quot;Provider &amp;quot; + cn + &amp;quot; not found&amp;quot;);
    }
    if (!service.isAssignableFrom(c)) {
        fail(service,
             &amp;quot;Provider &amp;quot; + cn  + &amp;quot; not a subtype&amp;quot;);
    }
    try {
        S p = service.cast(c.newInstance());
        providers.put(cn, p);
        return p;
    } catch (Throwable x) {
        fail(service,
             &amp;quot;Provider &amp;quot; + cn + &amp;quot; could not be instantiated&amp;quot;,
             x);
    }
    throw new Error();          // This cannot happen
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;hotspot-jvmè™šæ‹Ÿæœºå¯¹è±¡æ¢ç©¶&#34;&gt;Hotspot JVMè™šæ‹Ÿæœºå¯¹è±¡æ¢ç©¶&lt;/h2&gt;
&lt;h3 id=&#34;å¯¹è±¡çš„åˆ›å»ºä»¥æ™®é€šjavaå¯¹è±¡newæŒ‡ä»¤ä¸ºä¾‹&#34;&gt;å¯¹è±¡çš„åˆ›å»ºï¼ˆä»¥æ™®é€šJavaå¯¹è±¡newæŒ‡ä»¤ä¸ºä¾‹ï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆä¼šå»å¸¸é‡æ± ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¯¥å¼•ç”¨æ‰€ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ï¼Œè§£æå’Œåˆå§‹åŒ–è¿‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å…ˆæ‰§è¡Œç±»åŠ è½½ã€‚&lt;/li&gt;
&lt;li&gt;å½“ç±»åŠ è½½æ£€æŸ¥é€šè¿‡ä¹‹åï¼Œè™šæ‹Ÿæœºå°†ä¼šä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ï¼ˆå¯¹è±¡æ‰€éœ€çš„å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆä¹‹åå°±å·²ç»ç¡®è®¤äº†ï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´å°±æ˜¯åœ¨Javaå †ä¸Šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ã€‚ä¸€èˆ¬æœ‰ä¸¤ç§åˆ†é…æ–¹å¼ï¼Œæ ¹æ®å†…å­˜è§„æ•´ç¨‹åº¦åˆ†ä¸ºï¼šæŒ‡é’ˆç¢°æ’ï¼ˆè§„æ•´ï¼‰ä»¥åŠç©ºé—²åˆ—è¡¨ï¼ˆä¸è§„æ•´ï¼‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹å¹¶å‘æƒ…å†µä¸‹å¯¹è±¡å†…å­˜åˆ†é…å†²çªè§£å†³æ–¹æ¡ˆæœ‰ï¼šä¸€æ˜¯åŒæ­¥å¤„ç†ï¼ŒäºŒæ˜¯ä½¿ç”¨æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼ˆThread Local Allocation Bufferï¼ŒTLABï¼‰ï¼ˆè™šæ‹Ÿæœºæ˜¯å¦ä½¿ç”¨æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²å¯é€šè¿‡-XX:+/-UseTLABå‚æ•°æ¥è®¾å®šï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å†…å­˜åˆ†é…å®Œæ¯•ä¹‹åï¼Œè™šæ‹Ÿæœºä¼šå°†å¯¹åº”çš„å†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ã€‚æ¥ç€ä¼šå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®ï¼Œä¾‹å¦‚æ­¤å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ï¼Œå¦‚ä½•æŸ¥æ‰¾ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¯¹è±¡çš„å“ˆå¸Œç ï¼Œå¯¹è±¡çš„GCåˆ†ä»£å¹´é¾„ç­‰ç­‰ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ”¾åœ¨äº†å¯¹è±¡å¤´ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå®ŒnewæŒ‡ä»¤ä¹‹åè¿˜éœ€è¦æ‰§è¡Œ&lt;code&gt;&amp;lt;init&amp;gt;&lt;/code&gt;æ–¹æ³•ï¼ŒæŠŠå¯¹è±¡æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—æ˜¯å®Œå…¨åˆ›å»ºå¥½äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¯¹è±¡çš„å†…å­˜å¸ƒå±€&#34;&gt;å¯¹è±¡çš„å†…å­˜å¸ƒå±€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å¸ƒå±€å¯ä»¥åˆ†ä¸ºä¸‰å—åŒºåŸŸï¼šå¯¹è±¡å¤´ï¼ˆHeaderï¼‰ï¼Œå®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰ä»¥åŠå¯¹é½å¡«å……ï¼ˆPaddingï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡å¤´ï¼ˆHeaderï¼‰ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼šç¬¬ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼ˆå¦‚å“ˆå¸Œç ï¼ˆHashCodeï¼‰ï¼ŒGCåˆ†ä»£å¹´é¾„ï¼Œé”çŠ¶æ€æ ‡å¿—ï¼Œçº¿ç¨‹æŒæœ‰çš„é”ï¼Œåå‘çº¿ç¨‹IDï¼Œåå‘æ—¶é—´æˆ³ç­‰ï¼Œè¿™éƒ¨åˆ†æ•°æ®é•¿åº¦åœ¨32ä½æˆ–è€…64ä½çš„è™šæ‹Ÿæœºä¸­åˆ†åˆ«ä¸º32bitä»¥åŠ64bitï¼Œå®˜æ–¹ç§°ä¹‹ä¸ºâ€œMark Wordâ€ï¼‰ï¼›ç¬¬äºŒéƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¯¥å¯¹è±¡å±äºå“ªä¸ªç±»çš„å®ä¾‹ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæœºå®ç°éƒ½éœ€è¦åœ¨å¯¹è±¡æ•°æ®ä¸Šä¿ç•™ç±»å‹æŒ‡é’ˆï¼Œå³æŸ¥æ‰¾å¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯å¹¶ä¸ä¸€å®šè¦ç»è¿‡å¯¹è±¡æœ¬èº«ï¼‰ï¼Œå¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªJavaæ•°ç»„ï¼Œé‚£ä¹ˆå¯¹è±¡å¤´è¿˜éœ€è¦è®°å½•è¯¥æ•°ç»„é•¿åº¦ï¼Œå› ä¸ºæ™®é€šçš„Javaå¯¹è±¡å¯ä»¥é€šè¿‡å…ƒæ•°æ®ä¿¡æ¯ç¡®è®¤å¯¹è±¡å¤§å°ï¼Œè€Œæ•°ç»„å´ä¸è¡Œã€‚&lt;/li&gt;
&lt;li&gt;å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰å­˜å‚¨ç€å¯¹è±¡çœŸæ­£æœ‰æ•ˆçš„ä¿¡æ¯ï¼Œå³å„ç§ç±»å‹çš„å­—æ®µï¼Œæ— è®ºæ˜¯ç»§æ‰¿çˆ¶ç±»è¿˜æ˜¯å­ç±»è‡ªå®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹é½å¡«å……ï¼ˆPaddingï¼‰ä¸æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œä¹Ÿæ²¡æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œä»…ä»…èµ·åˆ°å ä½ç¬¦çš„ä½œç”¨ï¼Œä¿è¯å¯¹è±¡å¤§å°æ˜¯æŸä¸ªå­—èŠ‚çš„æ•´æ•°å€ï¼ˆHotSpot VM çš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»ä¸º8å­—èŠ‚çš„æ•´æ•°å€ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¯¹è±¡çš„è®¿é—®å®šä½&#34;&gt;å¯¹è±¡çš„è®¿é—®å®šä½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å»ºç«‹å¯¹è±¡çš„ç›®çš„æ˜¯ä¸ºäº†ä½¿ç”¨è¯¥å¯¹è±¡ï¼ŒJavaç¨‹åºæ˜¯é€šè¿‡æ ˆä¸Šçš„referenceæŒ‡é’ˆæ¥æ“ä½œå †ä¸Šçš„å…·ä½“å¯¹è±¡çš„ã€‚&lt;/li&gt;
&lt;li&gt;ç›®å‰ä¸»æµçš„è®¿é—®æ–¹å¼æœ‰å¥æŸ„å’Œç›´æ¥æŒ‡é’ˆä¸¤ç§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¥æŸ„è®¿é—®å®šä½&#34;&gt;å¥æŸ„è®¿é—®å®šä½&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å¥æŸ„çš„è¯ï¼ŒJavaå †å°†ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreferenceä¸­å­˜æ”¾çš„ä¹Ÿå°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼ˆå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®å’Œç±»å‹æ•°æ®å„è‡ªçš„åœ°å€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¥æŸ„çš„ä¼˜åŠ¿åœ¨äºå…¶ç¨³å®šæ€§æ›´é«˜ï¼Œå¦‚æœå¯¹è±¡é¢‘ç¹çš„å‘ç”Ÿç§»åŠ¨ï¼ˆGCæ“ä½œæ—¶ç§»åŠ¨å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆåªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®çš„æŒ‡é’ˆï¼Œreferenceæœ¬èº«ä¸éœ€è¦æ”¹å˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301029.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;ç›´æ¥è®¿é—®å®šä½&#34;&gt;ç›´æ¥è®¿é—®å®šä½&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ç›´æ¥æŒ‡é’ˆï¼Œé‚£ä¹ˆreferenceå°†ç›´æ¥æŒ‡å‘å¯¹è±¡å¯¹åº”çš„åœ°å€ï¼ˆJavaå †å¸ƒå±€æ—¶éœ€è¦è€ƒè™‘å¦‚ä½•å­˜æ”¾è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥æŒ‡é’ˆçš„ä¼˜åŠ¿åœ¨äºå…¶é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå‡å°‘äº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ“ä½œã€‚å¦‚æœå¯¹è±¡è®¿é—®é¢‘ç¹ï¼Œé‚£ä¹ˆä½¿ç”¨ç›´æ¥è®¿é—®å°†ä¼šæé«˜ç›¸å½“ä¸é”™çš„æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301030.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
">javaä¸­å¼•ç”¨&IO&ç±»åŠ è½½&å¯¹è±¡åˆ›å»ºè¿‡ç¨‹</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/jvm-xiang-jie/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°JVMï¼ŒåŒ…æ‹¬jvmçº¿ç¨‹ï¼Œjvmè¿è¡Œæ—¶åŒºåŸŸï¼Œjvmåƒåœ¾å›æ”¶æœºåˆ¶--å›æ”¶ç®—æ³•ä»¥åŠåƒåœ¾å›æ”¶å™¨&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/mountains-139012_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;jvmæ¦‚è¿°&#34;&gt;JVMæ¦‚è¿°&lt;/h2&gt;
&lt;h3 id=&#34;åŸºæœ¬æ¦‚å¿µ&#34;&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;
&lt;p&gt;JVMæ˜¯è¿è¡Œjavaä»£ç çš„è™šæ‹Ÿè®¡ç®—æœºå¹³å°ï¼Œå®ƒè¿è¡Œäºè®¡ç®—æœºæ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼Œå¹¶ä¸ç›´æ¥ä¸ç¡¬ä»¶è¿›è¡Œäº¤äº’ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301019.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;è¿è¡Œè¿‡ç¨‹&#34;&gt;è¿è¡Œè¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;x.javaæºæ–‡ä»¶ï¼Œé€šè¿‡ç¼–è¯‘å™¨äº§ç”Ÿå¯¹åº”çš„&lt;/em&gt;.Classå­—èŠ‚ç æ–‡ä»¶ï¼Œä¹‹ååˆé€šè¿‡javaè™šæ‹Ÿæœºä¸­çš„è§£é‡Šå™¨ï¼Œç¼–è¯‘æˆç‰¹å®šæœºå™¨ä¸Šçš„æœºå™¨ç ã€‚&lt;/p&gt;
&lt;p&gt;æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Javaæºæ–‡ä»¶ ----&amp;gt; ç¼–è¯‘å™¨ ----&amp;gt; å­—èŠ‚ç æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å­—èŠ‚ç æ–‡ä»¶ ----&amp;gt; JVMè§£é‡Šå™¨ ----&amp;gt; æœºå™¨ç &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯ä¸€ç§å¹³å°çš„è§£é‡Šå™¨éƒ½æ˜¯ä¸åŒçš„ï¼Œä½†å…¶ä¾èµ–çš„è™šæ‹Ÿæœºæ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯javaè·¨å¹³å°è¿è¡Œçš„æ ¸å¿ƒåŸç†ã€‚&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿæœºå®ä¾‹éšç€ç¨‹åºçš„è¿è¡Œè€Œå¯åŠ¨ï¼Œç¨‹åºé€€å‡ºæˆ–å…³é—­åˆ™ä¼šä½¿å¯¹åº”çš„è™šæ‹Ÿæœºå®ä¾‹æ¶ˆäº¡ã€‚å¤šä¸ªç¨‹åºå¯åŠ¨ä¼šå­˜åœ¨å¤šä¸ªè™šæ‹Ÿæœºå®ä¾‹ï¼Œå„ä¸ªè™šæ‹Ÿæœºå®ä¾‹ä¹‹é—´äº’ä¸å¹²æ‰°ï¼Œæ•°æ®ç‹¬ç«‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;jvmçº¿ç¨‹&#34;&gt;JVMçº¿ç¨‹&lt;/h2&gt;
&lt;h3 id=&#34;çº¿ç¨‹&#34;&gt;çº¿ç¨‹&lt;/h3&gt;
&lt;p&gt;æ­¤å¤„æ‰€è¯´çš„çº¿ç¨‹ä¸ºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªçº¿ç¨‹å®ä½“ã€‚JVMå…è®¸ä¸€ä¸ªåº”ç”¨å¹¶å‘æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Hotspot JVMä¸­çš„javaçº¿ç¨‹ä¸æ“ä½œç³»ç»ŸåŸç”Ÿçº¿ç¨‹å­˜åœ¨ç›´æ¥çš„æ˜ å°„å…³ç³»ï¼šå½“javaçº¿ç¨‹åˆ›å»ºå®Œæ¯•åï¼Œä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ“ä½œç³»ç»ŸåŸç”Ÿçº¿ç¨‹ã€‚javaçº¿ç¨‹ç»“æŸï¼ŒåŸç”Ÿçº¿ç¨‹ä¹Ÿä¼šéšä¹‹è¢«å›æ”¶ï¼ˆåŸç”Ÿçº¿ç¨‹ç”±æ“ä½œç³»ç»Ÿè´Ÿè´£è°ƒåº¦ï¼Œå¦‚å°†å…¶åˆ†é…è‡³å¯ç”¨çš„CPUï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Hotspot JVM åå°è¿è¡Œçš„ç³»ç»Ÿçº¿ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301020.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;jvmå†…å­˜åŒºåŸŸ&#34;&gt;JVMå†…å­˜åŒºåŸŸ&lt;/h2&gt;
&lt;h3 id=&#34;å†…å­˜åŒºåŸŸå›¾&#34;&gt;å†…å­˜åŒºåŸŸå›¾&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301021.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ&#34;&gt;è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ&lt;/h3&gt;
&lt;p&gt;Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡Œjavaç¨‹åºæ—¶ï¼Œå®šä¹‰äº†è‹¥å¹²ç¨‹åºè¿è¡ŒæœŸé—´ä¼šä½¿ç”¨åˆ°çš„è¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼Œå…¶ä¸­çº¿ç¨‹å…±äº«åŒºåŸŸéšç€è™šæ‹Ÿæœºçš„å¯åŠ¨/å…³é—­è€Œåˆ›å»º/é”€æ¯ï¼Œçº¿ç¨‹ç§æœ‰åŒºåŸŸåˆ™ä¸ç”¨æˆ·çº¿ç¨‹ä¸€ä¸€å¯¹åº”ï¼Œä¼šéšç€ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨/å…³é—­è€Œåˆ›å»º/é”€æ¯ï¼ˆ Hotspot JVMä¸­ï¼Œç”¨æˆ·çº¿ç¨‹ä¼šä¸åŸç”Ÿçº¿ç¨‹å¯¹åº”ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿è¡Œæ—¶æ•°æ®åŒºåŸŸå›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301022.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;ç¨‹åºè®¡æ•°å™¨program-counter-register&#34;&gt;ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯ä¸€å—å†…å­˜å°ï¼Œçº¿ç¨‹ç§æœ‰ï¼Œä¸”ä¸ä¼šå‘ç”ŸOOMï¼ˆOutOfMemoryErrorï¼‰çš„åŒºåŸŸï¼ˆå› ä¸ºå®ƒåªæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨Javaè™šæ‹Ÿæœºæ¦‚å¿µæ¨¡å‹ä¸­ï¼ˆä»…ä»…æŒ‡æ¦‚å¿µæ¨¡å‹ï¼Œå„ç±»ä¸åŒçš„è™šæ‹Ÿæœºå¯èƒ½æœ‰æ›´é«˜æ•ˆçš„å¤„ç†æ–¹å¼ï¼‰ï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡ŒæŒ‡ä»¤çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è®¡æ•°å™¨æ¥å®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;Javaè™šæ‹Ÿæœºå¯ä»¥æ”¯æŒå¤šçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼ˆå¯å‚è€ƒã€ŠJava è¯­è¨€è§„èŒƒã€‹ç¬¬ 17 ç« ï¼‰ï¼Œæ˜¯é€šè¿‡è½®è½¬æ—¶é—´ç‰‡çš„æ–¹å¼è®©å¤„ç†å™¨æ¥æ‰§è¡Œçº¿ç¨‹çš„ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨ï¼ˆå¯¹äºå¤šæ ¸å¤„ç†å™¨æ¥è¯´æ˜¯æŒ‡ä¸€ä¸ªå†…æ ¸ï¼‰åªä¼šå¤„ç†ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æŒ‡ä»¤ï¼Œä¸ºäº†ä¿è¯çº¿ç¨‹åˆ‡æ¢èƒ½å¤Ÿå›åˆ°æ­£ç¡®çš„æ‰§è¡ŒæŒ‡ä»¤ï¼ŒJavaè™šæ‹Ÿæœºé’ˆå¯¹æ¯ä¸ªçº¿ç¨‹åˆ†é…äº†ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„çº¿ç¨‹ä¹‹é—´çš„è®¡æ•°å™¨äº’ä¸å¹²æ‰°ï¼Œç‹¬ç«‹å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•ä¸æ˜¯ nativeçš„ï¼ˆå³Javaæ–¹æ³•ï¼‰ï¼Œé‚£ç¨‹åºè®¡æ•°å™¨å°±ä¿å­˜ Java è™šæ‹Ÿæœºæ­£åœ¨æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼Œå¦‚æœè¯¥æ–¹æ³•æ˜¯ native çš„ï¼Œé‚£ç¨‹åºè®¡æ•°å™¨çš„å€¼æ˜¯ undefinedã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹åºè®¡æ•°å™¨çš„å®¹é‡è‡³å°‘åº”å½“èƒ½ä¿å­˜ä¸€ä¸ª returnAddress ç±»å‹çš„æ•°æ®æˆ–è€…ä¸€ä¸ªä¸å¹³å°ç›¸å…³çš„æœ¬åœ°æŒ‡é’ˆçš„å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;javaè™šæ‹Ÿæœºæ ˆjava-virtual-machine-stack&#34;&gt;Javaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Javaè™šæ‹Ÿæœºæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§(Stack Frame)ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§ä»è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬ç±»å‹(booleanã€byteã€charã€shortã€intã€floatã€longã€double)ã€å¯¹è±¡å¼•ç”¨(referenceç±»å‹ï¼Œå®ƒä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«)å’Œ returnAddress ç±»å‹(æŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€)ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦æ³¨æ„çš„æ˜¯64ä½çš„longä»¥åŠdoubleç±»å‹çš„æ•°æ®ä¼šå ç”¨ä¸¤ä¸ªå±€éƒ¨å˜é‡ç©ºé—´ï¼ˆSlotï¼‰ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ä¸€ä¸ªã€‚å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å°±å·²ç»å®Œæˆäº†åˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨å¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å·²ç»ç¡®è®¤äº†çš„ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šå»æ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚&lt;/li&gt;
&lt;li&gt;Javaè™šæ‹Ÿæœºæ ˆæœ‰å¯èƒ½å‘ç”Ÿä»¥ä¸‹ä¸¤ç§å¼‚å¸¸çŠ¶å†µï¼šå¦‚æœçº¿ç¨‹è¯·æ±‚åˆ†é…çš„æ ˆå®¹é‡ï¼ˆæ ˆæ·±åº¦ï¼‰è¶…è¿‡ Java è™šæ‹Ÿæœºæ ˆå…è®¸çš„æœ€å¤§å®¹é‡ï¼ˆæ·±åº¦ï¼‰æ—¶ï¼ŒJava è™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ ä¸ªStackOverflowErrorå¼‚å¸¸ï¼›å¦‚æœJava è™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼ˆç›®å‰å¤§éƒ¨åˆ†è™šæ‹Ÿæœºéƒ½æ”¯æŒåŠ¨æ€æ‰©å±•ï¼‰ï¼Œå¹¶ä¸”æ‰©å±•çš„åŠ¨ä½œå·²ç»å°è¯•è¿‡ï¼Œä½†æ˜¯ç›®å‰æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜å»å®Œæˆæ‰©å±•ï¼Œæˆ–è€…åœ¨å»ºç«‹æ–°çš„çº¿ç¨‹æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å»åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿæœºæ ˆï¼Œé‚£ Java è™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ª OutOfMemoryErrorå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æœ¬åœ°æ–¹æ³•æ ˆnative-method-stack&#34;&gt;æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æœ¬åœ°æ–¹æ³•æ ˆä¸Javaè™šæ‹Ÿæœºæ ˆæ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œä»–ä»¬çš„ä¸»è¦åŒºåˆ«æ˜¯Javaè™šæ‹Ÿæœºæ ˆæ˜¯æœåŠ¡äºJavaæ–¹æ³•ï¼ˆå­—èŠ‚ç ï¼‰çš„ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯æœåŠ¡äºNativeæ–¹æ³•çš„ã€‚&lt;/li&gt;
&lt;li&gt;ä¸Javaè™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œæœ¬åœ°æ–¹æ³•æ ˆåŒæ ·ä¼šå‡ºç°StackOverflowErrorå¼‚å¸¸å’ŒOutOfMemoryErrorå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;javaå †java-heap&#34;&gt;Javaå †ï¼ˆJava Heapï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œå †ï¼ˆHeapï¼‰æ˜¯å¯ä¾›å„æ¡çº¿ç¨‹å…±äº«çš„è¿è¡Œæ—¶å†…å­˜åŒºåŸŸï¼Œä¹Ÿæ˜¯ä¾›æ‰€æœ‰ç±»å®ä¾‹å’Œæ•°ç»„å¯¹è±¡åˆ†é…å†…å­˜çš„åŒºåŸŸï¼Œä¸€èˆ¬è€Œè¨€å †ï¼ˆHeapï¼‰å ç”¨çš„å†…å­˜ç©ºé—´ä¹Ÿæ˜¯æœ€å¤§çš„ã€‚&lt;/li&gt;
&lt;li&gt;Java å †åœ¨è™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™å°±è¢«åˆ›å»ºï¼Œå®ƒå­˜å‚¨äº†è¢«è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿï¼ˆAutomatic Storage Management Systemï¼Œä¹Ÿå³æ˜¯å¸¸è¯´çš„â€œGarbage Collectorï¼ˆåƒåœ¾æ”¶é›†å™¨ï¼‰â€ï¼‰æ‰€ç®¡ç†çš„å„ç§å¯¹è±¡ï¼Œè¿™äº›å—ç®¡ç†çš„å¯¹è±¡æ— éœ€ï¼Œä¹Ÿæ— æ³•æ˜¾å¼åœ°è¢«é”€æ¯ã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä¹Ÿç§°Javaå †ä¸ºGCå †ï¼ˆGarbage Collected Heapï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå®é™…æ‰€éœ€çš„å †è¶…è¿‡äº†è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿèƒ½æä¾›çš„æœ€å¤§å®¹é‡ï¼ˆæˆ–è€…è¯´å †ä¸­æ²¡æœ‰å†…å­˜æ¥å®Œæˆå®ä¾‹åˆ†é…ï¼Œä¸”æ— æ³•æ‰©å±•ï¼‰ï¼Œé‚£ Java è™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ª OutOfMemoryErrorå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ–¹æ³•åŒºmethod-area&#34;&gt;æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œæ–¹æ³•åŒºï¼ˆMethod Areaï¼‰æ˜¯å¯ä¾›å„æ¡çº¿ç¨‹å…±äº«çš„è¿è¡Œæ—¶å†…å­˜åŒºåŸŸã€‚&lt;/li&gt;
&lt;li&gt;å®ƒå­˜å‚¨äº†æ¯ä¸€ä¸ªç±»çš„ç»“æ„ä¿¡æ¯ï¼Œä¾‹å¦‚è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰ã€å­—æ®µå’Œæ–¹æ³•æ•°æ®ã€æ„é€ å‡½æ•°å’Œæ™®é€šæ–¹æ³•çš„å­—èŠ‚ç å†…å®¹ã€è¿˜åŒ…æ‹¬ä¸€äº›åœ¨ç±»ã€å®ä¾‹ã€æ¥å£åˆå§‹åŒ–æ—¶ç”¨åˆ°çš„ç‰¹æ®Šæ–¹æ³•ï¼ˆå³å­˜å‚¨ç€å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ–¹æ³•åŒºçš„å†…å­˜ç©ºé—´ä¸èƒ½æ»¡è¶³å†…å­˜åˆ†é…è¯·æ±‚ï¼Œé‚£ Java è™šæ‹Ÿæœºå°†æŠ›å‡ºä¸€ä¸ª OutOfMemoryErrorå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è¿è¡Œæ—¶å¸¸é‡æ± runtime-constant-pool&#34;&gt;è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰çš„ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒæ˜¯æ¯ä¸€ä¸ªç±»æˆ–æ¥å£çš„å¸¸é‡æ± ï¼ˆConstant_Poolï¼‰çš„è¿è¡Œæ—¶è¡¨ç¤ºå½¢å¼ï¼Œå®ƒåŒ…æ‹¬äº†è‹¥å¹²ç§ä¸åŒçš„å¸¸é‡ï¼šä»ç¼–è¯‘æœŸå¯çŸ¥çš„æ•°å€¼å­—é¢é‡åˆ°å¿…é¡»è¿è¡ŒæœŸè§£æåæ‰èƒ½è·å¾—çš„æ–¹æ³•æˆ–å­—æ®µå¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé™¤äº†ä¿å­˜Classæ–‡ä»¶ä¸­æè¿°çš„ç¬¦å·å¼•ç”¨å¤–ï¼Œè¿˜ä¼šæŠŠç¿»è¯‘è¿‡æ¥çš„ç›´æ¥å¼•ç”¨ä¹Ÿä¿å­˜åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œæ—¶å¸¸é‡æ± ç›¸å¯¹äºClassæ–‡ä»¶å¸¸é‡æ± çš„å¦ä¸€ä¸ªç‰¹å¾æ˜¯å…·å¤‡åŠ¨æ€æ€§ï¼Œå³è¿è¡ŒæœŸé—´ä¹Ÿå¯å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œæ¯”å¦‚String.intern()æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;å½“åˆ›å»ºç±»æˆ–æ¥å£çš„æ—¶å€™ï¼Œå¦‚æœæ„é€ è¿è¡Œæ—¶å¸¸é‡æ± æ‰€éœ€è¦çš„å†…å­˜ç©ºé—´è¶…è¿‡äº†æ–¹æ³•åŒºæ‰€èƒ½æä¾›çš„æœ€å¤§å€¼ï¼Œé‚£ Java è™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ª OutOfMemoryError å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç›´æ¥å†…å­˜direct-memory&#34;&gt;ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç›´æ¥å†…å­˜å¹¶ä¸å±äºJavaè™šæ‹Ÿæœºè¿è¡Œæ—¶å†…å­˜åŒºåŸŸï¼Œä¹Ÿä¸æ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¿™é‡Œæå‡ºæ¥çš„ä¸»è¦åŸå› æ˜¯å› ä¸ºJavaåœ¨1.4ç‰ˆæœ¬å¼•å…¥äº†NIOç±»ï¼Œæ˜¯ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰å’Œç¼“å­˜åŒºï¼ˆBufferï¼‰çš„IOæ“ä½œï¼Œå®ƒå¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨Javaå †ä¸­çš„DirectByteBufferå¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šè¿‡å‡å°‘Javaå †å’ŒNativeå †æ¥å›å¤åˆ¶æ•°æ®çš„æ“ä½œï¼Œä»è€Œæé«˜ä¸€äº›æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å› ä¸ºè¿™å—å†…å­˜ä¹Ÿæ˜¯å®é™…å­˜åœ¨çš„ï¼Œæ‰€ä»¥å—ç¡¬ä»¶æ€»å†…å­˜å½±å“ï¼Œå¦‚æœéœ€è¦å¯¹è™šæ‹Ÿæœºå†…å­˜è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œéœ€è¦è€ƒè™‘è™šæ‹Ÿæœºå†…å­˜åŠ ç›´æ¥å†…å­˜è¶…è¿‡ç‰©ç†å†…å­˜é™åˆ¶æ‰€å¼•èµ·çš„ OutOfMemoryErrorå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;jvmè¿è¡Œæ—¶å†…å­˜&#34;&gt;JVMè¿è¡Œæ—¶å†…å­˜&lt;/h3&gt;
&lt;h4 id=&#34;åˆ†ä»£&#34;&gt;åˆ†ä»£&lt;/h4&gt;
&lt;p&gt;Javaå †ä»GCè§’åº¦è¿˜å¯ä»¥ç»†åˆ†ä¸ºæ–°ç”Ÿä»£ï¼ˆEdenåŒºï¼ŒFrom SurvivoråŒºï¼ŒTo SurvivoråŒºï¼‰ï¼Œè€å¹´ä»£ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301023.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;æ–°ç”Ÿä»£&#34;&gt;æ–°ç”Ÿä»£&lt;/h4&gt;
&lt;p&gt;ç”¨äºå­˜å‚¨åˆåˆ›å¯¹è±¡ï¼Œä¸€èˆ¬å æ®å †å†…å­˜1/3ã€‚å¯¹è±¡çš„åˆ›å»ºé¢‘ç¹ä¸”æ‚å¤šï¼Œæ‰€ä»¥æ­¤åŒºåŸŸä¼šç»å¸¸è§¦å‘MinorGCè¿›è¡Œåƒåœ¾å›æ”¶ã€‚&lt;/p&gt;
&lt;h5 id=&#34;æ–°ç”Ÿä»£ç»†åˆ†åŒºåŸŸ&#34;&gt;æ–°ç”Ÿä»£ç»†åˆ†åŒºåŸŸ&lt;/h5&gt;
&lt;p&gt;EdenåŒºï¼šJavaæ–°å¯¹è±¡çš„å‡ºç”Ÿåœ°ï¼ˆå¦‚æœæ–°åˆ›å»ºçš„å¯¹è±¡å ç”¨å†…å­˜è¿‡å¤§ï¼Œå°†ç›´æ¥è¢«åˆ†é…è‡³è€å¹´ä»£ï¼‰ï¼Œå½“Edenå†…å­˜ä¸è¶³æ—¶ï¼Œå°†è§¦å‘ä¸€æ¬¡MinorGCï¼Œå¯¹å…¶è¿›è¡Œåƒåœ¾å›æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;From SurvivoråŒºï¼šä¸Šä¸€æ¬¡GCçš„å¹¸å­˜è€…å­˜æ”¾åœ¨æ­¤åŒºåŸŸï¼Œå°†ä½œä¸ºè¿™ä¸€æ¬¡GCçš„æ‰«æå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;To SurvivoråŒºï¼šç»å†ä¸€æ¬¡MinorGCè¿‡ç¨‹çš„å¹¸å­˜è€…ã€‚&lt;/p&gt;
&lt;h5 id=&#34;æ–°ç”Ÿä»£gcè¿‡ç¨‹å¤åˆ¶ç®—æ³•&#34;&gt;æ–°ç”Ÿä»£GCè¿‡ç¨‹ï¼ˆå¤åˆ¶ç®—æ³•ï¼‰&lt;/h5&gt;
&lt;p&gt;é¦–å…ˆå°†Edenå’ŒFrom SurvivoråŒºåŸŸä¸­å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°To SurvivoråŒºåŸŸï¼ˆFrom SurvivoråŒºå¦‚æœå­˜åœ¨å¯¹è±¡å¹´é¾„ä¸”å¤§äºé˜ˆå€¼ï¼Œåˆ™ç›´æ¥å¤åˆ¶åˆ°è€å¹´ä»£ï¼‰ï¼ŒåŒæ—¶å°†è¿™äº›å¯¹è±¡çš„å¹´é¾„+1ï¼ˆå¦‚æœTo SurvivoråŒºè¢«å¡«æ»¡äº†ï¼Œå‰©ä½™çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ°è€å¹´ä»£ä¸­ï¼‰ã€‚éšåæ¸…ç©ºEdenå’ŒFrom SurvivoråŒºåŸŸä¸­çš„æ­»å¯¹è±¡ã€‚æœ€åï¼Œå°†From Survivorå’ŒTo Survivorè°ƒæ¢åå­—ï¼Œè¿™æ ·ï¼Œåœ¨ä¸‹ä¸€æ¬¡GCæ—¶ï¼ŒåŸTo Survivorå°†æˆä¸ºFrom Survivorã€‚&lt;/p&gt;
&lt;h4 id=&#34;è€å¹´ä»£&#34;&gt;è€å¹´ä»£&lt;/h4&gt;
&lt;p&gt;ä¸»è¦å­˜å‚¨åº”ç”¨ç¨‹åºä¸­ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å†…å­˜å¯¹è±¡ã€‚è¿›å…¥è€å¹´ä»£çš„å¯¹è±¡ä¸€èˆ¬éƒ½æ¯”è¾ƒç¨³å®šï¼Œæ‰€ä»¥ä¸ä¼šé¢‘ç¹åœ°æ‰§è¡ŒMajorGCã€‚&lt;/p&gt;
&lt;p&gt;MajorGCé‡‡ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•ï¼šé¦–å…ˆæ‰«æä¸€æ¬¡æ‰€æœ‰è€å¹´ä»£ï¼Œæ ‡è®°å‡ºå­˜æ´»çš„å¯¹è±¡ï¼Œç„¶åå›æ”¶æœªæ ‡è®°çš„å¯¹è±¡ã€‚æ­¤è¿‡ç¨‹è€—æ—¶è¾ƒé•¿ï¼Œä¸”ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ°¸ä¹…ä»£&#34;&gt;æ°¸ä¹…ä»£&lt;/h4&gt;
&lt;p&gt;å†…å­˜çš„æ°¸ä¹…ä¿å­˜åŒºåŸŸï¼Œä¸»è¦å­˜æ”¾Classä»¥åŠMetaï¼ˆå…ƒæ•°æ®ï¼‰ä¿¡æ¯ã€‚Classåœ¨è¢«åŠ è½½æ—¶ä¾¿æ”¾å…¥æ°¸ä¹…åŒºåŸŸï¼Œå®ƒè·Ÿå­˜æ”¾å®ä¾‹çš„åŒºåŸŸä¸åŒï¼ŒGCä¸ä¼šåœ¨ä¸»ç¨‹åºæ‰§è¡ŒæœŸé—´å¯¹æ°¸ä¹…åŒºåŸŸè¿›è¡Œæ¸…ç†ã€‚æ‰€ä»¥ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æ°¸ä¹…åŒºåŸŸéšç€åŠ è½½çš„Classå¢å¤šè€Œä¸æ–­è†¨èƒ€ï¼Œæœ€ç»ˆæŠ›å‡ºOOMå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;Java8ä¸­ï¼Œæ°¸ä¹…ä»£å·²ç»è¢«ç§»é™¤ï¼Œè¢«ä¸€ä¸ªç§°ä¸ºâ€œå…ƒæ•°æ®åŒºâ€ï¼ˆå…ƒç©ºé—´ï¼‰çš„åŒºåŸŸæ‰€æ›¿ä»£ã€‚å…ƒç©ºé—´çš„æœ¬è´¨ä¸æ°¸ä¹…ä»£ç±»ä¼¼ï¼Œå®ƒä»¬ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åƒåœ¾å›æ”¶ä¸ç®—æ³•&#34;&gt;åƒåœ¾å›æ”¶ä¸ç®—æ³•&lt;/h3&gt;
&lt;h4 id=&#34;gcç®—æ³•å›¾&#34;&gt;GCç®—æ³•å›¾&lt;/h4&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301024.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;åƒåœ¾ç¡®è®¤ç®—æ³•&#34;&gt;åƒåœ¾ç¡®è®¤ç®—æ³•&lt;/h4&gt;
&lt;p&gt;å¼•ç”¨è®¡æ•°æ³•ï¼šå¯¹è±¡è¢«å¼•ç”¨åˆ™+1ï¼Œå¦åˆ™-1ï¼Œä¸º0æ—¶å°†è¢«å›æ”¶ï¼ˆå­˜åœ¨å¾ªç¯å¼•ç”¨é—®é¢˜ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¯è¾¾æ€§åˆ†æï¼šä¸ºäº†é¿å…å¼•ç”¨è®¡æ•°æ³•ä¸­çš„å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œå¦‚ä»Šjavaä¸€èˆ¬é‡‡ç”¨å¯è¾¾æ€§åˆ†æï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„GC ROOTSï¼ˆVMæ ˆä¸­çš„å¼•ç”¨ï¼Œæ–¹æ³•åŒºä¸­çš„é™æ€å¼•ç”¨ï¼ŒJNIä¸­çš„å¼•ç”¨ç­‰ï¼‰ä½œä¸ºå¯¹è±¡çš„èµ·ç‚¹æœç´¢ã€‚å¦‚æœGC ROOTSå’Œä¸€ä¸ªå¯¹è±¡ä¹‹é—´æ²¡æœ‰å¯è¾¾è·¯å¾„ï¼Œåˆ™ç§°å…¶ä¸ºä¸å¯è¾¾ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸å¯è¾¾å¯¹è±¡ä¸ç­‰ä»·äºå¯å›æ”¶å¯¹è±¡ï¼Œä¸å¯è¾¾å¯¹è±¡å˜ä¸ºå¯å›æ”¶å¯¹è±¡æœ€å°‘éœ€è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼Œå¦‚æœä»ç„¶ä¸å¯è¾¾ï¼Œåˆ™ä¼šé¢ä¸´å›æ”¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åƒåœ¾æ”¶é›†ç®—æ³•&#34;&gt;åƒåœ¾æ”¶é›†ç®—æ³•&lt;/h4&gt;
&lt;h5 id=&#34;æ ‡è®°æ¸…é™¤ç®—æ³•mark-sweep&#34;&gt;æ ‡è®°æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰&lt;/h5&gt;
&lt;p&gt;æœ€åŸºç¡€çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œæ ‡è®°å’Œæ¸…é™¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå®¹æ˜“å‡ºç°å†…å­˜ç¢ç‰‡ï¼‰ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301025.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;å¤åˆ¶ç®—æ³•copying&#34;&gt;å¤åˆ¶ç®—æ³•ï¼ˆcopyingï¼‰&lt;/h5&gt;
&lt;p&gt;ä¸ºäº†è§£å†³Mark-Sweepç®—æ³•ä¸­å†…å­˜ç¢ç‰‡åŒ–çš„ç¼ºé™·è€Œè¢«æå‡ºçš„ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒæŒ‰å†…å­˜å®¹é‡å°†å†…å­˜åˆ’åˆ†ä¸ºç­‰å¤§å°çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—ï¼Œå½“è¿™ä¸€å—å†…å­˜æ»¡äº†ä¹‹åï¼Œä¾¿å°†å…¶ä¸­å­˜æ´»çš„å¯¹è±¡ç§»è‡³å¦ä¸€å—å†…å­˜ä¸Šå»ï¼ŒåŒæ—¶æŠŠå·²ä½¿ç”¨çš„å†…å­˜æ¸…ç†æ‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ç®—æ³•å®ç°ç®€å•ï¼Œå†…å­˜æ•ˆç‡é«˜ï¼Œä¸æ˜“äº§ç”Ÿç¢ç‰‡ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å¯ç”¨å†…å­˜è¢«å‹ç¼©åˆ°äº†åŸæ¥çš„ä¸€åŠï¼Œä¸”å½“å­˜æ´»å¯¹è±¡è¿‡å¤šæ—¶ï¼Œå…¶ç®—æ³•æ•ˆç‡åˆä¼šå¤§å¤§é™ä½ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301026.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;åˆ†ä»£æ”¶é›†ç®—æ³•&#34;&gt;åˆ†ä»£æ”¶é›†ç®—æ³•&lt;/h5&gt;
&lt;p&gt;æ­¤ç®—æ³•æ˜¯ç›®å‰å¤§éƒ¨åˆ†JVMæ‰€é‡‡ç”¨çš„æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ ¹æ®å¯¹è±¡å­˜æ´»çš„ä¸åŒç”Ÿå‘½å‘¨æœŸå°†å†…å­˜åˆ’åˆ†ä¸ºä¸åŒçš„åŸŸã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šå°†GCå †åˆ’åˆ†ä¸ºè€å¹´ä»£ï¼ˆTenured/Old Generationï¼‰å’Œæ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è€å¹´ä»£çš„ç‰¹ç‚¹æ˜¯æ¯æ¬¡éœ€è¦å›æ”¶çš„å¯¹è±¡å¾ˆå°‘ï¼Œæ–°ç”Ÿä»£åˆ™ä¸ä¹‹ç›¸åï¼Œå› æ­¤å¯ä»¥æ ¹æ®ä¸åŒçš„åŒºåŸŸé€‰æ‹©ä¸åŒçš„ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ–°ç”Ÿä»£ç”±äºéœ€è¦ç»å¸¸è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼ˆä¸€èˆ¬ä¼šå°†å…¶å†æ¬¡åˆ’åˆ†ä¸ºEdenï¼ŒFrom Survivorä»¥åŠTo Survivorä¸‰ä¸ªåŒºåŸŸï¼Œæ¯”ä¾‹ä¸º8:1:1ï¼ˆå®é™…è°ƒä¼˜éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡è°ƒæ•´ï¼‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è€å¹´ä»£åˆ™ä¸€èˆ¬é‡‡ç”¨æ ‡è®°å¤åˆ¶ç®—æ³•æˆ–è€…æ ‡è®°æ•´ç†ç®—æ³•ï¼Œå¯æ ¹æ®å…·ä½“åœºæ™¯æŒ‡å®šã€‚&lt;/p&gt;
&lt;h3 id=&#34;gcåƒåœ¾æ”¶é›†å™¨&#34;&gt;GCåƒåœ¾æ”¶é›†å™¨&lt;/h3&gt;
&lt;h4 id=&#34;serialåƒåœ¾æ”¶é›†å™¨å•çº¿ç¨‹å¤åˆ¶ç®—æ³•&#34;&gt;Serialåƒåœ¾æ”¶é›†å™¨ï¼ˆå•çº¿ç¨‹ï¼Œå¤åˆ¶ç®—æ³•ï¼‰&lt;/h4&gt;
&lt;p&gt;Serialæ˜¯æœ€åŸºæœ¬çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•ã€‚JDK1.3.1ä¹‹å‰ï¼Œå®ƒæ˜¯æ–°ç”Ÿä»£å”¯ä¸€çš„åƒåœ¾æ”¶é›†å™¨ã€‚&lt;/p&gt;
&lt;p&gt;Serialæ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œå®ƒä¸ä½†åªä¼šç”¨ä¸€ä¸ªCPUæˆ–ä¸€æ¡çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†å·¥ä½œï¼Œå¹¶ä¸”åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜è¦æš‚åœå…¶ä»–æ‰€æœ‰çº¿ç¨‹ï¼ˆstop the worldï¼‰ï¼Œç›´åˆ°åƒåœ¾æ”¶é›†ç»“æŸã€‚&lt;/p&gt;
&lt;p&gt;Serialåœ¨æ‰§è¡Œæ—¶è™½ç„¶ä¼šæš‚åœå…¶ä»–æ‰€æœ‰çº¿ç¨‹ï¼Œä½†å…¶ç®€å•é«˜æ•ˆï¼Œå¯¹äºé™å®šå•ä¸ªCPUçš„ç¯å¢ƒæ¥è¯´ï¼Œæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹åƒåœ¾æ”¶é›†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼ŒSerialä¾æ—§æ˜¯javaè™šæ‹Ÿæœºè¿è¡Œåœ¨Clientæ¨¡å¼ä¸‹æ–°ç”Ÿä»£çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;parnewåƒåœ¾æ”¶é›†å™¨serial-å¤šçº¿ç¨‹&#34;&gt;ParNewåƒåœ¾æ”¶é›†å™¨ï¼ˆserial + å¤šçº¿ç¨‹ï¼‰&lt;/h4&gt;
&lt;p&gt;ParNewå…¶å®æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œé™¤äº†å¤šçº¿ç¨‹ä¹‹å¤–ï¼Œå…¶ä½™ä¸Serialå®Œå…¨ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;ParNewé»˜è®¤å¼€å¯å’ŒCPUæ•°ç›®ç›¸åŒçš„çº¿ç¨‹æ•°ï¼Œå¯ä»¥é€šè¿‡-XX:ParallelGCThreadså‚æ•°æ¥é™åˆ¶åƒåœ¾æ”¶é›†å™¨çš„çº¿ç¨‹æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸è¾ƒäºSeriaè€Œè¨€ï¼ŒParNewæ˜¯javaè™šæ‹Ÿæœºè¿è¡Œåœ¨Serveræ¨¡å¼ä¸‹æ–°ç”Ÿä»£çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;parallel-scavengeåƒåœ¾æ”¶é›†å™¨å¤šçº¿ç¨‹å¤åˆ¶ç®—æ³•é«˜æ•ˆ&#34;&gt;Parallel Scavengeåƒåœ¾æ”¶é›†å™¨ï¼ˆå¤šçº¿ç¨‹å¤åˆ¶ç®—æ³•ï¼Œé«˜æ•ˆï¼‰&lt;/h4&gt;
&lt;p&gt;Parallel Scavenge æ˜¯ä¸€ä¸ªæ–°ç”Ÿä»£åƒåœ¾æ”¶é›†å™¨ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œä¸”ä¸ºå¤šçº¿ç¨‹ã€‚å…¶é‡ç‚¹å…³æ³¨çš„æ˜¯ç¨‹åºè¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ï¼ˆThoughputï¼ŒCPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/CPUæ€»æ¶ˆè€—æ—¶é—´ï¼Œå³ååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/ï¼ˆè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´ï¼‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é«˜ååé‡å¯ä»¥æœ€é«˜æ•ˆç‡çš„åˆ©ç”¨CPUæ—¶é—´ï¼Œå°½å¿«åœ°å®Œæˆç¨‹åºçš„è¿è¡Œä»»åŠ¡ï¼Œä¸»è¦é€‚ç”¨äºåœ¨åå°è¿ç®—ï¼Œè€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ä¹Ÿæ˜¯Parallel Scavengeä¸ParNewçš„ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h4 id=&#34;serial-oldåƒåœ¾æ”¶é›†å™¨å•çº¿ç¨‹æ ‡è®°æ•´ç†ç®—æ³•&#34;&gt;Serial Oldåƒåœ¾æ”¶é›†å™¨ï¼ˆå•çº¿ç¨‹ï¼Œæ ‡è®°æ•´ç†ç®—æ³•ï¼‰&lt;/h4&gt;
&lt;p&gt;Serial Oldæ˜¯Serialåƒåœ¾æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå®ƒåŒæ ·æ˜¯å•çº¿ç¨‹çš„ï¼Œä½¿ç”¨çš„ç®—æ³•ä¸ºæ ‡è®°æ•´ç†ã€‚Serial Oldæ˜¯javaè™šæ‹Ÿæœºè¿è¡Œåœ¨Clientæ¨¡å¼ä¸‹è€å¹´ä»£çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å…¶åœ¨Serveræ¨¡å¼ä¸‹ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼š&lt;/p&gt;
&lt;p&gt;1ã€åœ¨JDK1.5ä¹‹å‰ç‰ˆæœ¬ä¸æ–°ç”Ÿä»£çš„Parallel Scavengeæ”¶é›†å™¨æ­é…ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;2ã€ä½œä¸ºè€å¹´ä»£ä¸­CMSçš„åå¤‡åƒåœ¾æ”¶é›†å™¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;parallel-oldåƒåœ¾æ”¶é›†å™¨å¤šçº¿ç¨‹æ ‡è®°æ•´ç†ç®—æ³•&#34;&gt;Parallel Oldåƒåœ¾æ”¶é›†å™¨ï¼ˆå¤šçº¿ç¨‹ï¼Œæ ‡è®°æ•´ç†ç®—æ³•ï¼‰&lt;/h4&gt;
&lt;p&gt;Parallel Oldæ˜¯Parallel Scavengeåƒåœ¾æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå®ƒåŒæ ·æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä½¿ç”¨çš„ç®—æ³•ä¸ºæ ‡è®°æ•´ç†ï¼ˆJDK1.6ä¹‹åæ‰æä¾›ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;cmsåƒåœ¾æ”¶é›†å™¨å¤šçº¿ç¨‹æ ‡è®°æ¸…é™¤ç®—æ³•&#34;&gt;CMSåƒåœ¾æ”¶é›†å™¨ï¼ˆå¤šçº¿ç¨‹ï¼Œæ ‡è®°æ¸…é™¤ç®—æ³•ï¼‰&lt;/h4&gt;
&lt;p&gt;Concurrent Mark Sweepæ˜¯ä¸€ç§è€å¹´ä»£åƒåœ¾æ”¶é›†å™¨ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è·å–æœ€çŸ­åƒåœ¾å›æ”¶åœé¡¿æ—¶é—´ï¼ˆåœ¨äº¤äº’è¿‡ç¨‹ä¸­æé«˜ç”¨æˆ·ä½“éªŒï¼‰ï¼Œä½¿ç”¨çš„ç®—æ³•ä¸ºæ ‡è®°æ¸…é™¤ã€‚&lt;/p&gt;
&lt;p&gt;CMSæ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆå§‹æ ‡è®°ï¼šæ ‡è®°ä¸€ä¸‹GC ROOTSèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œéœ€è¦æš‚åœå·¥ä½œçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å¹¶å‘æ ‡è®°ï¼šè¿›è¡ŒGC ROOTSè·Ÿè¸ªçš„è¿‡ç¨‹ï¼Œå’Œç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œä¸éœ€è¦æš‚åœå·¥ä½œçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;é‡æ–°æ ‡è®°ï¼šä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´ï¼Œå› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°å½•ï¼Œéœ€è¦æš‚åœå·¥ä½œçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å¹¶å‘æ¸…é™¤ï¼šæ¸…é™¤GC ROOTSä¸å¯è¾¾å¯¹è±¡ï¼Œå’Œç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œä¸éœ€è¦æš‚åœå·¥ä½œçº¿ç¨‹ï¼Œç”±äºè€—æ—¶æœ€é•¿çš„å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤æ˜¯ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œçš„ï¼Œæ‰€ä»¥æ€»ä½“ä¸Šæ¥çœ‹ï¼ŒCMSæ”¶é›†è¿‡ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹æ˜¯å¹¶å‘æ‰§è¡Œçš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;g1åƒåœ¾æ”¶é›†å™¨å¤šçº¿ç¨‹æ ‡è®°æ•´ç†ç®—æ³•&#34;&gt;G1åƒåœ¾æ”¶é›†å™¨ï¼ˆå¤šçº¿ç¨‹ï¼Œæ ‡è®°æ•´ç†ç®—æ³•ï¼‰&lt;/h4&gt;
&lt;p&gt;Garbage firstæ˜¯ç›®å‰åƒåœ¾æ”¶é›†å™¨ç†è®ºå‘å±•çš„æœ€å‰æ²¿æˆæœï¼Œç›¸æ¯”äºCMSæ”¶é›†å™¨ï¼ŒG1æœ€çªå‡ºçš„ä¸¤ä¸ªæ”¹è¿›ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŸºäºæ ‡è®°æ•´ç†ç®—æ³•ï¼Œä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥éå¸¸ç²¾å‡†çš„æ§åˆ¶åœé¡¿æ—¶é—´ï¼Œåœ¨ä¸ç‰ºç‰²ååé‡çš„å‰æä¸‹ï¼Œå®ç°ä½åœé¡¿å›æ”¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;G1é¿å…å…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ï¼Œå®ƒæŠŠå †å†…å­˜åˆ’åˆ†ä¸ºå¤§å°å›ºå®šçš„å‡ ä¸ªç‹¬ç«‹åŒºåŸŸï¼Œå¹¶ä¸”è·Ÿè¸ªè¿™äº›åŒºåŸŸçš„åƒåœ¾æ”¶é›†è¿›åº¦ï¼ŒåŒæ—¶åœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆçº§åˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®æ‰€å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶åƒåœ¾æœ€å¤šçš„åŒºåŸŸã€‚&lt;/p&gt;
&lt;p&gt;åŒºåŸŸåˆ’åˆ†å’Œä¼˜å…ˆçº§åŒºåŸŸå›æ”¶æœºåˆ¶ï¼Œç¡®ä¿äº†G1å¯ä»¥åœ¨æœ‰é™çš„æ—¶é—´å†…è·å¾—æœ€é«˜çš„åƒåœ¾æ”¶é›†æ•ˆç‡ã€‚&lt;/p&gt;
">JVMè¯¦è§£</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java8-xin-te-xing-streamandcompletablefuture/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Java8æ–°ç‰¹æ€§ï¼Œä¸»è¦æ˜¯Streamå’ŒCompletableFutureçš„å¸¸ç”¨ä¾‹å­&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/mountain-477832_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;stream&#34;&gt;Stream&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;// è·å–æŸä¸ªå±æ€§çš„å’Œ
System.out.println(personPojos.stream().mapToInt(PersonPojo::getCount).sum());
// æœ€å¤§å€¼
System.out.println(personPojos.stream().mapToInt(PersonPojo::getCount).max());
// æœ€å°å€¼
System.out.println(personPojos.stream().mapToInt(PersonPojo::getCount).min());
// å¹³å‡å€¼
System.out.println(personPojos.stream().mapToInt(PersonPojo::getCount).average());

// è·å–æŸä¸ªå±æ€§å€¼æœ€å¤§çš„é›†åˆ
Optional&amp;lt;PersonPojo&amp;gt; couponConfigOptional = personPojos.stream().
        filter(Objects::nonNull).
        filter(personPojo -&amp;gt; StringUtils.isNotEmpty(personPojo.getEndTime())).
        max(Comparator.comparing(PersonPojo::getEndTime));
couponConfigOptional.ifPresent(personPojo -&amp;gt; System.out.println(JSONObject.toJSONString(personPojo)));


// ä»¥å¯¹è±¡çš„æŸä¸ªå±æ€§åˆ†ç»„
Map&amp;lt;String, List&amp;lt;PersonPojo&amp;gt;&amp;gt; resultMap = personPojos.stream().collect(Collectors.groupingBy(PersonPojo::getName));
System.out.println(JSONObject.toJSONString(resultMap));

// ä»¥å¯¹è±¡æŸä¸ªå±æ€§åˆ†ç»„ï¼ŒåŒæ—¶åªå–åˆ—è¡¨ä¸­çš„ç¬¬ä¸€æ¡æ•°æ®
Map&amp;lt;String, PersonPojo&amp;gt; resultMap = personPojos.stream().collect(Collectors.groupingBy(PersonPojo::getName,Collectors.collectingAndThen(Collectors.toList(), value-&amp;gt;value.get(0)))))));
System.out.println(JSONObject.toJSONString(resultMap));

// ä»¥å¯¹è±¡çš„æŸä¸ªå±æ€§åˆ†ç»„ï¼Œå¹¶åªæ±‡æ€»æŸä¸€ä¸ªå±æ€§å­—æ®µ
Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; map = personPojos.stream().collect(Collectors.groupingBy(PersonPojo::getId, Collectors.mapping(PersonPojo::getName, Collectors.toList())));
System.out.println(JSONObject.toJSONString(map));

// è¿‡æ»¤ä¸åŒ…å«æŸä¸ªå¯¹è±¡
List&amp;lt;PersonPojo&amp;gt; filters = personPojos.stream().filter(personPojo-&amp;gt;!personPojos.contains(personPojo)).collect(Collectors.toList());
System.out.println(JSONObject.toJSONString(filters));

// ç§»é™¤ä¸åœ¨æœ‰æ•ˆæœŸå†…çš„æ•°æ®
long currentTime = System.currentTimeMillis();
personPojos.removeIf(personPojo -&amp;gt; currentTime &amp;lt; personPojo.getStartTime().getTime() || currentTime &amp;gt; personPojo.getEndTime().getTime());

// è·å–æŸä¸ªå­—æ®µä½œä¸ºæ–°çš„list
List&amp;lt;String&amp;gt; names =personPojos.stream().map(PersonPojo::getName).collect(Collectors.toList());
System.out.println(JSONObject.toJSONString(names));

// è·å–æŸä¸ªå­—æ®µä½œä¸ºæ–°çš„listï¼Œå»é‡
List&amp;lt;String&amp;gt; distinctNames =personPojos.stream().map(PersonPojo::getName).distinct().collect(Collectors.toList());
System.out.println(JSONObject.toJSONString(distinctNames));

// åˆ¤æ–­å¯¹è±¡ç»„ä¸­æ˜¯å¦å­˜åœ¨åŒ…å«æŒ‡å®šå€¼çš„å¯¹è±¡
boolean match = personPojos.stream().anyMatch(personPojo -&amp;gt; &amp;quot;zhangsan&amp;quot;.equals(personPojo.getName()));
System.out.println(match);
// åˆ¤æ–­å¯¹è±¡ç»„æ˜¯å¦éƒ½æ˜¯åŒ…å«æŒ‡å®šå€¼çš„å¯¹è±¡
boolean match2 = personPojos.stream().allMatch(personPojo -&amp;gt; &amp;quot;zhangsan&amp;quot;.equals(personPojo.getName()));
System.out.println(match2);

//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€å‡åºæ’åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€));

//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€é™åºæ’åº æ³¨æ„ä¸¤ç§å†™æ³•
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed());//å…ˆä»¥å±æ€§ä¸€å‡åº,ç»“æœè¿›è¡Œå±æ€§ä¸€é™åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€,Comparator.reverseOrder()));//ä»¥å±æ€§ä¸€é™åº

//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€å‡åº å±æ€§äºŒå‡åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).thenComparing(ç±»::å±æ€§äºŒ));

//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€é™åº å±æ€§äºŒå‡åº æ³¨æ„ä¸¤ç§å†™æ³•
//å…ˆä»¥å±æ€§ä¸€å‡åº,å‡åºç»“æœè¿›è¡Œå±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒå‡åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed().thenComparing(ç±»::å±æ€§äºŒ));
//å…ˆä»¥å±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒå‡åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€,Comparator.reverseOrder()).thenComparing(ç±»::å±æ€§äºŒ));

//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€é™åº å±æ€§äºŒé™åº æ³¨æ„ä¸¤ç§å†™æ³•
//å…ˆä»¥å±æ€§ä¸€å‡åº,å‡åºç»“æœè¿›è¡Œå±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒé™åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed().thenComparing(ç±»::å±æ€§äºŒ,Comparator.reverseOrder()));
//å…ˆä»¥å±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒé™åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€,Comparator.reverseOrder()).thenComparing(ç±»::å±æ€§äºŒ,Comparator.reverseOrder()));

//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€å‡åº å±æ€§äºŒé™åº æ³¨æ„ä¸¤ç§å†™æ³•
//å…ˆä»¥å±æ€§ä¸€å‡åº,å‡åºç»“æœè¿›è¡Œå±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒå‡åº,ç»“æœè¿›è¡Œå±æ€§ä¸€é™åºå±æ€§äºŒé™åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed().thenComparing(ç±»::å±æ€§äºŒ).reversed());
//å…ˆä»¥å±æ€§ä¸€å‡åº,å†è¿›è¡Œå±æ€§äºŒé™åº
list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).thenComparing(ç±»::å±æ€§äºŒ,Comparator.reverseOrder()));

// å¤šå±æ€§åˆ†ç»„
Map&amp;lt;String, Map&amp;lt;String, List&amp;lt;PersonPojo&amp;gt;&amp;gt;&amp;gt; mapMap = personPojos.stream()
        .collect(Collectors.groupingBy(PersonPojo::getId, Collectors.groupingBy(PersonPojo::getName)));
System.out.println(JSONObject.toJSONString(mapMap));

// å¤šä¸ªå±æ€§åˆæˆä¸€ä¸ªå±æ€§
Map&amp;lt;String, List&amp;lt;PersonPojo&amp;gt;&amp;gt; map = personPojos.stream().collect(Collectors.groupingBy(Test5::fetchGroupKey));
System.out.println(JSONObject.toJSONString(map));
private static String fetchGroupKey(PersonPojo p) {
    return p.getId() + &amp;quot;_&amp;quot; + p.getName();
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;completablefuture&#34;&gt;CompletableFuture&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;package com.philosopherzb.demo.test;

import java.util.concurrent.CompletableFuture;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.ThreadLocalRandom;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;

/**
 * @author philosopherZB
 * @date 2021/9/28
 */
public class Test10 {
    public static void main(String[] args) {
//        Test10.testThenAccept();
//        Test10.testThenRun();
//        Test10.testThenApply();
//        Test10.testThenCombine();
//        Test10.testThenCompose();
//        Test10.testApplyToEither();
//        Test10.testExceptionally();
//        Test10.testHandle();
        Test10.testAllOf();
//        Test10.testGet();
    }

    /**
     * åŠŸèƒ½: å½“å‰ä»»åŠ¡æ­£å¸¸å®Œæˆåæ‰§è¡Œï¼Œä¸”å½“å‰ä»»åŠ¡çš„è¿”å›å€¼å¯ä½œä¸ºä¸‹ä¸ªä»»åŠ¡çš„å…¥å‚ï¼›thenAcceptæœ¬èº«å¹¶æ²¡æœ‰è¿”å›å€¼
     * æ ·ä¾‹: æ¥å—ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œç»“æœçš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä¸ç¬¬äºŒä¸ªä»»åŠ¡çš„å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥æ“ä½œ
     */
    private static void testThenAccept() {
        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;first&amp;quot;);
        first.thenAccept(f -&amp;gt; {
            System.out.println(&amp;quot;accept firstFuture result: &amp;quot; + f);
            System.out.println(&amp;quot;Splicing result: &amp;quot; + f + &amp;quot;second&amp;quot;);
        }).whenComplete((aVoid, throwable) -&amp;gt; {
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
    }

    /**
     * åŠŸèƒ½: å½“å‰ä»»åŠ¡æ­£å¸¸å®Œæˆåæ‰§è¡Œï¼›thenRunæœ¬èº«å¹¶æ²¡æœ‰è¿”å›å€¼
     * æ ·ä¾‹: å¼‚æ­¥é¡ºåºæ‰§è¡Œ
     */
    private static void testThenRun() {
        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; {
            System.out.println(&amp;quot;first&amp;quot;);
            return &amp;quot;first&amp;quot;;
        });
        first.thenRun(() -&amp;gt; System.out.println(&amp;quot;result: &amp;quot; + &amp;quot;second&amp;quot;)).whenComplete((aVoid, throwable) -&amp;gt; {
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
    }

    /**
     * åŠŸèƒ½: å½“å‰ä»»åŠ¡æ­£å¸¸å®Œæˆåæ‰§è¡Œï¼Œä¸”å½“å‰ä»»åŠ¡çš„è¿”å›å€¼å¯ä½œä¸ºä¸‹ä¸ªä»»åŠ¡çš„å…¥å‚ï¼›thenApplyæœ¬èº«æœ‰è¿”å›å€¼
     * æ ·ä¾‹: æ¥å—ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œç»“æœçš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä¸ç¬¬äºŒä¸ªä»»åŠ¡çš„å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥æ“ä½œï¼Œæœ€åå°†ç»“æœä¸ç¬¬ä¸‰ä¸ªä»»åŠ¡çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆå¤šä¸ªä»»åŠ¡ä¸²è¡Œï¼‰
     */
    private static void testThenApply() {
        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;first&amp;quot;);
        CompletableFuture&amp;lt;String&amp;gt; second = first.thenApply(f -&amp;gt; {
            System.out.println(&amp;quot;second accept firstFuture result: &amp;quot; + f);
            System.out.println(&amp;quot;second Splicing result: &amp;quot; + f + &amp;quot;second&amp;quot;);
            return f + &amp;quot;second&amp;quot;;
        }).whenComplete((aVoid, throwable) -&amp;gt; {
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
        second.thenApply(s -&amp;gt; {
            System.out.println(&amp;quot;second.thenApply accept firstFuture result: &amp;quot; + s);
            System.out.println(&amp;quot;second.thenApply Splicing result: &amp;quot; + s + &amp;quot;third&amp;quot;);
            return s + &amp;quot;third&amp;quot;;
        }).whenComplete((r, throwable) -&amp;gt; {
            System.out.println(&amp;quot;third result: &amp;quot; + r);
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
    }

    /**
     * åŠŸèƒ½: å¤„ç†ä¸¤ä¸ªCompletionStageçš„ç»“æœå¹¶è¿›è¡Œè¿”å›ï¼›thenCombine æœ¬èº«æœ‰è¿”å›å€¼
     * æ ·ä¾‹: æ‹¼æ¥å­—ç¬¦ä¸²
     */
    private static void testThenCombine() {
        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;first&amp;quot;);
        CompletableFuture&amp;lt;String&amp;gt; second = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;second&amp;quot;);
        // æœ‰è¿”å›å€¼
        first.thenCombine(second, (f, s) -&amp;gt; f + s).whenComplete((r, throwable) -&amp;gt; {
            System.out.println(&amp;quot;thenCombine result: &amp;quot; + r);
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
        // æ— è¿”å›å€¼
        first.thenAcceptBoth(second, (f, s) -&amp;gt; {
            System.out.println(&amp;quot;thenAcceptBoth result: &amp;quot; + f + s);
        }).whenComplete((aVoid, throwable) -&amp;gt; {
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
        // æ— è¿”å›å€¼, åœ¨ä¸¤ä¸ªä»»åŠ¡æ‰§è¡Œåæ‰§è¡Œ
        first.runAfterBoth(second, () -&amp;gt; {
            System.out.println(&amp;quot;runAfterBoth result: &amp;quot;);
        }).whenComplete((aVoid, throwable) -&amp;gt; {
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
    }

    /**
     * åŠŸèƒ½: å¤„ç†ä¸¤ä¸ªCompletionStageçš„ç»“æœå¹¶è¿›è¡Œè¿”å›, ä¸thenApplyç±»ä¼¼ï¼Œä¸è¿‡lambdaæ¥å—çš„æ˜¯ä¸€ä¸ªCompletableFutureï¼›thenCompose æœ¬èº«æœ‰è¿”å›å€¼
     * æ ·ä¾‹: æ‹¼æ¥å­—ç¬¦ä¸²
     */
    private static void testThenCompose() {
        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;first&amp;quot;);
        CompletableFuture&amp;lt;String&amp;gt; second = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;second&amp;quot;);
        // æœ‰è¿”å›å€¼
        first.thenCompose(f -&amp;gt; second.thenApply(s -&amp;gt; f + s)).whenComplete((r, throwable) -&amp;gt; {
            System.out.println(&amp;quot;thenCompose result: &amp;quot; + r);
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
    }

    /**
     * åŠŸèƒ½: è¿è¡Œä¸¤ä¸ªCompletionStageï¼Œå¹¶å°†æœ€å…ˆå¤„ç†ç»“æŸçš„ç»“æœè¿”å›ï¼›applyToEither æœ¬èº«æœ‰è¿”å›å€¼
     * æ ·ä¾‹: è¿”å›æœ€å¿«å¤„ç†ç»“æœ
     */
    private static void testApplyToEither() {
        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return &amp;quot;first-sleep-1000&amp;quot;;
        });
        CompletableFuture&amp;lt;String&amp;gt; second = CompletableFuture.supplyAsync(() -&amp;gt; {
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return &amp;quot;second-sleep-2000&amp;quot;;
        });
        // è·å–ä¸€ä¸‹è¿”å›å€¼ï¼Œå¦åˆ™ä»¥ä¸‹ä»£ç ä¸ä¼šæ‰§è¡Œ
        System.out.println(&amp;quot;=====&amp;gt;&amp;quot; + second.join());
        // æœ‰è¿”å›å€¼
        CompletableFuture&amp;lt;String&amp;gt; third = first.applyToEither(second, s -&amp;gt; s).whenComplete((r, throwable) -&amp;gt; {
            System.out.println(&amp;quot;applyToEither result: &amp;quot; + r);
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
        // æ— è¿”å›å€¼
        first.acceptEither(second, s -&amp;gt; {
            System.out.println(&amp;quot;acceptEither result: &amp;quot; + s);
        }).whenComplete((aVoid, throwable) -&amp;gt; {
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
        // æ— è¿”å›å€¼, åœ¨ä¸¤ä¸ªä»»åŠ¡æ‰§è¡Œåæ‰§è¡Œ
        first.runAfterEither(second, () -&amp;gt; {
            System.out.println(&amp;quot;runAfterEither result: &amp;quot;);
        }).whenComplete((aVoid, throwable) -&amp;gt; {
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        });
    }

    /**
     * åŠŸèƒ½: å¤„ç†è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¹¶è¿›è¡Œé¢å¤–çš„è¡¥å¿æ“ä½œï¼ˆç±»ä¼¼äºtry catchï¼‰ï¼›exceptionally æœ¬èº«æœ‰è¿”å›å€¼
     * æ ·ä¾‹: å¤„ç†å¼‚å¸¸
     */
    private static void testExceptionally() {
        // å‘ç”Ÿå¼‚å¸¸ï¼ŒthenApplyä¸ä¼šæ‰§è¡Œï¼ˆthenApplyå¿…é¡»åœ¨ç¨‹åºæ­£å¸¸è¿è¡Œåæ‰ä¼šæ‰§è¡Œï¼‰
        CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;result: &amp;quot; + (3 / 0))
                .thenApply(s -&amp;gt; {
                    System.out.println(&amp;quot;first not running: &amp;quot; + s);
                    return s;
                })
                .exceptionally(throwable -&amp;gt; {
                    System.out.println(&amp;quot;first e: &amp;quot; + throwable.getLocalizedMessage());
                    return &amp;quot;first occur exception&amp;quot;;
                })
                .whenComplete((r, throwable) -&amp;gt; {
                    System.out.println(&amp;quot;first exceptionally result: &amp;quot; + r);
                    if (throwable != null) {
                        System.out.println(throwable.getLocalizedMessage());
                    }
                });
        // æ­£å¸¸è¿è¡Œï¼ŒthenApplyæ‰§è¡Œ
        CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;result: &amp;quot; + (3 / 1))
                .thenApply(s -&amp;gt; {
                    System.out.println(&amp;quot;second running: &amp;quot; + s);
                    return s;
                })
                .exceptionally(throwable -&amp;gt; {
                    System.out.println(&amp;quot;second e: &amp;quot; + throwable.getLocalizedMessage());
                    return &amp;quot;second occur exception&amp;quot;;
                })
                .whenComplete((r, throwable) -&amp;gt; {
                    System.out.println(&amp;quot;second exceptionally result: &amp;quot; + r);
                    if (throwable != null) {
                        System.out.println(throwable.getLocalizedMessage());
                    }
                });
    }

    /**
     * åŠŸèƒ½: handleç±»ä¼¼äºwhenCompleteï¼ŒåŒºåˆ«åœ¨äºï¼šhandle æœ‰è¿”å›å€¼ï¼Œ whenComplete æ— è¿”å›å€¼
     * æ ·ä¾‹: æ‰“å°è¿”å›å€¼
     */
    private static void testHandle() {
        // å‘ç”Ÿå¼‚å¸¸ï¼ŒthenApplyä¸ä¼šæ‰§è¡Œï¼ˆthenApplyå¿…é¡»åœ¨ç¨‹åºæ­£å¸¸è¿è¡Œåæ‰ä¼šæ‰§è¡Œï¼‰
        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;result: &amp;quot; + (3 / 0))
                .thenApply(s -&amp;gt; {
                    System.out.println(&amp;quot;first not running: &amp;quot; + s);
                    return s;
                })
                .exceptionally(throwable -&amp;gt; {
                    System.out.println(&amp;quot;first e: &amp;quot; + throwable.getLocalizedMessage());
                    return &amp;quot;first occur exception&amp;quot;;
                })
                .handle((r, throwable) -&amp;gt; {
                    System.out.println(&amp;quot;first handle result: &amp;quot; + r);
                    if (throwable != null) {
                        System.out.println(throwable.getLocalizedMessage());
                    }
                    return r;
                });
        // æ­£å¸¸è¿è¡Œï¼ŒthenApplyæ‰§è¡Œ
        CompletableFuture&amp;lt;String&amp;gt; second = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;result: &amp;quot; + (3 / 1))
                .thenApply(s -&amp;gt; {
                    System.out.println(&amp;quot;second running: &amp;quot; + s);
                    return s;
                })
                .exceptionally(throwable -&amp;gt; {
                    System.out.println(&amp;quot;second e: &amp;quot; + throwable.getLocalizedMessage());
                    return &amp;quot;second occur exception&amp;quot;;
                })
                .handle((r, throwable) -&amp;gt; {
                    System.out.println(&amp;quot;second handle result: &amp;quot; + r);
                    if (throwable != null) {
                        System.out.println(throwable.getLocalizedMessage());
                    }
                    return r;
                });

        System.out.println(&amp;quot;join result: &amp;quot; + first.join());
        System.out.println(&amp;quot;join result: &amp;quot; + second.join());
    }

    /**
     * åŠŸèƒ½: æ‰€æœ‰ä»»åŠ¡å®Œæˆåæ‰§è¡Œ:allOf; ä»»æ„ä»»åŠ¡å®Œæˆåæ‰§è¡Œï¼šanyOf
     * æ ·ä¾‹: å¼‚æ­¥æŸ¥è¯¢ä¸‰ä¸ªä»»åŠ¡ä¿¡æ¯å¹¶è¿”å›
     */
    private static void testAllOf() {
        ExecutorService executorService = Executors.newFixedThreadPool(3);
        long start = System.currentTimeMillis();

        CompletableFuture&amp;lt;String&amp;gt; first = CompletableFuture.supplyAsync(() -&amp;gt; {
            try {
                Thread.sleep(1000 + ThreadLocalRandom.current().nextInt(1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return &amp;quot;first&amp;quot;;
        }, executorService);
        CompletableFuture&amp;lt;String&amp;gt; second = CompletableFuture.supplyAsync(() -&amp;gt; {
            try {
                Thread.sleep(1000 + ThreadLocalRandom.current().nextInt(1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return &amp;quot;second&amp;quot;;
        }, executorService);
        CompletableFuture&amp;lt;String&amp;gt; third = CompletableFuture.supplyAsync(() -&amp;gt; {
            try {
                Thread.sleep(1000 + ThreadLocalRandom.current().nextInt(1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return &amp;quot;third&amp;quot;;
        }, executorService);
        // æ‰€æœ‰ä»»åŠ¡å®Œæˆåæ‰§è¡Œ
        CompletableFuture.allOf(first, second, third).join();
        System.out.println(first.join() + second.join() + third.join());
        System.out.println(System.currentTimeMillis() - start);

        // ä»»æ„ä»»åŠ¡å®Œæˆåæ‰§è¡Œ
        CompletableFuture.anyOf(first, second, third).join();
        System.out.println(first.join() + second.join() + third.join());
        System.out.println(System.currentTimeMillis() - start);
    }

    /**
     * è·å–è¿”å›å€¼
     */
    private static void testGet() {
        CompletableFuture cf = CompletableFuture.supplyAsync(() -&amp;gt; &amp;quot;content&amp;quot;).whenComplete(((result, throwable) -&amp;gt; {
            System.out.println(&amp;quot;result: &amp;quot; + result);
            if (throwable != null) {
                System.out.println(throwable.getLocalizedMessage());
            }
        }));
        try {
            System.out.println(&amp;quot;cf get: &amp;quot; + cf.get());
            System.out.println(&amp;quot;cf getWithTimeOut: &amp;quot; + cf.get(1, TimeUnit.SECONDS));
            System.out.println(&amp;quot;cf join: &amp;quot; + cf.join());
        } catch (InterruptedException | ExecutionException | TimeoutException e) {
            e.printStackTrace();
        }

    }
}

&lt;/code&gt;&lt;/pre&gt;
">Java8æ–°ç‰¹æ€§Stream&CompletableFuture</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/arraylist-yuan-ma-jie-xi-jdk8/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Javaä¸­çš„ArrayListçš„æºç ä»¥åŠå…¶ä¸­å¦‚ä½•è¿›è¡Œæ‰©å®¹çš„é€»è¾‘åˆ†æï¼ˆjdk8ï¼‰&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/road-1072821_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;æºç æ¥è‡ªäºjdk8&#34;&gt;æºç æ¥è‡ªäºJDK8&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;package java.util;

import java.util.function.Consumer;
import java.util.function.Predicate;
import java.util.function.UnaryOperator;
import sun.misc.SharedSecrets;

//å…¶ä¸­å®ç°äº†RandomAccessæ¥å£è¡¨ç¤ºæ”¯æŒéšæœºè®¿é—®
public class ArrayList&amp;lt;E&amp;gt; extends AbstractList&amp;lt;E&amp;gt;
        implements List&amp;lt;E&amp;gt;, RandomAccess, Cloneable, java.io.Serializable
{
    //åºåˆ—å·
    private static final long serialVersionUID = 8683452581122892189L;

    /**
     * é»˜è®¤åˆå§‹å®¹é‡
     */
    private static final int DEFAULT_CAPACITY = 10;

    /**
     * å…±äº«çš„ç©ºæ•°ç»„å®ä¾‹ï¼ˆç”¨äºç©ºå®ä¾‹ï¼‰
     * å½“ArrayList(int initialCapacity)ï¼ŒArrayList(Collection&amp;lt;? extends E&amp;gt; c)ä¸­çš„å®¹é‡ç­‰äº0çš„æ—¶å€™ä½¿ç”¨
     */
    private static final Object[] EMPTY_ELEMENTDATA = {};

    /**
     * å…±äº«çš„ç©ºæ•°ç»„å®ä¾‹ï¼ˆç”¨äºé»˜è®¤å¤§å°çš„ç©ºå®ä¾‹ï¼‰
     * å°†å…¶ä¸EMPTY_ELEMENTDATAåŒºåˆ†å¼€æ¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†çŸ¥é“ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™éœ€è¦æ‰©å®¹å¤šå°‘
     * ç”¨äºArrayList()æ„é€ å™¨
     */
    private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};

    /**
     * ArrayListä¿å­˜æœ‰åºå…ƒç´ çš„æ•°ç»„
     * ArraylListå®¹é‡ä¸ºæ•°ç»„å®¹é‡
     * ä»»ä½•ç©ºæ•°ç»„éƒ½ä½¿ç”¨ elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA
     * å½“ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™å…¶å®¹é‡å°†ä¼šæ‰©å®¹è‡³ DEFAULT_CAPACITYï¼ˆ10ï¼‰
     */
    transient Object[] elementData; // non-private to simplify nested class access

    /**
     * ArrayListçš„å¤§å°ï¼ˆåŒ…å«å…ƒç´ çš„æ•°é‡ï¼‰
     * @serial
     */
    private int size;

    /**
     * å¸¦æŒ‡å®šå®¹é‡å‚æ•°çš„æ„é€ å™¨ï¼Œå¦‚æœå…ƒç´ æ•°é‡è¾ƒå¤§çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ„é€ å™¨ï¼Œé˜²æ­¢é¢‘ç¹æ‰©å®¹é€ æˆçš„æ€§èƒ½æŸå¤±
     */
    public ArrayList(int initialCapacity) {
        //å¦‚æœä¼ å…¥å€¼å¤§äº0ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªè¯¥å®¹é‡å¤§å°çš„æ•°ç»„ã€‚
        if (initialCapacity &amp;gt; 0) {
            this.elementData = new Object[initialCapacity];
        } else if (initialCapacity == 0) {
            //å¦åˆ™å¦‚æœä¼ å…¥å€¼ç­‰äº0ï¼Œåˆ™åˆ›å»ºé»˜è®¤ç©ºæ•°ç»„
            this.elementData = EMPTY_ELEMENTDATA;
        } else {
            //å¦‚æœå°äº0åˆ™æŠ›å‡ºå¼‚å¸¸
            throw new IllegalArgumentException(&amp;quot;Illegal Capacity: &amp;quot;+
                    initialCapacity);
        }
    }

    /**
     * é»˜è®¤æ„é€ å‡½æ•°ï¼Œå…¶åˆå§‹å®¹é‡ä¸º10ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œä¸€å¼€å§‹å…¶å®æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œåªæ˜¯å½“addæ—¶æ‰ä¼šè¿›è¡Œæ‰©å®¹è‡³10çš„æ“ä½œï¼Œä¸€å®šç¨‹åº¦ä¸Šå‡å°äº†å†…å­˜æ¶ˆè€—ã€‚ï¼‰
     */
    public ArrayList() {
        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
    }

    /**
     * æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šé›†åˆå…ƒç´ çš„åˆ—è¡¨ï¼Œå…ƒç´ é¡ºåºç”±é›†åˆçš„è¿­ä»£å™¨æ‰€è¿”å›ã€‚
     */
    public ArrayList(Collection&amp;lt;? extends E&amp;gt; c) {
        //é›†åˆè½¬æ•°ç»„
        elementData = c.toArray();
        //æŒ‡å®šé›†åˆå«æœ‰å…ƒç´ 
        if ((size = elementData.length) != 0) {
            // c.toArrayå¯èƒ½ä¸ä¼šè¿”å›Object[] (see 6260652)
            //ä½¿ç”¨åå°„è¿›è¡Œè¿è¡Œæ—¶åˆ¤æ–­elementDataæ˜¯å¦å±äºObject[]
            if (elementData.getClass() != Object[].class)
                //æ‹·è´æ•°ç»„
                elementData = Arrays.copyOf(elementData, size, Object[].class);
        } else {
            // ç”±ç©ºæ•°ç»„ä»£æ›¿
            this.elementData = EMPTY_ELEMENTDATA;
        }
    }

    /**
     * ä¿®æ”¹ArrayListå®¹é‡ä¸ºlistçš„å½“å‰å¤§å°
     * ä¸€ä¸ªåº”ç”¨å¯ä»¥ä½¿ç”¨æ­¤æ“ä½œæ¥æœ€å°åŒ–ä¸€ä¸ªArrayListçš„å­˜å‚¨
     */
    public void trimToSize() {
        modCount++;
        //å¦‚æœå½“å‰æ•°ç»„å…ƒç´ ä¸ªæ•°å°äºæ•°ç»„å®¹é‡
        if (size &amp;lt; elementData.length) {
            //æ²¡æœ‰å…ƒç´ è¿”å›ç©ºæ•°ç»„ï¼Œå¦åˆ™è¿”å›å…ƒç´ ä¸ªæ•°çš„æ•°ç»„ã€‚
            elementData = (size == 0)
                    ? EMPTY_ELEMENTDATA
                    : Arrays.copyOf(elementData, size);
        }
    }

    /**
     * å¦‚æœæœ‰å¿…è¦å»å¢åŠ ArrayListçš„å®¹é‡ï¼Œè¯·ç¡®ä¿å®ƒè‡³å°‘å¯ä»¥å®¹çº³ç”±æœ€å°å®¹é‡å‚æ•°æŒ‡å®šçš„å…ƒç´ æ•°é‡
     * @param   minCapacity   æ‰€éœ€çš„æœ€å°å®¹é‡
     */
    public void ensureCapacity(int minCapacity) {
        //é»˜è®¤æœ€å°å®¹é‡ï¼Œç©ºæ•°ç»„ä»¥åŠé»˜è®¤å¤§å°10
        int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA)
                // any size if not default element table
                ? 0
                // larger than default for default empty table. It&#39;s already
                // supposed to be at default size.
                : DEFAULT_CAPACITY;

        //å¦‚æœä¼ å…¥å®¹é‡å¤§äºæœ€å°å®¹é‡ï¼Œåˆ™è¿›è¡Œæ‰©å®¹
        if (minCapacity &amp;gt; minExpand) {
            ensureExplicitCapacity(minCapacity);
        }
    }

    private static int calculateCapacity(Object[] elementData, int minCapacity) {
        //å¦‚æœelementDataä¸ºé»˜è®¤ç©ºæ•°ç»„ï¼Œåˆ™æ¯”è¾ƒä¼ å…¥å€¼ä¸é»˜è®¤å€¼ï¼ˆ10ï¼‰ï¼Œè¿”å›ä¸¤è€…ä¸­çš„è¾ƒå¤§å€¼
        //elementDataä¸ºé»˜è®¤ç©ºæ•°ç»„æŒ‡çš„æ˜¯é€šè¿‡ArrayList()è¿™ä¸ªæ„é€ å™¨åˆ›å»ºçš„ArrayListå¯¹è±¡
        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
            return Math.max(DEFAULT_CAPACITY, minCapacity);
        }
        //è¿”å›ä¼ å…¥å€¼
        return minCapacity;
    }

    private void ensureCapacityInternal(int minCapacity) {
        //å…ˆé€šè¿‡calculateCapacityæ–¹æ³•è®¡ç®—æœ€ç»ˆå®¹é‡ï¼Œä»¥ç¡®è®¤å®é™…å®¹é‡
        ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));
    }

    private void ensureExplicitCapacity(int minCapacity) {
        modCount++;

        // overflow-conscious code
        //å¦‚æœæœ€ç»ˆç¡®è®¤å®¹é‡å¤§äºæ•°ç»„å®¹é‡ï¼Œåˆ™è¿›è¡Œgrow()æ‰©å®¹
        if (minCapacity - elementData.length &amp;gt; 0)
            grow(minCapacity);
    }

    /**
     * å¯åˆ†é…æ•°ç»„æœ€å¤§å¤§å°
     */
    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;

    /**
     * å¢åŠ ArrayListçš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘å¯ä»¥å®¹çº³ç”±æœ€å°å®¹é‡å‚æ•°æŒ‡å®šçš„å…ƒç´ æ•°é‡
     * @param minCapacity æ‰€éœ€çš„æœ€å°å®¹é‡
     */
    private void grow(int minCapacity) {
        // overflow-conscious code
        //oldCapacityè¡¨ç¤ºæ—§å®¹é‡
        int oldCapacity = elementData.length;
        //newCapacityè¡¨ç¤ºæ–°å®¹é‡ï¼Œè®¡ç®—è§„åˆ™ä¸ºæ—§å®¹é‡+æ—§å®¹é‡çš„0.5ï¼Œå³æ—§å®¹é‡çš„1.5å€ã€‚å¦‚æœè¶…è¿‡intçš„æœ€å¤§å€¼ä¼šè¿”å›ä¸€ä¸ªè´Ÿæ•°ã€‚
        //oldCapacity &amp;gt;&amp;gt; 1è¡¨ç¤ºå³ç§»ä¸€ä½ï¼Œå¯¹åº”é™¤ä»¥2çš„1æ¬¡æ–¹ã€‚
        int newCapacity = oldCapacity + (oldCapacity &amp;gt;&amp;gt; 1);
        //å¦‚æœæ–°å®¹é‡å°äºæœ€å°å®¹é‡ï¼Œåˆ™å°†æœ€å°å®¹é‡èµ‹å€¼ç»™æ–°å®¹é‡(æœ‰æ—¶æ‰‹åŠ¨æ‰©å®¹å¯èƒ½ä¹Ÿä¼šè¿”å›&amp;lt;0ï¼Œå¯¹åº”æ–¹æ³•ä¸ºensureCapacity())
        if (newCapacity - minCapacity &amp;lt; 0)
            newCapacity = minCapacity;
        //å¦‚æœæ–°å®¹é‡å¤§äºMAX_ARRAY_SIZEï¼Œåˆ™æ‰§è¡ŒhugeCapacity(minCapacity)è¿”å›å¯¹åº”å€¼
        if (newCapacity - MAX_ARRAY_SIZE &amp;gt; 0)
            newCapacity = hugeCapacity(minCapacity);
        // minCapacity is usually close to size, so this is a win:
        //å¤åˆ¶æ—§æ•°ç»„åˆ°æ–°å®¹é‡æ•°ç»„ä¸­ï¼Œå®Œæˆæ‰©å®¹æ“ä½œ
        elementData = Arrays.copyOf(elementData, newCapacity);
    }

    private static int hugeCapacity(int minCapacity) {
        //å¦‚æœæœ€å°å®¹é‡è¶…è¿‡äº†intçš„æœ€å¤§å€¼ï¼ŒminCapacityä¼šæ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œæ­¤æ—¶æŠ›å‡ºå†…å­˜æº¢å‡ºé”™è¯¯
        if (minCapacity &amp;lt; 0) // overflow
            throw new OutOfMemoryError();
        //æ¯”è¾ƒæœ€å°å®¹é‡æ˜¯å¦å¤§äºMAX_ARRAY_SIZEï¼Œå¦‚æœæ˜¯åˆ™è¿”å›Integer.MAX_VALUEï¼Œå¦åˆ™è¿”å›MAX_ARRAY_SIZE
        return (minCapacity &amp;gt; MAX_ARRAY_SIZE) ?
                Integer.MAX_VALUE :
                MAX_ARRAY_SIZE;
    }

    /**
     * è¿”å›åˆ—è¡¨å…ƒç´ æ•°
     */
    public int size() {
        return size;
    }

    /**
     * å¦‚æœåˆ—è¡¨ä¸åŒ…å«å…ƒç´ ï¼Œè¿”å›true
     */
    public boolean isEmpty() {
        return size == 0;
    }

    /**
     * å¦‚æœåˆ—è¡¨åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œè¿”å›true
     */
    public boolean contains(Object o) {
        //è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœåˆ—è¡¨ä¸­ä¸åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™ä¸º-1
        return indexOf(o) &amp;gt;= 0;
    }

    /**
     * è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœåˆ—è¡¨ä¸­ä¸åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™ä¸º-1
     */
    public int indexOf(Object o) {
        if (o == null) {
            for (int i = 0; i &amp;lt; size; i++)
                if (elementData[i]==null)
                    return i;
        } else {
            for (int i = 0; i &amp;lt; size; i++)
                if (o.equals(elementData[i]))
                    return i;
        }
        return -1;
    }

    /**
     * è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœåˆ—è¡¨ä¸­ä¸åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™ä¸º-1
     */
    public int lastIndexOf(Object o) {
        if (o == null) {
            for (int i = size-1; i &amp;gt;= 0; i--)
                if (elementData[i]==null)
                    return i;
        } else {
            for (int i = size-1; i &amp;gt;= 0; i--)
                if (o.equals(elementData[i]))
                    return i;
        }
        return -1;
    }

    /**
     * è¿”å›ArrayListå®ä¾‹çš„ä¸€ä¸ªæµ…æ‹·è´ï¼Œåˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ä¼šè¢«æ‹·è´
     */
    public Object clone() {
        try {
            ArrayList&amp;lt;?&amp;gt; v = (ArrayList&amp;lt;?&amp;gt;) super.clone();
            v.elementData = Arrays.copyOf(elementData, size);
            v.modCount = 0;
            return v;
        } catch (CloneNotSupportedException e) {
            // this shouldn&#39;t happen, since we are Cloneable
            throw new InternalError(e);
        }
    }

    /**
     * ä»¥æ­£ç¡®çš„é¡ºåºï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰è¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚
     * è¿”å›çš„æ•°ç»„å°†æ˜¯â€œå®‰å…¨çš„â€ï¼Œå› ä¸ºè¯¥åˆ—è¡¨ä¸ä¿ç•™å¯¹å®ƒçš„å¼•ç”¨ã€‚ ï¼ˆæ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»åˆ†é…ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼‰ã€‚
     * å› æ­¤ï¼Œè°ƒç”¨è€…å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹è¿”å›çš„æ•°ç»„ã€‚ æ­¤æ–¹æ³•å……å½“åŸºäºé˜µåˆ—å’ŒåŸºäºé›†åˆçš„APIä¹‹é—´çš„æ¡¥æ¢ã€‚
     */
    public Object[] toArray() {
        return Arrays.copyOf(elementData, size);
    }

    /**
     * ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰;
     * è¿”å›çš„æ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹æ˜¯æŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹ã€‚ å¦‚æœåˆ—è¡¨é€‚åˆæŒ‡å®šçš„æ•°ç»„ï¼Œåˆ™è¿”å›å…¶ä¸­ã€‚
     * å¦åˆ™ï¼Œå°†ä¸ºæŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹å’Œæ­¤åˆ—è¡¨çš„å¤§å°åˆ†é…ä¸€ä¸ªæ–°æ•°ç»„ã€‚
     * å¦‚æœåˆ—è¡¨é€‚ç”¨äºæŒ‡å®šçš„æ•°ç»„ï¼Œå…¶ä½™ç©ºé—´ï¼ˆå³æ•°ç»„çš„åˆ—è¡¨æ•°é‡å¤šäºæ­¤å…ƒç´ ï¼‰ï¼Œåˆ™ç´§è·Ÿåœ¨é›†åˆç»“æŸåçš„æ•°ç»„ä¸­çš„å…ƒç´ è®¾ç½®ä¸ºnull ã€‚
     *ï¼ˆè¿™ä»…åœ¨è°ƒç”¨è€…çŸ¥é“åˆ—è¡¨ä¸åŒ…å«ä»»ä½•ç©ºå…ƒç´ çš„æƒ…å†µä¸‹æ‰èƒ½ç¡®å®šåˆ—è¡¨çš„é•¿åº¦ã€‚ï¼‰
     */
    @SuppressWarnings(&amp;quot;unchecked&amp;quot;)
    public &amp;lt;T&amp;gt; T[] toArray(T[] a) {
        if (a.length &amp;lt; size)
            //åˆ›å»ºä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶ç±»å‹æ•°ç»„ï¼Œå†…å®¹ä¸ºArrayListæ•°ç»„çš„
            return (T[]) Arrays.copyOf(elementData, size, a.getClass());
        System.arraycopy(elementData, 0, a, 0, size);
        if (a.length &amp;gt; size)
            a[size] = null;
        return a;
    }

    // ä½ç½®è®¿é—®æ“ä½œ

    @SuppressWarnings(&amp;quot;unchecked&amp;quot;)
    E elementData(int index) {
        return (E) elementData[index];
    }

    /**
     * è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ 
     */
    public E get(int index) {
        //æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¶Šç•Œ
        rangeCheck(index);

        return elementData(index);
    }

    /**
     * ç”¨æŒ‡å®šå…ƒç´ æ›¿æ¢åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®çš„å…ƒç´ 
     */
    public E set(int index, E element) {
        //æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¶Šç•Œ
        rangeCheck(index);

        E oldValue = elementData(index);
        elementData[index] = element;
        return oldValue;
    }

    /**
     * å°†æŒ‡å®šå…ƒç´ è¿½åŠ åˆ°æ•°ç»„æœ«å°¾
     */
    public boolean add(E e) {
        //æ·»åŠ ä¹‹å‰å…ˆç¡®è®¤æ˜¯å¦éœ€è¦æ‰©å®¹
        ensureCapacityInternal(size + 1);  // Increments modCount!!
        //æ–°åŠ å…¥çš„å…ƒç´ æ˜¯æ·»åŠ åœ¨äº†æ•°ç»„çš„æœ«å°¾ï¼Œéšåæ•°ç»„sizeè‡ªå¢ã€‚
        elementData[size++] = e;
        return true;
    }

    /**
     * æ’å…¥æŒ‡å®šå…ƒç´ åˆ°æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®
     * å…ˆè°ƒç”¨ rangeCheckForAdd å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ï¼›ç„¶åè°ƒç”¨ ensureCapacityInternal æ–¹æ³•ä¿è¯capacityè¶³å¤Ÿå¤§ï¼›
     * å†å°†ä»indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®ï¼›å°†elementæ’å…¥indexä½ç½®ï¼›æœ€åsizeåŠ 1ã€‚
     */
    public void add(int index, E element) {
        rangeCheckForAdd(index);

        ensureCapacityInternal(size + 1);  // Increments modCount!!
        //è‡ªå·±å¤åˆ¶è‡ªå·±
        System.arraycopy(elementData, index, elementData, index + 1,
                size - index);
        elementData[index] = element;
        size++;
    }

    /**
     * å°†åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ç§»é™¤ï¼Œåç»­æ‰€æœ‰å…ƒç´ ç§»åˆ°å·¦ç«¯ï¼ˆä»ä»–ä»¬çš„ç´¢å¼•ä¸­å‡å»ä¸€ä¸ªï¼‰
     */
    public E remove(int index) {
        rangeCheck(index);

        modCount++;
        E oldValue = elementData(index);

        int numMoved = size - index - 1;
        if (numMoved &amp;gt; 0)
            System.arraycopy(elementData, index+1, elementData, index,
                    numMoved);
        elementData[--size] = null; //  æ¸…ç†å·¥ä½œäº¤ç»™GC

        return oldValue;
    }

    /**
     * ä»åˆ—è¡¨ä¸­ç§»é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¸æ›´æ”¹
     */
    public boolean remove(Object o) {
        if (o == null) {
            for (int index = 0; index &amp;lt; size; index++)
                if (elementData[index] == null) {
                    fastRemove(index);
                    return true;
                }
        } else {
            for (int index = 0; index &amp;lt; size; index++)
                if (o.equals(elementData[index])) {
                    fastRemove(index);
                    return true;
                }
        }
        return false;
    }

    /*
     * Private remove method that skips bounds checking and does not
     * return the value removed.
     */
    private void fastRemove(int index) {
        modCount++;
        int numMoved = size - index - 1;
        if (numMoved &amp;gt; 0)
            System.arraycopy(elementData, index+1, elementData, index,
                    numMoved);
        elementData[--size] = null; // clear to let GC do its work
    }

    /**
     * ç§»é™¤åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä¹‹åä¼šè¿”å›ä¸€ä¸ªç©ºæ•°ç»„
     */
    public void clear() {
        modCount++;

        // clear to let GC do its work
        for (int i = 0; i &amp;lt; size; i++)
            elementData[i] = null;

        size = 0;
    }

    /**
     * å°†æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ ä»¥Iteratorè¿”å›çš„é¡ºåºï¼Œè¿½åŠ åˆ°åˆ—è¡¨æœ«å°¾
     */
    public boolean addAll(Collection&amp;lt;? extends E&amp;gt; c) {
        Object[] a = c.toArray();
        int numNew = a.length;
        ensureCapacityInternal(size + numNew);  // Increments modCount
        System.arraycopy(a, 0, elementData, size, numNew);
        size += numNew;
        return numNew != 0;
    }

    /**
     * å°†æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ ä»¥Iteratorè¿”å›çš„é¡ºåºï¼Œæ’å…¥åˆ°æŒ‡å®šä½ç½®
     */
    public boolean addAll(int index, Collection&amp;lt;? extends E&amp;gt; c) {
        rangeCheckForAdd(index);

        Object[] a = c.toArray();
        int numNew = a.length;
        ensureCapacityInternal(size + numNew);  // Increments modCount

        int numMoved = size - index;
        if (numMoved &amp;gt; 0)
            System.arraycopy(elementData, index, elementData, index + numNew,
                    numMoved);

        System.arraycopy(a, 0, elementData, index, numNew);
        size += numNew;
        return numNew != 0;
    }

    /**
     * ç§»é™¤[fromIndex,toIndex)ä¹‹é—´çš„å…ƒç´ ï¼Œåç»­å…ƒç´ ç§»åˆ°å·¦ç«¯
     */
    protected void removeRange(int fromIndex, int toIndex) {
        modCount++;
        int numMoved = size - toIndex;
        System.arraycopy(elementData, toIndex, elementData, fromIndex,
                numMoved);

        // clear to let GC do its work
        int newSize = size - (toIndex-fromIndex);
        for (int i = newSize; i &amp;lt; size; i++) {
            elementData[i] = null;
        }
        size = newSize;
    }

    /**
     *æ£€æŸ¥ç»™å®šç´¢å¼•æ˜¯å¦åœ¨ç•Œé™å†…ã€‚
     */
    private void rangeCheck(int index) {
        if (index &amp;gt;= size)
            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));
    }

    /**
     * add and addAllä½¿ç”¨çš„rangeCheck
     */
    private void rangeCheckForAdd(int index) {
        if (index &amp;gt; size || index &amp;lt; 0)
            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));
    }

    /**
     * è¿”å› an IndexOutOfBoundsException çš„ç»†èŠ‚ä¿¡æ¯
     */
    private String outOfBoundsMsg(int index) {
        return &amp;quot;Index: &amp;quot;+index+&amp;quot;, Size: &amp;quot;+size;
    }

    /**
     * ä»åˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®šé›†åˆåŒ…å«çš„æ‰€æœ‰å…ƒç´ 
     */
    public boolean removeAll(Collection&amp;lt;?&amp;gt; c) {
        Objects.requireNonNull(c);
        return batchRemove(c, false);
    }

    /**
     * ä¿ç•™æ­¤åˆ—è¡¨ä¸­æŒ‡å®šé›†åˆçš„æ‰€æœ‰å…ƒç´ 
     */
    public boolean retainAll(Collection&amp;lt;?&amp;gt; c) {
        Objects.requireNonNull(c);
        return batchRemove(c, true);
    }

    //æ‰¹é‡ç§»é™¤
    private boolean batchRemove(Collection&amp;lt;?&amp;gt; c, boolean complement) {
        final Object[] elementData = this.elementData;
        int r = 0, w = 0;
        boolean modified = false;
        try {
            for (; r &amp;lt; size; r++)
                if (c.contains(elementData[r]) == complement)
                    elementData[w++] = elementData[r];
        } finally {
            // Preserve behavioral compatibility with AbstractCollection,
            // even if c.contains() throws.
            if (r != size) {
                System.arraycopy(elementData, r,
                        elementData, w,
                        size - r);
                w += size - r;
            }
            if (w != size) {
                // clear to let GC do its work
                for (int i = w; i &amp;lt; size; i++)
                    elementData[i] = null;
                modCount += size - w;
                size = w;
                modified = true;
            }
        }
        return modified;
    }

    /**
     * ä¿å­˜ArrayListçŠ¶æ€åˆ°ä¸€ä¸ªæµä¸­ï¼ˆå³åºåˆ—åŒ–ï¼‰
     */
    private void writeObject(java.io.ObjectOutputStream s)
            throws java.io.IOException{
        // Write out element count, and any hidden stuff
        int expectedModCount = modCount;
        s.defaultWriteObject();

        // Write out size as capacity for behavioural compatibility with clone()
        s.writeInt(size);

        // Write out all elements in the proper order.
        for (int i=0; i&amp;lt;size; i++) {
            s.writeObject(elementData[i]);
        }

        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
    }

    /**
     * ä»ä¸€ä¸ªæµä¸­è¯»å–ArrayListï¼ˆå³ååºåˆ—åŒ–ï¼‰
     */
    private void readObject(java.io.ObjectInputStream s)
            throws java.io.IOException, ClassNotFoundException {
        elementData = EMPTY_ELEMENTDATA;

        // Read in size, and any hidden stuff
        s.defaultReadObject();

        // Read in capacity
        s.readInt(); // ignored

        if (size &amp;gt; 0) {
            // be like clone(), allocate array based upon size not capacity
            int capacity = calculateCapacity(elementData, size);
            SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity);
            ensureCapacityInternal(size);

            Object[] a = elementData;
            // Read in all elements in the proper order.
            for (int i=0; i&amp;lt;size; i++) {
                a[i] = s.readObject();
            }
        }
    }

    /**
     *  ä»åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®å¼€å§‹ï¼Œè¿”å›ä¹‹åæ‰€æœ‰å…ƒç´ çš„åˆ—è¡¨è¿­ä»£å™¨ï¼ˆæŒ‰æ­£ç¡®çš„é¡ºåºï¼‰
     *  æŒ‡å®šçš„ç´¢å¼•è¡¨ç¤ºåˆå§‹è°ƒç”¨å°†è¿”å›çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºnext ã€‚ åˆå§‹è°ƒç”¨previouså°†è¿”å›æŒ‡å®šç´¢å¼•å‡1çš„å…ƒç´ ã€‚
     *  è¿”å›çš„åˆ—è¡¨è¿­ä»£å™¨æ˜¯fail-fast ã€‚
     */
    public ListIterator&amp;lt;E&amp;gt; listIterator(int index) {
        if (index &amp;lt; 0 || index &amp;gt; size)
            throw new IndexOutOfBoundsException(&amp;quot;Index: &amp;quot;+index);
        return new ListItr(index);
    }

    /**
     * è¿”å›åˆ—è¡¨ä¸­çš„åŒ…å«æ‰€æœ‰å…ƒç´ çš„åˆ—è¡¨è¿­ä»£å™¨ï¼ˆæŒ‰æ­£ç¡®çš„é¡ºåºï¼‰ã€‚
     * è¿”å›çš„åˆ—è¡¨è¿­ä»£å™¨æ˜¯fail-fast ã€‚
     */
    public ListIterator&amp;lt;E&amp;gt; listIterator() {
        return new ListItr(0);
    }

    /**
     * ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›åˆ—è¡¨ä¸­çš„åŒ…å«æ‰€æœ‰å…ƒç´ çš„è¿­ä»£å™¨ã€‚
     * è¿”å›çš„è¿­ä»£å™¨æ˜¯fail-fast ã€‚
     */
    public Iterator&amp;lt;E&amp;gt; iterator() {
        return new Itr();
    }

    @Override
    public void forEach(Consumer&amp;lt;? super E&amp;gt; action) {
        Objects.requireNonNull(action);
        final int expectedModCount = modCount;
        @SuppressWarnings(&amp;quot;unchecked&amp;quot;)
        final E[] elementData = (E[]) this.elementData;
        final int size = this.size;
        for (int i=0; modCount == expectedModCount &amp;amp;&amp;amp; i &amp;lt; size; i++) {
            action.accept(elementData[i]);
        }
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
    }


    @Override
    public boolean removeIf(Predicate&amp;lt;? super E&amp;gt; filter) {
        Objects.requireNonNull(filter);
        // figure out which elements are to be removed
        // any exception thrown from the filter predicate at this stage
        // will leave the collection unmodified
        int removeCount = 0;
        final BitSet removeSet = new BitSet(size);
        final int expectedModCount = modCount;
        final int size = this.size;
        for (int i=0; modCount == expectedModCount &amp;amp;&amp;amp; i &amp;lt; size; i++) {
            @SuppressWarnings(&amp;quot;unchecked&amp;quot;)
            final E element = (E) elementData[i];
            if (filter.test(element)) {
                removeSet.set(i);
                removeCount++;
            }
        }
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }

        // shift surviving elements left over the spaces left by removed elements
        final boolean anyToRemove = removeCount &amp;gt; 0;
        if (anyToRemove) {
            final int newSize = size - removeCount;
            for (int i=0, j=0; (i &amp;lt; size) &amp;amp;&amp;amp; (j &amp;lt; newSize); i++, j++) {
                i = removeSet.nextClearBit(i);
                elementData[j] = elementData[i];
            }
            for (int k=newSize; k &amp;lt; size; k++) {
                elementData[k] = null;  // Let gc do its work
            }
            this.size = newSize;
            if (modCount != expectedModCount) {
                throw new ConcurrentModificationException();
            }
            modCount++;
        }

        return anyToRemove;
    }

    @Override
    @SuppressWarnings(&amp;quot;unchecked&amp;quot;)
    public void replaceAll(UnaryOperator&amp;lt;E&amp;gt; operator) {
        Objects.requireNonNull(operator);
        final int expectedModCount = modCount;
        final int size = this.size;
        for (int i=0; modCount == expectedModCount &amp;amp;&amp;amp; i &amp;lt; size; i++) {
            elementData[i] = operator.apply((E) elementData[i]);
        }
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
        modCount++;
    }

    @Override
    @SuppressWarnings(&amp;quot;unchecked&amp;quot;)
    public void sort(Comparator&amp;lt;? super E&amp;gt; c) {
        final int expectedModCount = modCount;
        Arrays.sort((E[]) elementData, 0, size, c);
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
        modCount++;
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æ‰©å®¹æºç è§£æjdk8&#34;&gt;æ‰©å®¹æºç è§£æï¼ˆJDK8ï¼‰&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨ ArrayList &lt;code&gt;&amp;lt;String&amp;gt;&lt;/code&gt; list = new ArrayList&amp;lt;&amp;gt;(5)åˆ›å»ºä¸€ä¸ªArrayLsitï¼Œè¿™è¡¨æ˜åˆ›å»ºçš„ArrayListåˆå§‹å®¹é‡ä¸º5.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    //é»˜è®¤åˆå§‹å®¹é‡10
    private static final int DEFAULT_CAPACITY = 10;
    //ä¸€ä¸ªç©ºçš„é»˜è®¤å¯¹è±¡æ•°ç»„ï¼Œå½“ArrayList(int initialCapacity)ï¼ŒArrayList(Collection&amp;lt;? extends E&amp;gt; c)ä¸­çš„å®¹é‡ç­‰äº0çš„æ—¶å€™ä½¿ç”¨
    private static final Object[] EMPTY_ELEMENTDATA = {};
    //ä¸€ä¸ªç©ºçš„é»˜è®¤å¯¹è±¡æ•°ç»„ï¼Œç”¨äºArrayList()æ„é€ å™¨
    private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};
    //ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œtransientè¡¨ç¤ºä¸èƒ½åºåˆ—åŒ–
    transient Object[] elementData;
    //æ•°ç»„å¤§å°
    private int size;

    //ä»¥ä¼ å…¥çš„å®¹é‡æ„é€ ä¸€ä¸ªç©ºçš„list
    public ArrayList(int initialCapacity) {
        //å¦‚æœä¼ å…¥å€¼å¤§äº0ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªè¯¥å®¹é‡å¤§å°çš„æ•°ç»„ã€‚
        if (initialCapacity &amp;gt; 0) {
            this.elementData = new Object[initialCapacity];
        } else if (initialCapacity == 0) {
            //å¦åˆ™å¦‚æœä¼ å…¥å€¼ç­‰äº0ï¼Œåˆ™åˆ›å»ºé»˜è®¤ç©ºæ•°ç»„
            this.elementData = EMPTY_ELEMENTDATA;
        } else {
            //å¦‚æœå°äº0åˆ™æŠ›å‡ºå¼‚å¸¸
            throw new IllegalArgumentException(&amp;quot;Illegal Capacity: &amp;quot;+
                    initialCapacity);
        }
    }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬ä½¿ç”¨addæ–¹æ³•æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°è¯¥listä¸­ï¼Œlist.add(&amp;quot;Test&amp;quot;)ã€‚è¿›å…¥addæºç ä¼šå‘ç°ï¼ŒçœŸæ­£çš„æ‰©å®¹æ˜¯å‘ç”Ÿåœ¨addæ“ä½œä¹‹å‰çš„ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    //é»˜è®¤æ·»åŠ åœ¨æ•°ç»„æœ«å°¾
    public boolean add(E e) {
        //æ·»åŠ ä¹‹å‰å…ˆç¡®è®¤æ˜¯å¦éœ€è¦æ‰©å®¹
        ensureCapacityInternal(size + 1);  // Increments modCount!!
        //æ–°åŠ å…¥çš„å…ƒç´ æ˜¯æ·»åŠ åœ¨äº†æ•°ç»„çš„æœ«å°¾ï¼Œéšåæ•°ç»„sizeè‡ªå¢ã€‚
        elementData[size++] = e;
        return true;
    }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿›å…¥ensureCapacityInternal()æ–¹æ³•æŸ¥çœ‹å¯¹åº”æºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    private void ensureCapacityInternal(int minCapacity) {
        //å…ˆé€šè¿‡calculateCapacityæ–¹æ³•è®¡ç®—æœ€ç»ˆå®¹é‡ï¼Œä»¥ç¡®è®¤å®é™…å®¹é‡
        ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));
    }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè¿›å…¥calculateCapacity()æ–¹æ³•çœ‹çœ‹ä»–æ˜¯å¦‚ä½•è®¡ç®—æœ€åå®¹é‡çš„ï¼Œæºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    private static int calculateCapacity(Object[] elementData, int minCapacity) {
        //å¦‚æœelementDataä¸ºé»˜è®¤ç©ºæ•°ç»„ï¼Œåˆ™æ¯”è¾ƒä¼ å…¥å€¼ä¸é»˜è®¤å€¼ï¼ˆ10ï¼‰ï¼Œè¿”å›ä¸¤è€…ä¸­çš„è¾ƒå¤§å€¼
        //elementDataä¸ºé»˜è®¤ç©ºæ•°ç»„æŒ‡çš„æ˜¯é€šè¿‡ArrayList()è¿™ä¸ªæ„é€ å™¨åˆ›å»ºçš„ArrayListå¯¹è±¡
        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
            return Math.max(DEFAULT_CAPACITY, minCapacity);
        }
        //è¿”å›ä¼ å…¥å€¼
        return minCapacity;
    }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬ç¡®è®¤äº†æœ€ç»ˆå®¹é‡ï¼Œé‚£ä¹ˆè¿›å…¥ensureExplicitCapacityï¼ŒæŸ¥çœ‹æºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    private void ensureExplicitCapacity(int minCapacity) {
        modCount++;
        // overflow-conscious code
        //å¦‚æœæœ€ç»ˆç¡®è®¤å®¹é‡å¤§äºæ•°ç»„å®¹é‡ï¼Œåˆ™è¿›è¡Œgrow()æ‰©å®¹
        if (minCapacity - elementData.length &amp;gt; 0)
            grow(minCapacity);
    }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰å½“æœ€ç»ˆå®¹é‡å¤§äºæ•°ç»„å®¹é‡æ—¶æ‰ä¼šè¿›è¡Œæ‰©å®¹ã€‚é‚£ä¹ˆä»¥æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­è€Œè¨€å…·ä½“åˆ†æå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¦–å…ˆå› ä¸ºæˆ‘ä»¬åˆ›å»ºçš„æ—¶å€™å°±èµ‹äº†åˆå§‹å®¹é‡5ï¼Œæ‰€ä»¥elementData.length = 5ã€‚&lt;/li&gt;
&lt;li&gt;å½“æˆ‘ä»¬addç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼ŒminCapacityæ˜¯ç­‰äºsize + 1 = 1çš„ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶minCapacity - elementData.length &amp;gt; 0æ¡ä»¶ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥grow(minCapacity)æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚&lt;/li&gt;
&lt;li&gt;ä»¥æ­¤ç±»æ¨ï¼Œåªæœ‰æ·»åŠ åˆ°ç¬¬äº”ä¸ªå…ƒç´ çš„æ—¶å€™ï¼ŒminCapacity = 6 å¤§äº elementData.length = 5ï¼Œè¿™æ—¶å°±ä¼šè¿›å…¥grow(minCapacity)æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;grow()ä»¥åŠhugeCapacity()æºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    //å¯åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°
    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;

    //æ‰©å®¹
    private void grow(int minCapacity) {
        // overflow-conscious code
        //oldCapacityè¡¨ç¤ºæ—§å®¹é‡
        int oldCapacity = elementData.length;
        //newCapacityè¡¨ç¤ºæ–°å®¹é‡ï¼Œè®¡ç®—è§„åˆ™ä¸ºæ—§å®¹é‡+æ—§å®¹é‡çš„0.5ï¼Œå³æ—§å®¹é‡çš„1.5å€ã€‚å¦‚æœè¶…è¿‡intçš„æœ€å¤§å€¼ä¼šè¿”å›ä¸€ä¸ªè´Ÿæ•°ã€‚
        //oldCapacity &amp;gt;&amp;gt; 1è¡¨ç¤ºå³ç§»ä¸€ä½ï¼Œå¯¹åº”é™¤ä»¥2çš„1æ¬¡æ–¹ã€‚
        int newCapacity = oldCapacity + (oldCapacity &amp;gt;&amp;gt; 1);
        //å¦‚æœæ–°å®¹é‡å°äºæœ€å°å®¹é‡ï¼Œåˆ™å°†æœ€å°å®¹é‡èµ‹å€¼ç»™æ–°å®¹é‡(æœ‰æ—¶æ‰‹åŠ¨æ‰©å®¹å¯èƒ½ä¹Ÿä¼šè¿”å›&amp;lt;0ï¼Œå¯¹åº”æ–¹æ³•ä¸ºensureCapacity())
        if (newCapacity - minCapacity &amp;lt; 0)
            newCapacity = minCapacity;
        //å¦‚æœæ–°å®¹é‡å¤§äºMAX_ARRAY_SIZEï¼Œåˆ™æ‰§è¡ŒhugeCapacity(minCapacity)è¿”å›å¯¹åº”å€¼
        if (newCapacity - MAX_ARRAY_SIZE &amp;gt; 0)
            newCapacity = hugeCapacity(minCapacity);
        // minCapacity is usually close to size, so this is a win:
        //å¤åˆ¶æ—§æ•°ç»„åˆ°æ–°å®¹é‡æ•°ç»„ä¸­ï¼Œå®Œæˆæ‰©å®¹æ“ä½œ
        elementData = Arrays.copyOf(elementData, newCapacity);
    }

    private static int hugeCapacity(int minCapacity) {
        //å¦‚æœæœ€å°å®¹é‡è¶…è¿‡äº†intçš„æœ€å¤§å€¼ï¼ŒminCapacityä¼šæ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œæ­¤æ—¶æŠ›å‡ºå†…å­˜æº¢å‡ºé”™è¯¯
        if (minCapacity &amp;lt; 0) // overflow
            throw new OutOfMemoryError();
        //æ¯”è¾ƒæœ€å°å®¹é‡æ˜¯å¦å¤§äºMAX_ARRAY_SIZEï¼Œå¦‚æœæ˜¯åˆ™è¿”å›Integer.MAX_VALUEï¼Œå¦åˆ™è¿”å›MAX_ARRAY_SIZE
        return (minCapacity &amp;gt; MAX_ARRAY_SIZE) ?
                Integer.MAX_VALUE :
                MAX_ARRAY_SIZE;
    }

&lt;/code&gt;&lt;/pre&gt;
">ArrayListæºç è§£æ(JDK8)</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java-zhong-de-suo/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Javaä¸­çš„é”ï¼ŒåŒ…æ‹¬é”ç±»å‹ï¼Œé”å‡çº§ï¼Œé”ä¼˜åŒ–ç­‰ç»†èŠ‚å†…å®¹ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/railroad-g16c0f522b_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;é”çš„ç±»å‹&#34;&gt;é”çš„ç±»å‹&lt;/h2&gt;
&lt;h3 id=&#34;ä¹è§‚é”&#34;&gt;ä¹è§‚é”&lt;/h3&gt;
&lt;p&gt;ä¹è§‚é”è®¤ä¸ºè¯»å¤šå†™å°‘ï¼Œé‡åˆ°å¹¶å‘å†™çš„å¯èƒ½æ€§ä½ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚ä½†æ˜¯ï¼Œåœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»ä¿®æ”¹è¿™ä¸ªæ•°æ®ï¼Œé‡‡å–å†™æ—¶å…ˆè¯»å‡ºå½“å‰ç‰ˆæœ¬å·ï¼Œç„¶ååŠ é”æ“ä½œï¼ˆæ¯”è¾ƒä¸Šä¸€æ¬¡çš„ç‰ˆæœ¬å·ï¼Œä¸€è‡´åˆ™æ›´æ–°ï¼‰ï¼Œå¦‚æœå¤±è´¥åˆ™é‡å¤è¯»-æ¯”è¾ƒ-å†™æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;CASä¾¿æ˜¯å…¸å‹çš„ä¹è§‚é”æœºåˆ¶ï¼Œå…¶ä¸­ä¼šä½¿ç”¨åˆ°sun.misc.Unsafeè¿™ä¸ªç±»è¿›è¡ŒCompare And Swapæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;CAS å³æ¯”è¾ƒå¹¶äº¤æ¢ã€‚æ˜¯è§£å†³å¤šçº¿ç¨‹å¹¶è¡Œæƒ…å†µä¸‹ä½¿ç”¨é”é€ æˆæ€§èƒ½æŸè€—çš„ä¸€ç§æœºåˆ¶ï¼ŒCAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•°â€”â€”å†…å­˜ä½ç½®(V)ã€é¢„æœŸåŸå€¼(A)å’Œæ–°å€¼(B)ã€‚å¦‚æœå†…å­˜ä½ç½®çš„å€¼(V)ä¸é¢„æœŸåŸå€¼(A)ç›¸åŒ¹é…ï¼Œé‚£ä¹ˆå¤„ç†å™¨ä¼šè‡ªåŠ¨å°†è¯¥ä½ç½®å€¼æ›´æ–°ä¸ºæ–°å€¼(B)ã€‚å¦åˆ™ï¼Œå¤„ç†å™¨ä¸åšä»»ä½•æ“ä½œã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œå®ƒéƒ½ä¼šåœ¨ CAS æŒ‡ä»¤ä¹‹å‰è¿”å›è¯¥ä½ç½®çš„å€¼ã€‚CAS æœ‰æ•ˆåœ°è¯´æ˜äº†â€œæˆ‘è®¤ä¸ºä½ç½®(V)åº”è¯¥åŒ…å«å€¼(A)ã€‚å¦‚æœåŒ…å«è¯¥å€¼ï¼Œåˆ™å°†æ–°å€¼(B)æ”¾åˆ°è¿™ä¸ªä½ç½®ï¼›å¦åˆ™ï¼Œä¸è¦æ›´æ”¹è¯¥ä½ç½®ï¼Œåªå‘Šè¯‰æˆ‘è¿™ä¸ªä½ç½®ç°åœ¨çš„å€¼å³å¯â€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ‚²è§‚é”&#34;&gt;æ‚²è§‚é”&lt;/h3&gt;
&lt;p&gt;æ‚²è§‚é”è®¤ä¸ºå†™æ“ä½œæ›´å¤šï¼Œé‡åˆ°å¹¶å‘å†™çš„å¯èƒ½æ€§é«˜ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¼šåœ¨æ¯æ¬¡è¯»å†™çš„æ—¶å€™ä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³è¯»å†™è¿™ä¸ªæ•°æ®ä¾¿ä¼šblockç›´åˆ°è·å–é”ã€‚&lt;/p&gt;
&lt;p&gt;Synchronizedä¾¿æ˜¯å…¸å‹çš„æ‚²è§‚é”ï¼ŒAQSæ¡†æ¶ä¸‹çš„é”ä¼šå…ˆå°è¯•CASè·å–é”ï¼Œè·å–ä¸åˆ°ä¾¿ä¼šè½¬ä¸ºæ‚²è§‚é”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;çº¿ç¨‹åˆ‡æ¢åŠå…¶ä»£ä»·&#34;&gt;çº¿ç¨‹åˆ‡æ¢åŠå…¶ä»£ä»·&lt;/h2&gt;
&lt;h3 id=&#34;çº¿ç¨‹åˆ‡æ¢&#34;&gt;çº¿ç¨‹åˆ‡æ¢&lt;/h3&gt;
&lt;p&gt;javaçº¿ç¨‹ä¸æ“ä½œç³»ç»Ÿä¸Šçš„åŸç”Ÿçº¿ç¨‹æ˜¯ä¸€ä¸€æ˜ å°„çš„ã€‚å¦‚æœéœ€è¦é˜»å¡æˆ–è€…å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œä¾¿éœ€è¦æ“ä½œç³»ç»Ÿçš„ä»‹å…¥ï¼Œå¹¶åˆ‡æ¢ç”¨æˆ·æ€ä¸å†…æ ¸æ€ï¼ˆè¿™æ ·çš„åˆ‡æ¢éœ€è¦æ¶ˆè€—å¤§é‡çš„ç³»ç»Ÿèµ„æºï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€çš„æ­¥éª¤ä¸»è¦å¦‚ä¸‹&#34;&gt;ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€çš„æ­¥éª¤ä¸»è¦å¦‚ä¸‹&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ä»å½“å‰è¿›ç¨‹çš„æè¿°ç¬¦ä¸­æå–å…¶å†…æ ¸æ ˆçš„ss0åŠesp0ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ss0å’Œesp0æŒ‡å‘çš„å†…æ ¸æ ˆå°†å½“å‰è¿›ç¨‹çš„csï¼Œeipï¼Œeflagsï¼Œssï¼Œespä¿¡æ¯ä¿å­˜èµ·æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿå®Œæˆäº†ç”±ç”¨æˆ·æ€åˆ°å†…æ ¸æ ˆçš„åˆ‡æ¢è¿‡ç¨‹ï¼ŒåŒæ—¶ä¿å­˜äº†è¢«æš‚åœæ‰§è¡Œçš„ç¨‹åºçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;å°†å…ˆå‰ç”±ä¸­æ–­å‘é‡æ£€ç´¢å¾—åˆ°çš„ä¸­æ–­å¤„ç†ç¨‹åºçš„csï¼Œeipä¿¡æ¯è£…å…¥ç›¸åº”çš„å¯„å­˜å™¨ï¼Œå¼€å§‹æ‰§è¡Œä¸­æ–­å¤„ç†ç¨‹åºï¼Œè¿™æ—¶å°±è½¬åˆ°äº†å†…æ ¸æ€çš„ç¨‹åºæ‰§è¡Œäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;åè¯è§£é‡Šå¦‚ä¸‹&#34;&gt;åè¯è§£é‡Šå¦‚ä¸‹&lt;/h4&gt;
&lt;p&gt;CSï¼šä»£ç æ®µå¯„å­˜å™¨ï¼›å­˜æ”¾å½“å‰æ­£åœ¨è¿è¡Œçš„ç¨‹åºä»£ç æ‰€åœ¨æ®µçš„æ®µåŸºå€¼ï¼›è”åˆipä½œä¸ºcpuæŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œä¸èƒ½éšä¾¿ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;DSï¼šæ•°æ®æ®µå¯„å­˜å™¨ï¼›å­˜æ”¾æ•°æ®æ®µçš„æ®µåŸºå€¼ï¼›å®šä¹‰äº†ä¸€ä¸ªæ•°æ®æ®µã€‚&lt;/p&gt;
&lt;p&gt;SSï¼šå †æ ˆæ®µå¯„å­˜å™¨ï¼›å­˜æ”¾å †æ ˆæ®µçš„æ®µåŸºå€¼ï¼Œè”åˆspå®šä¹‰ä¸€ä¸ªå †æ ˆå€¼ï¼Œä¸€æ—¦ç¡®å®šäº†å †æ ˆåœ°å€ï¼Œå°†ä¸èƒ½éšä¾¿æ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;å†…æ ¸æ€åˆ‡æ¢åˆ°ç”¨æˆ·æ€ä¸»è¦ä½¿ç”¨PSWï¼ˆProgram Status Wordï¼Œç¨‹åºçŠ¶æ€å­—ï¼Œåˆç§°çŠ¶æ€å¯„å­˜å™¨ï¼‰ï¼Œå…¶ä¸€èˆ¬ç”¨äºåæ˜ å¤„ç†å™¨çš„çŠ¶æ€åŠæŸäº›è®¡ç®—ç»“æœä»¥åŠæ§åˆ¶æŒ‡ä»¤çš„æ‰§è¡Œï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301001.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;åˆ‡æ¢çš„ä»£ä»·&#34;&gt;åˆ‡æ¢çš„ä»£ä»·&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœçº¿ç¨‹åˆ‡æ¢æ˜¯ä¸€ä¸ªé«˜é¢‘æ“ä½œï¼Œé‚£å°†è€—è´¹å¾ˆå¤šCPUå¤„ç†æ—¶é—´ï¼ˆç”¨æˆ·æ€ï¼Œå†…æ ¸æ€ä¹‹é—´çš„åˆ‡æ¢ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç”šè‡³ï¼Œå¦‚æœåŒæ­¥ä»£ç å—ä¸­çš„å†…å®¹è¿‡äºç®€å•ï¼ŒçŠ¶æ€åˆ‡æ¢æ¶ˆè€—çš„æ—¶é—´æœ‰å¯èƒ½æ¯”ç”¨æˆ·ä»£ç æ‰§è¡Œçš„æ—¶é—´è¿˜è¦é•¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;javaå¯¹è±¡ç»“æ„ä¹‹å¯¹è±¡å¤´&#34;&gt;Javaå¯¹è±¡ç»“æ„ä¹‹å¯¹è±¡å¤´&lt;/h2&gt;
&lt;h3 id=&#34;å¯¹è±¡å¤´&#34;&gt;å¯¹è±¡å¤´&lt;/h3&gt;
&lt;p&gt;å¯¹è±¡å¤´ï¼ˆHeaderï¼‰ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼šç¬¬ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼ˆå¦‚å“ˆå¸Œç ï¼ˆHashCodeï¼‰ï¼ŒGCåˆ†ä»£å¹´é¾„ï¼Œé”çŠ¶æ€æ ‡å¿—ï¼Œçº¿ç¨‹æŒæœ‰çš„é”ï¼Œåå‘çº¿ç¨‹IDï¼Œåå‘æ—¶é—´æˆ³ç­‰ï¼Œè¿™éƒ¨åˆ†æ•°æ®é•¿åº¦åœ¨32ä½æˆ–è€…64ä½çš„è™šæ‹Ÿæœºä¸­åˆ†åˆ«ä¸º32bitä»¥åŠ64bitï¼Œå®˜æ–¹ç§°ä¹‹ä¸ºâ€œMark Wordâ€ï¼‰ï¼›&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒéƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¯¥å¯¹è±¡å±äºå“ªä¸ªç±»çš„å®ä¾‹ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæœºå®ç°éƒ½éœ€è¦åœ¨å¯¹è±¡æ•°æ®ä¸Šä¿ç•™ç±»å‹æŒ‡é’ˆï¼Œå³æŸ¥æ‰¾å¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯å¹¶ä¸ä¸€å®šè¦ç»è¿‡å¯¹è±¡æœ¬èº«ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªJavaæ•°ç»„ï¼Œé‚£ä¹ˆå¯¹è±¡å¤´è¿˜éœ€è¦è®°å½•è¯¥æ•°ç»„é•¿åº¦ï¼Œå› ä¸ºæ™®é€šçš„Javaå¯¹è±¡å¯ä»¥é€šè¿‡å…ƒæ•°æ®ä¿¡æ¯ç¡®è®¤å¯¹è±¡å¤§å°ï¼Œè€Œæ•°ç»„å´ä¸è¡Œã€‚&lt;/p&gt;
&lt;h3 id=&#34;markword&#34;&gt;MarkWord&lt;/h3&gt;
&lt;p&gt;markwordæ•°æ®çš„é•¿åº¦åœ¨32ä½å’Œ64ä½ï¼ˆæœªå¼€å¯å‹ç¼©æŒ‡é’ˆï¼‰çš„è™šæ‹Ÿæœºä¸­åˆ†åˆ«ä¸º32bitå’Œ64bitï¼Œå®ƒçš„æœ€åä¸¤ä½ä¾¿æ˜¯é”çŠ¶æ€æ ‡è¯†ä½ï¼Œç”¨æ¥æ ‡è®°å½“å‰å¯¹è±¡çš„çŠ¶æ€ï¼Œå¸¸ç”¨å€¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301002.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;32ä½è™šæ‹Ÿæœºåœ¨ä¸åŒçŠ¶æ€ä¸‹markwordçš„ç»“æ„å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301003.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;javaä¸­çš„é”&#34;&gt;Javaä¸­çš„é”&lt;/h2&gt;
&lt;h3 id=&#34;ä¸»æµé”å›¾&#34;&gt;ä¸»æµé”å›¾&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301004.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;è‡ªæ—‹é”åŸºäºcas&#34;&gt;è‡ªæ—‹é”ï¼ˆåŸºäºCASï¼‰&lt;/h3&gt;
&lt;p&gt;å¦‚æœæŒæœ‰é”çš„çº¿ç¨‹å¯ä»¥åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…é‡Šæ”¾é”ï¼Œé‚£ä¹ˆé‚£äº›ç­‰å¾…é”çš„çº¿ç¨‹ä¾¿ä¸éœ€è¦è¿›å…¥é˜»å¡æŒ‚èµ·çŠ¶æ€ï¼Œè€Œæ˜¯è‡ªæ—‹ç­‰å¾…ä¸€ä¼šå„¿ä¾¿å¯è·å–åˆ°åŒæ­¥èµ„æºï¼Œä»è€Œé¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œè¿™å°±æ˜¯è‡ªæ—‹é”ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªæ—‹é”æœ¬èº«æ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå®ƒä¸èƒ½ä»£æ›¿é˜»å¡ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªæ—‹é”è™½ç„¶é¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œä½†å…¶å æ®äº†CPUå¤„ç†å™¨æ—¶é—´ã€‚å¦‚æœé”è¢«å ç”¨çš„æ—¶é—´å¾ˆçŸ­ï¼Œè‡ªæ—‹ç­‰å¾…çš„æ•ˆæœå°±ä¼šéå¸¸å¥½ï¼›åä¹‹ï¼Œåˆ™ä¼šç™½ç™½æµªè´¹å¤„ç†å™¨èµ„æºã€‚ç”šè‡³ï¼Œå½“çº¿ç¨‹è¿‡å¤šæ—¶ï¼Œè¿˜ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œè‡ªæ—‹ç­‰å¾…çš„æ—¶é—´éœ€è¦æœ‰ä¸€ä¸ªé™åº¦ï¼Œå¦‚æœè¶…è¿‡é™å®šæ¬¡æ•°ï¼ˆé»˜è®¤10æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨-XX:PreBlockSpinæ¥æ›´æ”¹ï¼‰æ²¡æœ‰è·å–åˆ°é”ï¼Œåˆ™åº”å½“æŒ‚èµ·çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªæ—‹é”åœ¨JDK1.4.2ä¸­å¼•å…¥ï¼Œä½¿ç”¨-XX:+UseSpinningæ¥å¼€å¯ã€‚JDK 6ä¸­å˜ä¸ºé»˜è®¤å¼€å¯ï¼Œå¹¶ä¸”å¼•å…¥äº†è‡ªé€‚åº”çš„è‡ªæ—‹é”ï¼ˆé€‚åº”æ€§è‡ªæ—‹é”ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªé€‚åº”æ„å‘³ç€è‡ªæ—‹çš„æ—¶é—´ï¼ˆæ¬¡æ•°ï¼‰ä¸å†å›ºå®šï¼Œè€Œæ˜¯ç”±å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ—¶é—´åŠé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€æ¥å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨åŒä¸€ä¸ªé”å¯¹è±¡ä¸Šï¼Œè‡ªæ—‹ç­‰å¾…åˆšåˆšæˆåŠŸè·å¾—è¿‡é”ï¼Œå¹¶ä¸”æŒæœ‰é”çš„çº¿ç¨‹æ­£åœ¨è¿è¡Œä¸­ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°±ä¼šè®¤ä¸ºè¿™æ¬¡è‡ªæ—‹ä¹Ÿæ˜¯å¾ˆæœ‰å¯èƒ½å†æ¬¡æˆåŠŸï¼Œè¿›è€Œå®ƒå°†å…è®¸è‡ªæ—‹ç­‰å¾…æŒç»­ç›¸å¯¹æ›´é•¿çš„æ—¶é—´ã€‚å¦‚æœå¯¹äºæŸä¸ªé”ï¼Œè‡ªæ—‹å¾ˆå°‘æˆåŠŸè·å¾—è¿‡ï¼Œé‚£åœ¨ä»¥åå°è¯•è·å–è¿™ä¸ªé”æ—¶å°†å¯èƒ½çœç•¥æ‰è‡ªæ—‹è¿‡ç¨‹ï¼Œç›´æ¥é˜»å¡çº¿ç¨‹ï¼Œé¿å…æµªè´¹å¤„ç†å™¨èµ„æºã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301005.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;jvmé’ˆå¯¹å½“å‰cpuçš„è´Ÿè·æƒ…å†µè¿˜åšäº†å¦‚ä¸‹è‡ªæ—‹é”ä¼˜åŒ–æ“ä½œ&#34;&gt;JVMé’ˆå¯¹å½“å‰CPUçš„è´Ÿè·æƒ…å†µè¿˜åšäº†å¦‚ä¸‹è‡ªæ—‹é”ä¼˜åŒ–æ“ä½œï¼š&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœå¹³å‡è´Ÿè½½å°äºCPUsåˆ™ä¸€ç›´è‡ªæ—‹&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰è¶…è¿‡(CPUs/2)ä¸ªçº¿ç¨‹æ­£åœ¨è‡ªæ—‹ï¼Œåˆ™åæ¥çº¿ç¨‹ç›´æ¥é˜»å¡&lt;/li&gt;
&lt;li&gt;å¦‚æœæ­£åœ¨è‡ªæ—‹çš„çº¿ç¨‹å‘ç°Ownerå‘ç”Ÿäº†å˜åŒ–åˆ™å»¶è¿Ÿè‡ªæ—‹æ—¶é—´ï¼ˆè‡ªæ—‹è®¡æ•°ï¼‰æˆ–è¿›å…¥é˜»å¡&lt;/li&gt;
&lt;li&gt;å¦‚æœCPUå¤„äºèŠ‚ç”µæ¨¡å¼åˆ™åœæ­¢è‡ªæ—‹&lt;/li&gt;
&lt;li&gt;è‡ªæ—‹æ—¶é—´çš„æœ€åæƒ…å†µæ˜¯CPUçš„å­˜å‚¨å»¶è¿Ÿï¼ˆCPU Aå­˜å‚¨äº†ä¸€ä¸ªæ•°æ®ï¼Œåˆ°CPU Bå¾—çŸ¥è¿™ä¸ªæ•°æ®ç›´æ¥çš„æ—¶é—´å·®ï¼‰&lt;/li&gt;
&lt;li&gt;è‡ªæ—‹æ—¶ä¼šé€‚å½“æ”¾å¼ƒçº¿ç¨‹ä¼˜å…ˆçº§ä¹‹é—´çš„å·®å¼‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;synchronizedæ— é”åå‘é”è½»é‡çº§é”é‡é‡çº§é”&#34;&gt;Synchronizedï¼ˆæ— é”ï¼Œåå‘é”ï¼Œè½»é‡çº§é”ï¼Œé‡é‡çº§é”ï¼‰&lt;/h3&gt;
&lt;h4 id=&#34;synchronizedé˜Ÿåˆ—&#34;&gt;Synchronizedé˜Ÿåˆ—&lt;/h4&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301006.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œsynchronizedæœ‰å¤šä¸ªé˜Ÿåˆ—ï¼Œå½“å¤šä¸ªçº¿ç¨‹ä¸€èµ·è®¿é—®æŸä¸ªå¯¹è±¡ç›‘è§†å™¨ï¼ˆmonitorï¼Œå…¶æ˜¯ä¾èµ–äºåº•å±‚çš„æ“ä½œç³»ç»Ÿçš„Mutex Lockï¼ˆäº’æ–¥é”ï¼‰æ¥å®ç°çš„çº¿ç¨‹åŒæ­¥ï¼‰ï¼‰çš„æ—¶å€™ï¼Œå¯¹è±¡ç›‘è§†å™¨ä¼šå°†è¿™äº›çº¿ç¨‹å­˜å‚¨åœ¨ä¸åŒçš„å®¹å™¨é‡Œã€‚&lt;/p&gt;
&lt;h5 id=&#34;ç»“æ„æ¦‚è¿°&#34;&gt;ç»“æ„æ¦‚è¿°&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;ContentionListï¼šç«äº‰é˜Ÿåˆ—ï¼Œæ‰€æœ‰è¯·æ±‚é”çš„çº¿ç¨‹é¦–å…ˆä¼šè¢«æ”¾å…¥æ­¤é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;EntryListï¼šContentionListä¸­ä¸€äº›æœ‰èµ„æ ¼è·å–åŒæ­¥èµ„æºçš„çº¿ç¨‹å°†è¢«ç§»åŠ¨åˆ°æ­¤é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;WaitSetï¼šè°ƒç”¨waitæ–¹æ³•è¢«é˜»å¡çš„çº¿ç¨‹ï¼Œæ”¾äºæ­¤å¤„ã€‚&lt;/li&gt;
&lt;li&gt;OnDeckï¼šä»»ä½•æ—¶åˆ»ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ç«äº‰é”ï¼Œè¯¥çº¿ç¨‹ä¾¿æ˜¯OnDeckã€‚&lt;/li&gt;
&lt;li&gt;Ownerï¼šå·²ç»è·å–åˆ°é”çš„çº¿ç¨‹è¢«ç§°ä¸ºOwnerã€‚&lt;/li&gt;
&lt;li&gt;!Ownerï¼šå·²ç»é‡Šæ”¾é”çš„çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;é˜Ÿåˆ—åä½œè¿‡ç¨‹&#34;&gt;é˜Ÿåˆ—åä½œè¿‡ç¨‹&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;JVMæ¯æ¬¡éƒ½ä¼šä»é˜Ÿåˆ—å°¾éƒ¨å–å‡ºä¸€ä¸ªçº¿ç¨‹ç”¨äºé”ç«äº‰å€™é€‰è€…ï¼ˆOnDeckï¼‰ï¼Œä½†æ˜¯å¹¶å‘æƒ…å†µä¸‹ï¼ŒContentionListä¼šè¢«å¤§é‡çš„çº¿ç¨‹è¿›è¡ŒCASè®¿é—®ï¼Œä¸ºäº†é™ä½å¯¹å°¾éƒ¨å…ƒç´ çš„ç«äº‰ï¼ŒJVMä¼šå°†ä¸€éƒ¨åˆ†çº¿ç¨‹ç§»åŠ¨åˆ°EntryListä¸­ä½œä¸ºå€™é€‰ç«äº‰çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;Owneråœ¨unlockæ—¶ï¼Œä¹Ÿä¼šå°†ContentionListä¸­çš„éƒ¨åˆ†çº¿ç¨‹è¿ç§»åˆ°EntryListï¼Œå¹¶æŒ‡å®šEntryListä¸­çš„æŸä¸ªçº¿ç¨‹ä¸ºOndeckï¼ˆä¸€èˆ¬æ˜¯æœ€å…ˆè¿›å»çš„çº¿ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;Ownerä¸ä¼šç›´æ¥å°†é”ä¼ é€’ç»™OnDeckï¼Œè€Œæ˜¯å°†é”ç«äº‰çš„æƒåˆ©äº¤ç»™OnDeckï¼ŒOnDeckéœ€è¦é‡æ–°å»ç«äº‰é”ã€‚è¿™æ ·è™½ç„¶ç‰ºç‰²äº†ä¸€äº›å…¬å¹³æ€§ï¼Œä½†èƒ½æå¤§çš„æé«˜ç³»ç»Ÿååé‡ï¼Œåœ¨JVMä¸­ï¼Œè¿™ç§é€‰æ‹©è¡Œä¸ºè¢«ç§°ä¸ºâ€œç«äº‰åˆ‡æ¢â€ã€‚&lt;/li&gt;
&lt;li&gt;OnDeckè·å–åˆ°é”åå°±ä¼šå˜ä¸ºOwnerï¼Œè€Œæ²¡æœ‰å¾—åˆ°é”çš„åˆ™ä»ç„¶åœç•™åœ¨EntryListï¼›å¦‚æœOnDeckçº¿ç¨‹è¢«waité˜»å¡ï¼Œåˆ™ä¼šè¢«ç§»åŠ¨è‡³WaitSetï¼Œç›´åˆ°æŸä¸ªæ—¶åˆ»è¢«notifyæˆ–notifyAllå”¤é†’ï¼Œæ‰èƒ½é‡æ–°è¿›å…¥EntryLIstã€‚&lt;/li&gt;
&lt;li&gt;å¤„äºContentionListã€EntryListã€WaitSetä¸­çš„çº¿ç¨‹éƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œè¯¥é˜»å¡æ˜¯ç”±æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ï¼ˆLinuxå†…æ ¸ä¸‹é‡‡ç”¨pthread_mutex_lockå†…æ ¸å‡½æ•°å®ç°çš„ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ— é”cas&#34;&gt;æ— é”ï¼ˆCASï¼‰&lt;/h4&gt;
&lt;p&gt;æ— é”æ²¡æœ‰å¯¹èµ„æºè¿›è¡Œé”å®šï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½èƒ½è®¿é—®å¹¶ä¿®æ”¹åŒä¸€ä¸ªèµ„æºï¼Œä½†åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä¿®æ”¹æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;æ— é”çš„ç‰¹ç‚¹å°±æ˜¯ä¿®æ”¹æ“ä½œåœ¨å¾ªç¯å†…è¿›è¡Œï¼Œçº¿ç¨‹ä¼šä¸æ–­çš„å°è¯•ä¿®æ”¹å…±äº«èµ„æºã€‚å¦‚æœæ²¡æœ‰å†²çªå°±ä¿®æ”¹æˆåŠŸå¹¶é€€å‡ºï¼Œå¦åˆ™å°±ä¼šç»§ç»­å¾ªç¯å°è¯•ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ä¿®æ”¹åŒä¸€ä¸ªå€¼ï¼Œå¿…å®šä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä¿®æ”¹æˆåŠŸï¼Œè€Œå…¶ä»–ä¿®æ”¹å¤±è´¥çš„çº¿ç¨‹ä¼šä¸æ–­é‡è¯•ç›´åˆ°ä¿®æ”¹æˆåŠŸã€‚æ— é”æ— æ³•å…¨é¢ä»£æ›¿æœ‰é”ï¼Œä½†æ— é”åœ¨æŸäº›åœºåˆä¸‹çš„æ€§èƒ½æ˜¯éå¸¸é«˜çš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åå‘é”&#34;&gt;åå‘é”&lt;/h4&gt;
&lt;p&gt;åå‘é”æ˜¯æŒ‡ä¸€æ®µåŒæ­¥ä»£ç ä¸€ç›´è¢«ä¸€ä¸ªçº¿ç¨‹æ‰€è®¿é—®ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ä¾¿ä¼šè‡ªåŠ¨è·å–é”ï¼Œé™ä½äº†è·å–é”çš„ä»£ä»·ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œåˆ™çº¿ç¨‹ä¸éœ€è¦è§¦å‘åŒæ­¥ï¼Œæ­¤æ—¶ä¸ºäº†æé«˜çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç çš„æ•ˆç‡ï¼Œä¾¿å‡ºç°äº†åå‘é”ã€‚&lt;/p&gt;
&lt;h5 id=&#34;åå‘é”æ‰§è¡Œè¿‡ç¨‹&#34;&gt;åå‘é”æ‰§è¡Œè¿‡ç¨‹&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;è®¿é—®MarkWordä¸­åå‘é”çš„æ ‡è¯†ä½æ˜¯å¦è®¾ç½®ä¸º1ï¼Œé”æ ‡è¯†ä½æ˜¯å¦è®¾ç½®ä¸º01ï¼Œç¡®è®¤ä¸ºå¯åå‘çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸ºå¯åå‘çŠ¶æ€ï¼Œåˆ™åˆ¤æ–­çº¿ç¨‹idæ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›å…¥æ­¥éª¤5ï¼Œå¦åˆ™è¿›å…¥æ­¥éª¤3ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœçº¿ç¨‹idæœªæŒ‡å‘å½“å‰çº¿ç¨‹ï¼Œåˆ™é€šè¿‡CASæ“ä½œç«äº‰é”ï¼Œå¦‚æœç«äº‰æˆåŠŸï¼Œåˆ™å°†MarkWordä¸­çš„çº¿ç¨‹idè®¾ç½®ä¸ºå½“å‰çº¿ç¨‹idï¼Œç„¶åæ‰§è¡Œæ­¥éª¤5ï¼Œå¦åˆ™è¿›å…¥æ­¥éª¤4ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœCASè·å–é”å¤±è´¥ï¼Œåˆ™è¡¨ç¤ºå­˜åœ¨é”ç«äº‰ã€‚å½“åˆ°è¾¾å…¨å±€å®‰å…¨ç‚¹ï¼ˆsafepointï¼Œä¼šå¯¼è‡´å¾ˆçŸ­æ—¶é—´çš„stop-the-worldï¼‰æ—¶ï¼Œè·å–åå‘é”çš„çº¿ç¨‹å°†è¢«æŒ‚èµ·ï¼Œåå‘é”å‡çº§ä¸ºè½»é‡çº§é”ï¼Œç„¶åè¢«é˜»å¡åœ¨å®‰å…¨ç‚¹çš„çº¿ç¨‹ç»§ç»­å¾€ä¸‹æ‰§è¡ŒåŒæ­¥ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;æ‰§è¡ŒåŒæ­¥ä»£ç ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;åå‘é”çš„é‡Šæ”¾&#34;&gt;åå‘é”çš„é‡Šæ”¾&lt;/h5&gt;
&lt;p&gt;åå‘é”åªæœ‰é‡åˆ°å…¶ä»–çº¿ç¨‹å°è¯•ç«äº‰åå‘é”æ—¶ï¼ŒæŒæœ‰åå‘é”çš„çº¿ç¨‹æ‰ä¼šé‡Šæ”¾é”ï¼Œçº¿ç¨‹ä¸ä¼šä¸»åŠ¨å»é‡Šæ”¾åå‘é”ã€‚&lt;/p&gt;
&lt;p&gt;åå‘é”çš„æ’¤é”€ï¼Œéœ€è¦ç­‰å¾…å…¨å±€å®‰å…¨ç‚¹ï¼ˆåœ¨è¿™ä¸ªæ—¶é—´ç‚¹ä¸Šæ²¡æœ‰å­—èŠ‚ç æ­£åœ¨æ‰§è¡Œï¼‰ï¼Œå®ƒä¼šé¦–å…ˆæš‚åœæ‹¥æœ‰åå‘é”çš„çº¿ç¨‹ï¼Œåˆ¤æ–­é”å¯¹è±¡æ˜¯å¦å¤„äºè¢«é”å®šçŠ¶æ€ï¼Œæ’¤é”€åå‘é”åæ¢å¤åˆ°æœªé”å®šï¼ˆæ ‡å¿—ä½ä¸ºâ€œ01â€ï¼‰æˆ–è½»é‡çº§é”ï¼ˆæ ‡å¿—ä½ä¸ºâ€œ00â€ï¼‰çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h5 id=&#34;åå‘é”é€‚ç”¨åœºæ™¯&#34;&gt;åå‘é”é€‚ç”¨åœºæ™¯&lt;/h5&gt;
&lt;p&gt;å§‹ç»ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œåŒæ­¥èµ„æºï¼Œä¹Ÿå°±æ˜¯é”æ— ç«äº‰çŠ¶å†µä¸‹ä½¿ç”¨ã€‚ä¸€æ—¦æœ‰äº†ç«äº‰ï¼Œåå‘é”ä¾¿ä¼šå‡çº§ä¸ºè½»é‡çº§é”ï¼ˆå‡çº§éœ€è¦æ’¤é”€åå‘é”ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šstop-the-worldï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå­˜åœ¨é«˜å¹¶å‘é”ç«äº‰ï¼Œåº”å½“ç¦ç”¨åå‘é”ï¼Œè¿™æ ·å¯ä»¥é€‚å½“æé«˜ç¨‹åºæ€§èƒ½ã€‚&lt;/p&gt;
&lt;h5 id=&#34;jvmå¼€å¯å…³é—­åå‘é”&#34;&gt;jvmå¼€å¯/å…³é—­åå‘é”&lt;/h5&gt;
&lt;p&gt;å¼€å¯åå‘é”ï¼š-XX:+UseBiasedLocking -XX:BiasedLockingStartupDelay=0&lt;br&gt;
ï¼ˆ-XX:BiasedLockingStartupDelay=0çš„ä½œç”¨æ˜¯åœ¨è™šæ‹Ÿæœºå¯åŠ¨åï¼Œç«‹å³å¯ç”¨åå‘é”ï¼Œå¦‚æœä¸è®¾ç½®è¯¥å‚æ•°ï¼Œé»˜è®¤è™šæ‹Ÿä¼šåœ¨4ç§’åï¼Œæ‰å¯åŠ¨åå‘é”ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;å…³é—­åå‘é”ï¼š-XX:-UseBiasedLocking&lt;/p&gt;
&lt;h4 id=&#34;è½»é‡çº§é”&#34;&gt;è½»é‡çº§é”&lt;/h4&gt;
&lt;p&gt;è½»é‡çº§é”æ˜¯ç”±åå‘é”å‡çº§è€Œæ¥çš„ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æŒæœ‰åå‘é”æ‰§è¡ŒåŒæ­¥å—æ—¶ï¼Œå­˜åœ¨å¦å¤–çš„çº¿ç¨‹æ¥ç«äº‰é”ï¼Œè¿™æ—¶åå‘é”ä¾¿ä¼šå‡çº§ä¸ºè½»é‡çº§é”ã€‚&lt;/p&gt;
&lt;p&gt;è½»é‡çº§é”æ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;aã€åœ¨ä»£ç è¿›å…¥åŒæ­¥å—çš„æ—¶å€™ï¼Œå¦‚æœåŒæ­¥å¯¹è±¡çŠ¶æ€ä¸ºæ— é”çŠ¶æ€ï¼ˆé”æ ‡è¯†ä½ï¼š01ï¼Œæ˜¯å¦åå‘é”æ ‡è¯†ä½ï¼š0ï¼‰ï¼Œè™šæ‹Ÿæœºé¦–å…ˆä¼šåœ¨å½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­å»ºç«‹ä¸€ä¸ªåä¸ºé”è®°å½•ï¼ˆLock Recordï¼‰çš„ç©ºé—´ï¼Œç”¨äºå­˜å‚¨å¯¹è±¡ç›®å‰çš„MarkWordçš„æ‹·è´ï¼ˆå®˜æ–¹ç§°ä¹‹ä¸ºDisplaced Mark Wordï¼‰ã€‚çº¿ç¨‹å †æ ˆä¸å¯¹è±¡å¤´çŠ¶æ€å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301007.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;bã€æ‹·è´å¯¹è±¡å¤´çš„MarkWordå¤åˆ¶åˆ°é”è®°å½•ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;cã€æ‹·è´æˆåŠŸåï¼Œè™šæ‹Ÿæœºå°†ä½¿ç”¨CASæ“ä½œå°è¯•å°†å¯¹è±¡çš„MarkWordæ›´æ–°ä¸ºæŒ‡å‘Lock Recordçš„æŒ‡é’ˆï¼Œå¹¶å°†Lock Recordä¸­çš„owneræŒ‡é’ˆæŒ‡å‘object mark wordï¼Œå¦‚æœæ›´æ–°æˆåŠŸï¼Œåˆ™æ‰§è¡Œæ­¥éª¤dï¼Œå¦åˆ™æ‰§è¡Œæ­¥éª¤eã€‚&lt;/p&gt;
&lt;p&gt;dã€æ›´æ–°æˆåŠŸåï¼Œè¯¥çº¿ç¨‹ä¾¿æ‹¥æœ‰äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶å¯¹è±¡MarkWordä¸­çš„é”æ ‡è¯†ä½å°†è¢«è®¾ç½®ä¸ºâ€˜00â€™ï¼Œè¡¨ç¤ºæ­¤å¯¹è±¡å¤„äºè½»é‡çº§é”å®šçŠ¶æ€ã€‚çº¿ç¨‹å †æ ˆä¸å¯¹è±¡å¤´çŠ¶æ€å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301008.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;eã€å¦‚æœè¿™ä¸ªæ›´æ–°æ“ä½œå¤±è´¥äº†ï¼Œè™šæ‹Ÿæœºé¦–å…ˆä¼šæ£€æŸ¥å¯¹è±¡çš„MarkWordæ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹çš„æ ˆå¸§ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¡¨ç¤ºå½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œé‚£å°±å¯ä»¥ç›´æ¥è¿›å…¥åŒæ­¥å—ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™è¯´æ˜æœ‰å¤šä¸ªçº¿ç¨‹åœ¨ç«äº‰é”ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥å½“å‰åªæœ‰ä¸€ä¸ªç­‰å¾…çº¿ç¨‹ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›è¡Œè‡ªæ—‹ç­‰å¾…ï¼Œå½“è‡ªæ—‹è¶…è¿‡é˜ˆå€¼ï¼Œæˆ–è€…ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ï¼Œä¸€ä¸ªåœ¨è‡ªæ—‹ï¼Œåˆæœ‰ç¬¬ä¸‰ä¸ªæ¥è®¿é—®é”æ—¶ï¼Œè½»é‡çº§é”ä¾¿ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚&lt;/p&gt;
&lt;p&gt;é”çš„æ ‡è¯†ä½å°†è¢«è®¾ç½®ä¸ºâ€˜10â€™ï¼ŒMarkWordä¸­å­˜å‚¨çš„å°±æ˜¯æŒ‡å‘é‡é‡çº§é”ï¼ˆäº’æ–¥é‡ï¼‰çš„æŒ‡é’ˆï¼Œåé¢ç­‰å¾…é”çš„çº¿ç¨‹ä¹Ÿä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ•´ä½“æ‰§è¡Œè¿‡ç¨‹&#34;&gt;æ•´ä½“æ‰§è¡Œè¿‡ç¨‹&lt;/h4&gt;
&lt;h5 id=&#34;é”å‡çº§æµç¨‹å›¾&#34;&gt;é”å‡çº§æµç¨‹å›¾ï¼š&lt;/h5&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301009.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h5 id=&#34;synchronizedæ‰§è¡Œè¿‡ç¨‹&#34;&gt;synchronizedæ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;æ£€æµ‹Mark Wordä¸­çš„é”æ ‡è¯†æ˜¯å¦ä¸ºå¯åå‘çŠ¶æ€ï¼ˆé”æ ‡è¯†ä½ï¼š01ï¼Œæ˜¯å¦åå‘é”ï¼š1ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸ºåå‘é”ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸æ˜¯ï¼Œåˆ™æ£€æŸ¥Mark Wordé‡Œé¢çš„çº¿ç¨‹idæ˜¯ä¸æ˜¯å½“å‰çº¿ç¨‹çš„IDï¼Œå¦‚æœæ˜¯ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹å¤„äºåå‘é”&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸æ˜¯ï¼Œåˆ™ä½¿ç”¨CASå°†å½“å‰çº¿ç¨‹çš„IDæ›¿æ¢Mard Wordï¼Œå¦‚æœæˆåŠŸåˆ™è¡¨ç¤ºå½“å‰çº¿ç¨‹è·å¾—åå‘é”ï¼Œç½®åå‘æ ‡å¿—ä½1&lt;/li&gt;
&lt;li&gt;å¦‚æœå¤±è´¥ï¼Œåˆ™è¯´æ˜å‘ç”Ÿç«äº‰ï¼Œæ’¤é”€åå‘é”ï¼Œè¿›è€Œå‡çº§ä¸ºè½»é‡çº§é”ã€‚&lt;/li&gt;
&lt;li&gt;å½“å‰çº¿ç¨‹ä½¿ç”¨CASå°†å¯¹è±¡å¤´çš„Mark Wordæ›¿æ¢ä¸ºé”è®°å½•æŒ‡é’ˆï¼Œå¦‚æœæˆåŠŸï¼Œå½“å‰çº¿ç¨‹è·å¾—é”&lt;/li&gt;
&lt;li&gt;å¦‚æœå¤±è´¥ï¼Œè¡¨ç¤ºå…¶ä»–çº¿ç¨‹ç«äº‰é”ï¼Œå½“å‰çº¿ç¨‹ä¾¿å°è¯•ä½¿ç”¨è‡ªæ—‹æ¥è·å–é”ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè‡ªæ—‹æˆåŠŸåˆ™ä¾ç„¶å¤„äºè½»é‡çº§çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè‡ªæ—‹å¤±è´¥ï¼Œåˆ™å‡çº§ä¸ºé‡é‡çº§é”ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;é”ä¼˜åŒ–&#34;&gt;é”ä¼˜åŒ–&lt;/h3&gt;
&lt;h4 id=&#34;å‡å°‘é”çš„æ—¶é—´&#34;&gt;å‡å°‘é”çš„æ—¶é—´&lt;/h4&gt;
&lt;p&gt;ä¸éœ€è¦åŒæ­¥æ‰§è¡Œçš„ä»£ç ï¼Œå°½é‡ä¸è¦æ”¾åœ¨åŒæ­¥å—ä¸­ï¼Œè¿™æ ·å¯ä»¥è®©é”æ›´å¿«çš„é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å‡å°‘é”çš„ç²’åº¦&#34;&gt;å‡å°‘é”çš„ç²’åº¦&lt;/h4&gt;
&lt;p&gt;é”ç²’åº¦çš„å‡å°‘æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œå®ƒå°†ç‰©ç†ä¸Šçš„ä¸€ä¸ªé”ï¼Œæ‹†åˆ†ä¸ºé€»è¾‘ä¸Šçš„å¤šä¸ªé”ï¼Œå¢åŠ å¹¶å‘åº¦ï¼Œä»è€Œé™ä½äº†é”ç«äº‰ã€‚&lt;/p&gt;
&lt;p&gt;å…¸å‹ä»£è¡¨æœ‰ï¼šConcurrentHashMapï¼ˆjdk1.8ä¹‹å‰ï¼Œæœ‰ç”¨åˆ°Segmentæ•°ç»„ï¼‰ï¼›LongAdderï¼ˆå®ç°æœºåˆ¶ä¸ConcurrentHashMapç±»ä¼¼ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ ¹æ®å½“å‰å¹¶å‘çŠ¶æ€åŠ¨æ€æ”¹å˜çš„Cellæ•°ç»„ï¼Œæ³¨æ„ï¼šå…¶ç«äº‰ç»´åº¦ä¸ºcellä¸ªæ•°+1ï¼Œå› ä¸ºè¿˜æœ‰ä¸€ä¸ªbaseæ•°ç»„ï¼‰ï¼›LinkedBlockQueueï¼ˆå‡ºé˜Ÿï¼Œå…¥é˜Ÿé‡‡ç”¨äº†ä¸åŒçš„é”ï¼Œå¢åŠ äº†å¹¶è¡Œæ•ˆç‡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é”çš„æ‹†åˆ†ä¸èƒ½æ— é™æ‹†ï¼Œéœ€è¦æ ¹æ®å½“å‰ç³»ç»ŸCPUæ ¸æ•°è¿›è¡Œé™åˆ¶ï¼ˆä¸èƒ½è¶…è¿‡CPUæ ¸æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;é”ç²—åŒ–&#34;&gt;é”ç²—åŒ–&lt;/h4&gt;
&lt;p&gt;å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ˜¯è¦æ±‚å°†é”ç²’åº¦å‡å°ï¼Œä½†æŸäº›æƒ…å†µä¸‹ï¼Œä¹Ÿéœ€è¦ç²—åŒ–é”ç²’åº¦ï¼Œæ¯”å¦‚å¾ªç¯ä¸­åŠ é”ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä½¿ç”¨è¯»å†™é”&#34;&gt;ä½¿ç”¨è¯»å†™é”&lt;/h4&gt;
&lt;p&gt;ReentrantReadWriteLock æ˜¯ä¸€ä¸ªè¯»å†™é”ï¼Œè¯»æ“ä½œåŠ è¯»é”ï¼Œå¯ä»¥å¹¶å‘è¯»ï¼Œå†™æ“ä½œä½¿ç”¨å†™é”ï¼Œåªèƒ½å•çº¿ç¨‹å†™ã€‚ä¾‹å¦‚ï¼šCopyOnWriteArrayList ã€CopyOnWriteArraySet&lt;/p&gt;
&lt;p&gt;CopyOnWriteå®¹å™¨å³å†™æ—¶å¤åˆ¶çš„å®¹å™¨ã€‚é€šä¿—çš„ç†è§£æ˜¯å½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¾€å½“å‰å®¹å™¨æ·»åŠ ï¼Œè€Œæ˜¯å…ˆå°†å½“å‰å®¹å™¨è¿›è¡ŒCopyï¼Œå¤åˆ¶å‡ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œç„¶åæ–°çš„å®¹å™¨é‡Œæ·»åŠ å…ƒç´ ï¼Œæ·»åŠ å®Œå…ƒç´ ä¹‹åï¼Œå†å°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°çš„å®¹å™¨ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥å¯¹CopyOnWriteå®¹å™¨è¿›è¡Œå¹¶å‘çš„è¯»ï¼Œè€Œä¸éœ€è¦åŠ é”ï¼Œå› ä¸ºå½“å‰å®¹å™¨ä¸ä¼šæ·»åŠ ä»»ä½•å…ƒç´ ã€‚æ‰€ä»¥CopyOnWriteå®¹å™¨ä¹Ÿæ˜¯ä¸€ç§è¯»å†™åˆ†ç¦»çš„æ€æƒ³ï¼Œè¯»å’Œå†™ä¸åŒçš„å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;CopyOnWriteå¹¶å‘å®¹å™¨ç”¨äºè¯»å¤šå†™å°‘çš„å¹¶å‘åœºæ™¯ï¼Œå› ä¸ºï¼Œè¯»çš„æ—¶å€™æ²¡æœ‰é”ï¼Œä½†æ˜¯å¯¹å…¶è¿›è¡Œæ›´æ”¹çš„æ—¶å€™æ˜¯ä¼šåŠ é”çš„ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹åŒæ—¶å¤åˆ¶å‡ºå¤šä¸ªå‰¯æœ¬ï¼Œå„è‡ªä¿®æ”¹å„è‡ªçš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä½¿ç”¨cas&#34;&gt;ä½¿ç”¨CAS&lt;/h4&gt;
&lt;p&gt;å¦‚æœéœ€è¦åŒæ­¥çš„æ“ä½œæ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œå¹¶ä¸”çº¿ç¨‹ç«äº‰å¹¶ä¸æ¿€çƒˆï¼Œè¿™æ—¶å€™ä½¿ç”¨casæ•ˆç‡ä¼šæ›´é«˜ï¼Œå› ä¸ºåŠ é”ä¼šå¯¼è‡´çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¦‚æœä¸Šä¸‹æ–‡åˆ‡æ¢çš„è€—æ—¶æ¯”åŒæ­¥æ“ä½œæœ¬èº«æ›´è€—æ—¶ï¼Œä¸”çº¿ç¨‹å¯¹èµ„æºçš„ç«äº‰ä¸æ¿€çƒˆï¼Œä½¿ç”¨volatiled+casæ“ä½œä¼šæ˜¯éå¸¸é«˜æ•ˆçš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ¶ˆé™¤ç¼“å­˜è¡Œçš„ä¼ªå…±äº«&#34;&gt;æ¶ˆé™¤ç¼“å­˜è¡Œçš„ä¼ªå…±äº«&lt;/h4&gt;
&lt;p&gt;é™¤äº†æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨çš„åŒæ­¥é”å’Œjvmè‡ªå·±å†…ç½®çš„åŒæ­¥é”å¤–ï¼Œè¿˜æœ‰ä¸€ç§éšè—çš„é”å°±æ˜¯ç¼“å­˜è¡Œï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºæ€§èƒ½æ€æ‰‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¤šæ ¸cupçš„å¤„ç†å™¨ä¸­ï¼Œæ¯ä¸ªcupéƒ½æœ‰è‡ªå·±ç‹¬å çš„ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜ï¼Œç”šè‡³è¿˜æœ‰ä¸€ä¸ªå…±äº«çš„ä¸‰çº§ç¼“å­˜ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œcpuè¯»å†™æ•°æ®æ˜¯ä»¥ç¼“å­˜è¡Œä¸ºæœ€å°å•å…ƒè¯»å†™çš„ï¼›32ä½çš„cpuç¼“å­˜è¡Œä¸º32å­—èŠ‚ï¼Œ64ä½cupçš„ç¼“å­˜è¡Œä¸º64å­—èŠ‚ï¼Œè¿™å°±å¯¼è‡´äº†ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå¤šä¸ªä¸éœ€è¦åŒæ­¥çš„å˜é‡å› ä¸ºå­˜å‚¨åœ¨è¿ç»­çš„32å­—èŠ‚æˆ–64å­—èŠ‚é‡Œé¢ï¼Œå½“éœ€è¦å…¶ä¸­çš„ä¸€ä¸ªå˜é‡æ—¶ï¼Œå°±å°†å®ƒä»¬ä½œä¸ºä¸€ä¸ªç¼“å­˜è¡Œä¸€èµ·åŠ è½½åˆ°æŸä¸ªcup-1ç§æœ‰çš„ç¼“å­˜ä¸­ï¼ˆè™½ç„¶åªéœ€è¦ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯cpuè¯»å–ä¼šä»¥ç¼“å­˜è¡Œä¸ºæœ€å°å•ä½ï¼Œå°†å…¶ç›¸é‚»çš„å˜é‡ä¸€èµ·è¯»å…¥ï¼‰ï¼Œè¢«è¯»å…¥cpuç¼“å­˜çš„å˜é‡ç›¸å½“äºæ˜¯å¯¹ä¸»å†…å­˜å˜é‡çš„ä¸€ä¸ªæ‹·è´ï¼Œä¹Ÿç›¸å½“äºå˜ç›¸çš„å°†åœ¨åŒä¸€ä¸ªç¼“å­˜è¡Œä¸­çš„å‡ ä¸ªå˜é‡åŠ äº†ä¸€æŠŠé”ï¼Œè¿™ä¸ªç¼“å­˜è¡Œä¸­ä»»ä½•ä¸€ä¸ªå˜é‡å‘ç”Ÿäº†å˜åŒ–ï¼Œå½“cup-2éœ€è¦è¯»å–è¿™ä¸ªç¼“å­˜è¡Œæ—¶ï¼Œå°±éœ€è¦å…ˆå°†cup-1ä¸­è¢«æ”¹å˜äº†çš„æ•´ä¸ªç¼“å­˜è¡Œæ›´æ–°å›ä¸»å­˜ï¼ˆå³ä½¿å…¶å®ƒå˜é‡æ²¡æœ‰æ›´æ”¹ï¼‰ï¼Œç„¶åcup-2æ‰èƒ½å¤Ÿè¯»å–ï¼Œè€Œcup-2å¯èƒ½éœ€è¦æ›´æ”¹è¿™ä¸ªç¼“å­˜è¡Œçš„å˜é‡ä¸cpu-1å·²ç»æ›´æ”¹çš„ç¼“å­˜è¡Œä¸­çš„å˜é‡æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™ç›¸å½“äºç»™å‡ ä¸ªæ¯«ä¸ç›¸å…³çš„å˜é‡åŠ äº†ä¸€æŠŠåŒæ­¥é”ï¼›&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢ä¼ªå…±äº«ï¼Œä¸åŒjdkç‰ˆæœ¬å®ç°æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨jdk1.7ä¹‹å‰ä¼š å°†éœ€è¦ç‹¬å ç¼“å­˜è¡Œçš„å˜é‡å‰åæ·»åŠ ä¸€ç»„longç±»å‹çš„å˜é‡ï¼Œä¾é è¿™äº›æ— æ„ä¹‰çš„æ•°ç»„çš„å¡«å……åšåˆ°ä¸€ä¸ªå˜é‡è‡ªå·±ç‹¬å ä¸€ä¸ªç¼“å­˜è¡Œï¼›&lt;/li&gt;
&lt;li&gt;åœ¨jdk1.7å› ä¸ºjvmä¼šå°†è¿™äº›æ²¡æœ‰ç”¨åˆ°çš„å˜é‡ä¼˜åŒ–æ‰ï¼Œæ‰€ä»¥é‡‡ç”¨ç»§æ‰¿ä¸€ä¸ªå£°æ˜äº†å¥½å¤šlongå˜é‡çš„ç±»çš„æ–¹å¼æ¥å®ç°ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨jdk1.8ä¸­é€šè¿‡æ·»åŠ sun.misc.Contendedæ³¨è§£æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè‹¥è¦ä½¿è¯¥æ³¨è§£æœ‰æ•ˆå¿…é¡»åœ¨jvmä¸­æ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š-XX:-RestrictContendedã€‚sun.misc.Contendedæ³¨è§£ä¼šåœ¨å˜é‡å‰é¢æ·»åŠ 128å­—èŠ‚çš„paddingå°†å½“å‰å˜é‡ä¸å…¶ä»–å˜é‡è¿›è¡Œéš”ç¦»&lt;/li&gt;
&lt;/ol&gt;
">Javaä¸­çš„é”</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java-xian-cheng-chi-xiang-jie/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Javaä¸­å…³äºçº¿ç¨‹æ± çš„ä¼˜åŠ¿ï¼Œå‚æ•°è¯´æ˜ä»¥åŠå¸¸ç”¨çº¿ç¨‹æ•°é…ç½®ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/beach-gc2b0bd8e5_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;çº¿ç¨‹æ± &#34;&gt;çº¿ç¨‹æ± &lt;/h2&gt;
&lt;h3 id=&#34;çº¿ç¨‹æ± çš„ä¼˜åŠ¿&#34;&gt;çº¿ç¨‹æ± çš„ä¼˜åŠ¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é™ä½ç³»ç»Ÿèµ„æºæ¶ˆè€—ï¼šé€šè¿‡é‡ç”¨å·²å­˜åœ¨çš„çº¿ç¨‹ï¼Œé™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯æ‰€é€ æˆçš„èµ„æºæ¶ˆè€—ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›ç³»ç»Ÿå“åº”é€Ÿåº¦ï¼šå½“ä»»åŠ¡æ¥ä¸´æ—¶ï¼Œç›´æ¥å¤ç”¨å·²å­˜åœ¨çš„çº¿ç¨‹è¿›è¡Œå·¥ä½œï¼Œè€Œæ— éœ€ç­‰å¾…çº¿ç¨‹çš„åˆ›å»ºã€‚&lt;/li&gt;
&lt;li&gt;æ–¹ä¾¿çº¿ç¨‹æ•°çš„ç®¡æ§ï¼šè¿‡å¤šçš„çº¿ç¨‹åˆ›å»ºï¼Œä¼šå¯¼è‡´æ€§èƒ½çš„æ€¥å‰§ä¸‹é™ï¼ˆçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ååˆ†è€—è´¹æ€§èƒ½ï¼‰ï¼Œç”šè‡³å‡ºç°OOMã€‚&lt;/li&gt;
&lt;li&gt;æä¾›æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦‚å»¶æ—¶å®šæ—¶çº¿ç¨‹æ± ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;çº¿ç¨‹æ± çš„ä¸»è¦å‚æ•°&#34;&gt;çº¿ç¨‹æ± çš„ä¸»è¦å‚æ•°&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;public ThreadPoolExecutor(int corePoolSize,
                          int maximumPoolSize,
                          long keepAliveTime,
                          TimeUnit unit,
                          BlockingQueue&amp;lt;Runnable&amp;gt; workQueue,
                          ThreadFactory threadFactory,
                          RejectedExecutionHandler handler)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;corePoolSizeï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¸€ç›´å­˜æ´»åœ¨çº¿ç¨‹æ± ä¸­ï¼Œå³ä½¿å®ƒä»¬å¤„äºé—²ç½®çŠ¶æ€ï¼ˆå¯é€šè¿‡allowCoreThreadTimeOutè¿›è¡Œæ§åˆ¶ï¼‰ã€‚å½“å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œè‹¥çº¿ç¨‹æ± å·²åˆ›å»ºçš„çº¿ç¨‹æ•°å°äºcorePoolSizeï¼Œå³ä¾¿æ­¤æ—¶å­˜åœ¨ç©ºé—²çº¿ç¨‹ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç›´åˆ°åˆ›å»ºçš„çº¿ç¨‹æ•°å¤§äºæˆ–ç­‰äºcorePoolSizeæ—¶æ‰è¿›è¡Œçº¿ç¨‹å¤ç”¨ï¼ˆå¯é€šè¿‡prestartCoreThread()æˆ–è€…prestartAllCoreThreads()æ¥æå‰å¯åŠ¨çº¿ç¨‹æ± ä¸­çš„åŸºæœ¬çº¿ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œå½“é˜Ÿåˆ—æ»¡äº†ï¼Œä¸”å·²åˆ›å»ºçº¿ç¨‹æ•°å°äºmaximumPoolSizeæ—¶ï¼Œçº¿ç¨‹æ± ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;keepAliveTimeï¼šçº¿ç¨‹é—²ç½®æ—¶é•¿ï¼Œè¶…è¿‡æ­¤æ—¶é•¿å°†ä¼šè¢«é”€æ¯ã€‚é»˜è®¤åªå¯¹éæ ¸å¿ƒçº¿ç¨‹ç”Ÿæ•ˆï¼Œåªæœ‰å½“ThreadPoolExecutorä¸­çš„allowCoreThreadTimeOutè®¾ç½®ä¸ºtrueæ—¶ï¼Œæ‰ä¼šå¯¹æ ¸å¿ƒçº¿ç¨‹ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;unitï¼šç”¨äºæŒ‡å®škeepAliveTimeå‚æ•°çš„æ—¶é—´å•ä½ã€‚&lt;/li&gt;
&lt;li&gt;workQueueï¼šå·¥ä½œé˜Ÿåˆ—ï¼Œç”¨äºä¿å­˜ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—ã€‚é€šè¿‡çº¿ç¨‹æ± çš„executeæ–¹æ³•æäº¤çš„Runnableå¯¹è±¡éƒ½ä¼šå­˜å‚¨åœ¨è¯¥é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;ArrayBlockingQueueï¼šåŸºäºæ•°ç»„å®ç°çš„æœ‰ç•Œçš„é˜»å¡é˜Ÿåˆ—,è¯¥é˜Ÿåˆ—æŒ‰ç…§FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰åŸåˆ™å¯¹é˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚&lt;/li&gt;
&lt;li&gt;LinkedBlockingQueueï¼šåŸºäºé“¾è¡¨å®ç°çš„é˜»å¡é˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—æŒ‰ç…§FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰åŸåˆ™å¯¹é˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚&lt;/li&gt;
&lt;li&gt;SynchronousQueueï¼šå†…éƒ¨æ²¡æœ‰ä»»ä½•å®¹é‡çš„é˜»å¡é˜Ÿåˆ—ã€‚åœ¨å®ƒå†…éƒ¨æ²¡æœ‰ä»»ä½•çš„ç¼“å­˜ç©ºé—´ã€‚å¯¹äºSynchronousQueueä¸­çš„æ•°æ®å…ƒç´ åªæœ‰å½“æˆ‘ä»¬è¯•ç€å–èµ°çš„æ—¶å€™æ‰å¯èƒ½å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;PriorityBlockingQueueï¼šå…·æœ‰ä¼˜å…ˆçº§çš„æ— é™é˜»å¡é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡å®ç°BlockingQueueæ¥å£æ¥è‡ªå®šä¹‰æ‰€éœ€è¦çš„é˜»å¡é˜Ÿåˆ—&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;threadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºæ–°çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;handlerï¼šæ‹’ç»ç­–ç•¥ï¼Œå½“çº¿ç¨‹æ± é¥±å’Œæ—¶ï¼ˆä»»åŠ¡é˜Ÿåˆ—ä»¥åŠæ´»åŠ¨çº¿ç¨‹æ•°éƒ½å·²è¾¾åˆ°æœ€å¤§å€¼ï¼‰ï¼Œæ­¤æ—¶ä¾¿ä¼šæ‰§è¡Œå¯¹åº”çš„æ‹’ç»ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;CallerRunsPolicyï¼šä½¿ç”¨è°ƒç”¨è€…æ‰€åœ¨çº¿ç¨‹æ¥è¿è¡Œä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;AbortPolicyï¼šç›´æ¥æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;DiscardPolicyï¼šä¸¢å¼ƒæ‰è¯¥ä»»åŠ¡ï¼Œä¸è¿›è¡Œå¤„ç†&lt;/li&gt;
&lt;li&gt;DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—é‡Œæœ€è¿‘çš„ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œå½“å‰ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;çº¿ç¨‹æ± æµç¨‹å›¾&#34;&gt;çº¿ç¨‹æ± æµç¨‹å›¾&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœåœ¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡æ²¡æœ‰è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œè¿™æ—¶å€™å°±ä¼šå¯åŠ¨ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼ˆç­‰äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œä¼šå¤ç”¨çº¿ç¨‹æ± ä¸­å·²å­˜åœ¨çš„çº¿ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å·²ç»è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œè¿™æ—¶å€™ä»»åŠ¡å°±ä¼šè¢«æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•å°†ä»»åŠ¡æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡æ²¡æœ‰è¾¾åˆ°çº¿ç¨‹æ± æ‰€è®¾å®šçš„æœ€å¤§å€¼ï¼ˆmaximumPoolSizeï¼‰ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¼šç«‹å³å¯åŠ¨ä¸€ä¸ªéæ ¸å¿ƒçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœçº¿ç¨‹æ± ä¸­çš„æ•°é‡è¾¾åˆ°äº†æ‰€è§„å®šçš„æœ€å¤§å€¼ï¼ˆmaximumPoolSizeï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šæ‹’ç»æ‰§è¡Œæ­¤ä»»åŠ¡ï¼Œè¿™æ—¶å€™å°±ä¼šè°ƒç”¨RejectedExecutionHandlerä¸­çš„rejectedExecutionæ–¹æ³•æ¥é€šçŸ¥è°ƒç”¨è€…ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230228001.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;å››ç§çº¿ç¨‹æ± ä¸€èˆ¬ä¸æ¨èä½¿ç”¨&#34;&gt;å››ç§çº¿ç¨‹æ± ï¼ˆä¸€èˆ¬ä¸æ¨èä½¿ç”¨ï¼‰&lt;/h3&gt;
&lt;p&gt;1ã€newCachedThreadPoolï¼šç”¨æ¥åˆ›å»ºä¸€ä¸ªå¯ä»¥æ— é™æ‰©å¤§çš„çº¿ç¨‹æ± ï¼Œé€‚ç”¨äºè´Ÿè½½è¾ƒè½»çš„åœºæ™¯ï¼Œæ‰§è¡ŒçŸ­æœŸå¼‚æ­¥ä»»åŠ¡ã€‚ï¼ˆå¯ä»¥ä½¿å¾—ä»»åŠ¡å¿«é€Ÿå¾—åˆ°æ‰§è¡Œï¼Œå› ä¸ºä»»åŠ¡æ—¶é—´æ‰§è¡ŒçŸ­ï¼Œå¯ä»¥å¾ˆå¿«ç»“æŸï¼Œä¹Ÿä¸ä¼šé€ æˆcpuè¿‡åº¦åˆ‡æ¢ï¼‰ï¼Œæ— ç•Œçº¿ç¨‹æ± ï¼Œå®¹æ˜“å‘ç”ŸOOMã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static ExecutorService newCachedThreadPool() {
    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,
                                  60L, TimeUnit.SECONDS,
                                  new SynchronousQueue&amp;lt;Runnable&amp;gt;());
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€newFixedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œå› ä¸ºé‡‡ç”¨æ— ç•Œçš„é˜»å¡é˜Ÿåˆ—ï¼Œæ‰€ä»¥å®é™…çº¿ç¨‹æ•°é‡æ°¸è¿œä¸ä¼šå˜åŒ–ï¼Œé€‚ç”¨äºè´Ÿè½½è¾ƒé‡çš„åœºæ™¯ï¼Œå¯¹å½“å‰çº¿ç¨‹æ•°é‡è¿›è¡Œé™åˆ¶ã€‚ï¼ˆä¿è¯çº¿ç¨‹æ•°å¯æ§ï¼Œä¸ä¼šé€ æˆçº¿ç¨‹è¿‡å¤šï¼Œå¯¼è‡´ç³»ç»Ÿè´Ÿè½½æ›´ä¸ºä¸¥é‡ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static ExecutorService newFixedThreadPool(int nThreads) {
    return new ThreadPoolExecutor(nThreads, nThreads,
                                  0L, TimeUnit.MILLISECONDS,
                                  new LinkedBlockingQueue&amp;lt;Runnable&amp;gt;());
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€newSingleThreadExecutorï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œé€‚ç”¨äºéœ€è¦ä¿è¯é¡ºåºæ‰§è¡Œå„ä¸ªä»»åŠ¡ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static ExecutorService newSingleThreadExecutor() {
    return new FinalizableDelegatedExecutorService
        (new ThreadPoolExecutor(1, 1,
                                0L, TimeUnit.MILLISECONDS,
                                new LinkedBlockingQueue&amp;lt;Runnable&amp;gt;()));
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€newScheduledThreadPoolï¼šé€‚ç”¨äºæ‰§è¡Œå»¶æ—¶æˆ–è€…å‘¨æœŸæ€§ä»»åŠ¡.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize) {
    return new ScheduledThreadPoolExecutor(corePoolSize);
}
public ScheduledThreadPoolExecutor(int corePoolSize) {
    super(corePoolSize, Integer.MAX_VALUE, 0, NANOSECONDS,
          new DelayedWorkQueue());
}
//å®ä¾‹ï¼š
ScheduledExecutorService service = Executors.newScheduledThreadPool(4);
service.schedule(() -&amp;gt; System.out.println(Thread.currentThread().getName()+&amp;quot;å»¶è¿Ÿä¸‰ç§’æ‰§è¡Œ&amp;quot;), 3, TimeUnit.SECONDS);
service.scheduleAtFixedRate(() -&amp;gt; System.out.println(Thread.currentThread().getName()+&amp;quot;å»¶è¿Ÿä¸‰ç§’åæ¯éš”2ç§’æ‰§è¡Œ&amp;quot;), 3, 2, TimeUnit.SECONDS);

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;schedule(Runnable command, long delay, TimeUnit unit)ï¼šå»¶è¿Ÿä¸€å®šæ—¶é—´åæ‰§è¡ŒRunnableä»»åŠ¡ï¼›&lt;/p&gt;
&lt;p&gt;schedule(Callable callable, long delay, TimeUnit unit)ï¼šå»¶è¿Ÿä¸€å®šæ—¶é—´åæ‰§è¡ŒCallableä»»åŠ¡ï¼›&lt;/p&gt;
&lt;p&gt;scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit)ï¼šå»¶è¿Ÿä¸€å®šæ—¶é—´åï¼Œä»¥é—´éš”periodæ—¶é—´çš„é¢‘ç‡å‘¨æœŸæ€§åœ°æ‰§è¡Œä»»åŠ¡(å›ºå®šé¢‘ç‡çš„å«ä¹‰å°±æ˜¯å¯èƒ½è®¾å®šçš„å›ºå®šæ—¶é—´ä¸è¶³ä»¥å®Œæˆçº¿ç¨‹ä»»åŠ¡ï¼Œä½†æ˜¯å®ƒä¸ç®¡ï¼Œè¾¾åˆ°è®¾å®šçš„å»¶è¿Ÿæ—¶é—´äº†å°±è¦æ‰§è¡Œä¸‹ä¸€æ¬¡äº†)ï¼›&lt;/p&gt;
&lt;p&gt;scheduleWithFixedDelay(Runnable command, long initialDelay, long delay,TimeUnit unit)ï¼šä¸scheduleAtFixedRate()æ–¹æ³•å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯scheduleWithFixedDelay()æ–¹æ³•çš„å‘¨æœŸæ—¶é—´é—´éš”æ˜¯ä»¥ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œç»“æŸåˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œçš„é—´éš”ï¼Œè€ŒscheduleAtFixedRate()æ–¹æ³•çš„å‘¨æœŸæ—¶é—´é—´éš”æ˜¯ä»¥ä¸Šä¸€ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œçš„é—´éš”ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸€äº›ä»»åŠ¡ç³»åˆ—çš„è§¦å‘æ—¶é—´éƒ½æ˜¯å¯é¢„çŸ¥çš„.&lt;/p&gt;
&lt;h3 id=&#34;çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é…ç½®&#34;&gt;çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é…ç½®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;CPUå¯†é›†å‹ä»»åŠ¡ï¼šçº¿ç¨‹æ± ä¸­çº¿ç¨‹ä¸ªæ•°åº”å°½é‡å°‘ï¼Œå¦‚é…ç½®N+1ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼›&lt;/li&gt;
&lt;li&gt;IOå¯†é›†å‹ä»»åŠ¡ï¼šç”±äºIOæ“ä½œé€Ÿåº¦è¿œä½äºCPUé€Ÿåº¦ï¼Œé‚£ä¹ˆåœ¨è¿è¡Œè¿™ç±»ä»»åŠ¡æ—¶ï¼ŒCPUç»å¤§å¤šæ•° æ—¶é—´å¤„äºç©ºé—²çŠ¶æ€ï¼Œé‚£ä¹ˆçº¿ç¨‹æ± å¯ä»¥é…ç½®å°½é‡å¤šäº›çš„çº¿ç¨‹ï¼Œä»¥æé«˜CPUåˆ©ç”¨ç‡ï¼Œå¦‚2*Nï¼›&lt;/li&gt;
&lt;li&gt;æ··åˆå‹ä»»åŠ¡ï¼šå¯ä»¥æ‹†åˆ†ä¸ºCPUå¯†é›†å‹ä»»åŠ¡å’ŒIOå¯†é›†å‹ä»»åŠ¡ï¼Œå½“è¿™ä¸¤ç±»ä»»åŠ¡æ‰§è¡Œæ—¶é—´ç›¸å·®æ— å‡ æ—¶ï¼Œé€šè¿‡æ‹†åˆ†å†æ‰§è¡Œçš„ååç‡é«˜äºä¸²è¡Œæ‰§è¡Œçš„ååç‡ï¼Œä½†è‹¥è¿™ä¸¤ç±»ä»»åŠ¡æ‰§è¡Œæ—¶é—´æœ‰æ•°æ®çº§çš„å·®è·ï¼Œé‚£ä¹ˆæ²¡æœ‰æ‹†åˆ†çš„æ„ä¹‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
">Javaçº¿ç¨‹æ± è¯¦è§£</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/shu-ju-jie-gou-ji-chu-zhi-shi/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°æ•°æ®ç»“æ„çš„åŸºæœ¬çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ•°ç»„ï¼Œé˜Ÿåˆ—ï¼Œæ ˆï¼Œé“¾è¡¨ï¼Œæ•£åˆ—è¡¨ï¼Œå›¾ï¼Œæ ‘ï¼Œå †ç­‰åŸºæœ¬ä»‹ç»ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/maldives-3220702_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;æ•°æ®ç»“æ„åŸºç¡€çŸ¥è¯†&#34;&gt;æ•°æ®ç»“æ„åŸºç¡€çŸ¥è¯†&lt;/h2&gt;
&lt;h3 id=&#34;æ•°ç»„array&#34;&gt;æ•°ç»„ï¼ˆArrayï¼‰&lt;/h3&gt;
&lt;p&gt;æ•°ç»„æ˜¯ä¸€ç§èšåˆæ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯å°†å…·æœ‰ç›¸åŒç±»å‹çš„è‹¥å¹²å˜é‡æœ‰åºåœ°ç»„åˆåœ¨ä¸€èµ·çš„é›†åˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ˆstack&#34;&gt;æ ˆï¼ˆStackï¼‰&lt;/h3&gt;
&lt;p&gt;åˆç§°å †æ ˆï¼Œå®ƒæ˜¯ä¸€ç§è¿ç®—å—é™çš„çº¿æ€§è¡¨ï¼Œå³é™å®šåœ¨è¡¨å°¾è¿›è¡Œæ’å…¥åˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚è¿™ä¸€ç«¯è¢«ç§°ä¸ºæ ˆé¡¶ï¼Œç›¸å¯¹åœ°ï¼ŒæŠŠå¦ä¸€ç«¯ç§°ä¸ºæ ˆåº•ã€‚å‘ä¸€ä¸ªæ ˆæ’å…¥æ–°å…ƒç´ åˆç§°ä½œè¿›æ ˆã€å…¥æ ˆæˆ–å‹æ ˆï¼Œå®ƒæ˜¯æŠŠæ–°å…ƒç´ æ”¾åˆ°æ ˆé¡¶å…ƒç´ çš„ä¸Šé¢ï¼Œä½¿ä¹‹æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ï¼›ä»ä¸€ä¸ªæ ˆåˆ é™¤å…ƒç´ åˆç§°ä½œå‡ºæ ˆæˆ–é€€æ ˆï¼Œå®ƒæ˜¯æŠŠæ ˆé¡¶å…ƒç´ åˆ é™¤æ‰ï¼Œä½¿å…¶ç›¸é‚»çš„å…ƒç´ æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;æ ˆä½œä¸ºä¸€ç§&lt;a href=&#34;https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84&#34;&gt;æ•°æ®ç»“æ„&lt;/a&gt;ï¼Œæ˜¯ä¸€ç§åªèƒ½åœ¨ä¸€ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„ç‰¹æ®Š&lt;a href=&#34;https://baike.baidu.com/item/%E7%BA%BF%E6%80%A7%E8%A1%A8&#34;&gt;çº¿æ€§è¡¨&lt;/a&gt;ã€‚å®ƒæŒ‰ç…§å…ˆè¿›åå‡ºçš„åŸåˆ™å­˜å‚¨æ•°æ®ï¼Œå…ˆè¿›å…¥çš„æ•°æ®è¢«å‹å…¥æ ˆåº•ï¼Œæœ€åçš„æ•°æ®åœ¨æ ˆé¡¶ï¼Œéœ€è¦è¯»æ•°æ®çš„æ—¶å€™ä»æ ˆé¡¶å¼€å§‹å¼¹å‡ºæ•°æ®ï¼ˆæœ€åä¸€ä¸ªæ•°æ®è¢«ç¬¬ä¸€ä¸ªè¯»å‡ºæ¥ï¼‰ã€‚æ ˆå…·æœ‰è®°å¿†ä½œç”¨ï¼Œå¯¹æ ˆçš„æ’å…¥ä¸åˆ é™¤æ“ä½œä¸­ï¼Œä¸éœ€è¦æ”¹å˜æ ˆåº•&lt;a href=&#34;https://baike.baidu.com/item/%E6%8C%87%E9%92%88&#34;&gt;æŒ‡é’ˆ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230302001.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;é˜Ÿåˆ—queue&#34;&gt;é˜Ÿåˆ—ï¼ˆQueueï¼‰&lt;/h3&gt;
&lt;p&gt;æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œå…¶ç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒåªå…è®¸åœ¨è¡¨çš„å‰ç«¯ï¼ˆfrontï¼‰è¿›è¡Œåˆ é™¤æ“ä½œï¼Œè¡¨çš„åç«¯ï¼ˆrearï¼‰è¿›è¡Œæ’å…¥æ“ä½œï¼ˆé¡ºåºé˜Ÿåˆ—ï¼Œå¾ªç¯é˜Ÿåˆ—ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å’Œæ ˆä¸€æ ·ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§æ“ä½œå—é™åˆ¶çš„çº¿æ€§è¡¨ï¼Œè¿›è¡Œæ’å…¥æ“ä½œçš„ç«¯è¢«ç§°ä¸ºé˜Ÿå°¾ï¼Œè€Œåˆ é™¤æ“ä½œçš„ç«¯è¢«ç§°ä¸ºé˜Ÿå¤´ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230302002.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;é“¾è¡¨linked-list&#34;&gt;é“¾è¡¨ï¼ˆLinked Listï¼‰&lt;/h3&gt;
&lt;p&gt;æ˜¯ä¸€ç§æ•°æ®å…ƒç´ æŒ‰ç…§é“¾å¼å­˜å‚¨ç»“æ„ï¼ˆè¿™ç§ç»“æ„å…·æœ‰éè¿ç»­æ€§å­˜å‚¨çš„ç‰¹ç‚¹ï¼‰è¿›è¡Œå­˜å‚¨çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;é“¾è¡¨ç”±ä¸€ç³»åˆ—æ•°æ®ç»“ç‚¹æ„æˆï¼Œæ¯ä¸ªæ•°æ®ç»“ç‚¹éƒ½åŒ…æ‹¬æ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸä¸¤éƒ¨åˆ†ã€‚å…¶ä¸­ï¼ŒæŒ‡é’ˆåŸŸä¿å­˜äº†æ•°æ®ç»“æ„ä¸­ä¸‹ä¸€ä¸ªå…ƒç´ å­˜æ”¾çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;é“¾è¡¨ç»“æ„ä¸­æ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡æŒ‡é’ˆåŸŸè¿æ¥æ¬¡åºæ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230302003.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;æ•£åˆ—è¡¨hash-table&#34;&gt;æ•£åˆ—è¡¨ï¼ˆHash Tableï¼‰&lt;/h3&gt;
&lt;p&gt;æ•£åˆ—è¡¨æºè‡ªäºæ•£åˆ—å‡½æ•°ï¼ˆHash Functionï¼‰ï¼Œå…¶æ€æƒ³æ˜¯å¦‚æœåœ¨ç»“æ„ä¸­å­˜åœ¨å…³é”®å­—å’ŒTç›¸ç­‰çš„è®°å½•ï¼Œé‚£ä¹ˆå¿…å®šå¯ä»¥åœ¨F(T)çš„ä½ç½®æ‰¾åˆ°è¯¥è®°å½•ï¼Œè¿™æ ·ä¾¿ä¸ç”¨è¿›è¡Œæ¯”è¾ƒæ“ä½œï¼Œå°±å¯ç›´æ¥å–åˆ°æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨çš„æ„é€ æ•£åˆ—å‡½æ•°æœ‰ï¼šç›´æ¥å®šå€æ³•ï¼Œæ•°å­—åˆ†ææ³•ï¼Œå¹³æ–¹å–å€¼ï¼ŒæŠ˜å æ³•ï¼Œé™¤ç•™ä½™æ•°æ³•ï¼Œéšæœºæ•°æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ‘tree&#34;&gt;æ ‘ï¼ˆTreeï¼‰&lt;/h3&gt;
&lt;p&gt;æ˜¯ç”±n(n&amp;gt;0)ä¸ªæœ‰é™ç»“ç‚¹ç»„æˆä¸€ä¸ªå…·æœ‰å±‚æ¬¡å…³ç³»çš„é›†åˆã€‚éçº¿æ€§ç»“æ„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å®ƒå…·æœ‰å¦‚ä¸‹ç‰¹æ€§&#34;&gt;å®ƒå…·æœ‰å¦‚ä¸‹ç‰¹æ€§&lt;/h4&gt;
&lt;p&gt;aã€æ¯ä¸ªèŠ‚ç‚¹æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;bã€æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸ºæ ¹èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;cã€æ¯ä¸€ä¸ªéæ ¹èŠ‚ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;dã€é™¤äº†æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹å¯ä»¥åˆ†ä¸ºå¤šä¸ªä¸ç›¸äº¤çš„å­æ ‘ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç§ç±»&#34;&gt;ç§ç±»&lt;/h4&gt;
&lt;p&gt;æ— åºæ ‘ï¼šæ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å­ç»“ç‚¹ä¹‹é—´æ²¡æœ‰é¡ºåºå…³ç³»ï¼Œè¿™ç§æ ‘ç§°ä¸ºæ— åºæ ‘,ä¹Ÿç§°ä¸ºè‡ªç”±æ ‘ï¼›&lt;/p&gt;
&lt;p&gt;æœ‰åºæ ‘ï¼šæ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å­ç»“ç‚¹ä¹‹é—´æœ‰é¡ºåºå…³ç³»ï¼Œè¿™ç§æ ‘ç§°ä¸ºæœ‰åºæ ‘ï¼›&lt;/p&gt;
&lt;p&gt;äºŒå‰æ ‘ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå«æœ‰ä¸¤ä¸ªå­æ ‘çš„æ ‘ç§°ä¸ºäºŒå‰æ ‘ï¼›&lt;/p&gt;
&lt;p&gt;æ»¡äºŒå‰æ ‘ï¼šå¶èŠ‚ç‚¹é™¤å¤–çš„æ‰€æœ‰èŠ‚ç‚¹å‡å«æœ‰ä¸¤ä¸ªå­æ ‘çš„æ ‘è¢«ç§°ä¸ºæ»¡äºŒå‰æ ‘ï¼›&lt;/p&gt;
&lt;p&gt;å®Œå…¨äºŒå‰æ ‘ï¼šæœ‰2^k-1ä¸ªèŠ‚ç‚¹çš„æ»¡äºŒå‰æ ‘ç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ï¼›&lt;/p&gt;
&lt;p&gt;å“ˆå¤«æ›¼æ ‘ï¼ˆæœ€ä¼˜äºŒå‰æ ‘ï¼‰ï¼šå¸¦æƒè·¯å¾„æœ€çŸ­çš„äºŒå‰æ ‘ç§°ä¸ºå“ˆå¤«æ›¼æ ‘æˆ–æœ€ä¼˜äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;h4 id=&#34;éå†è¡¨è¾¾æ³•&#34;&gt;éå†è¡¨è¾¾æ³•&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://baike.baidu.com/item/%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/6442839&#34;&gt;å…ˆåºéå†&lt;/a&gt;ï¼ˆåˆç§°å…ˆæ ¹éå†ï¼‰ä¸ºABDECFï¼ˆæ ¹-å·¦-å³ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://baike.baidu.com/item/%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/757281&#34;&gt;ä¸­åºéå†&lt;/a&gt;ï¼ˆåˆç§°ä¸­æ ¹éå†ï¼‰ä¸ºDBEAFCï¼ˆå·¦-æ ¹-å³ï¼‰ï¼ˆä»…äºŒå‰æ ‘æœ‰&lt;a href=&#34;https://baike.baidu.com/item/%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/757281&#34;&gt;ä¸­åºéå†&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://baike.baidu.com/item/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86/1214806&#34;&gt;ååºéå†&lt;/a&gt;ï¼ˆåˆç§°åæ ¹éå†ï¼‰ä¸ºDEBFCAï¼ˆå·¦-å³-æ ¹ï¼‰&lt;/p&gt;
&lt;p&gt;å±‚æ¬¡éå†ä¸ºABCDEFï¼ˆåŒå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230302004.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;å›¾graph&#34;&gt;å›¾ï¼ˆGraphï¼‰&lt;/h3&gt;
&lt;p&gt;æ˜¯ä¸€ç§éçº¿æ€§æ•°æ®ç»“æ„ï¼Œåœ¨å›¾ç»“æ„ä¸­ï¼Œæ•°æ®ç»“ç‚¹ä¸€èˆ¬ç§°ä¸ºé¡¶ç‚¹ï¼Œè€Œè¾¹æ˜¯é¡¶ç‚¹çš„æœ‰åºå¶å¯¹ã€‚å¦‚æœä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºè¿™ä¸¤ä¸ªé¡¶ç‚¹å…·æœ‰ç›¸é‚»å…³ç³»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å †heap&#34;&gt;å †ï¼ˆHeapï¼‰&lt;/h3&gt;
&lt;p&gt;æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œä¸€èˆ¬è®¨è®ºçš„å †éƒ½æ˜¯äºŒå‰å †ã€‚å †çš„ç‰¹ç‚¹æ˜¯æ ¹ç»“ç‚¹çš„å€¼æ˜¯æ‰€æœ‰ç»“ç‚¹ä¸­æœ€å°çš„æˆ–è€…æœ€å¤§çš„ï¼Œå¹¶ä¸”æ ¹ç»“ç‚¹çš„ä¸¤ä¸ªå­æ ‘ä¹Ÿæ˜¯ä¸€ä¸ªå †ç»“æ„ã€‚&lt;/p&gt;
">æ•°æ®ç»“æ„åŸºç¡€çŸ¥è¯†</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java-duo-xian-cheng-ji-chu/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Javaä¸­å…³äºå¤šçº¿ç¨‹çš„åŸºç¡€çŸ¥è¯†ï¼Œå‡ ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä»¥åŠçº¿ç¨‹å®‰å…¨æ€§&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/sea-g5a284195e_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;å¤šçº¿ç¨‹åŸºç¡€&#34;&gt;å¤šçº¿ç¨‹åŸºç¡€&lt;/h2&gt;
&lt;h3 id=&#34;javaå¤šçº¿ç¨‹å¹¶å‘åº“&#34;&gt;javaå¤šçº¿ç¨‹å¹¶å‘åº“&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230227001.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;è¿›ç¨‹ä¸çº¿ç¨‹&#34;&gt;è¿›ç¨‹ä¸çº¿ç¨‹&lt;/h3&gt;
&lt;p&gt;è¿›ç¨‹ï¼šæ˜¯ç¨‹åºè¿è¡Œä»¥åŠèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹ï¼šæ˜¯CPUè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹å…±äº«å…¶èµ„æºï¼ˆå‡å°‘åˆ‡æ¢ï¼Œå¯æé«˜æ•ˆç‡ï¼‰ï¼Œä¸”å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ˆå¹¶å‘ï¼šåŒä¸€æ—¶é—´é—´éš”å¯ä»¥åšå¤šä»¶äº‹ï¼›å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»å¯ä»¥åšå¤šä»¶äº‹ï¼ˆå¤šæ ¸ï¼‰ï¼‰ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230227002.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;çº¿ç¨‹çš„ä¸Šæ–‡åˆ‡æ¢&#34;&gt;çº¿ç¨‹çš„ä¸Šæ–‡åˆ‡æ¢&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªCPUæ ¸åœ¨ä»»æ„æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ï¼ˆè¶…è¿‡CPUæ ¸æ•°ï¼‰å­˜åœ¨ï¼ŒCPUå°†ä¼šé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬çš„æ–¹å¼è¿›è¡Œçº¿ç¨‹åˆ‡æ¢ï¼Œå³ç»™æ¯ä¸€ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œçš„æ—¶å€™ä¾¿ä¼šå¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¹¶è®©å‡ºCPUç»™å…¶ä»–çº¿ç¨‹ä½¿ç”¨ï¼Œè¿™å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;li&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶æ˜¯é€šè¿‡è¿è¡Œæ—¶æ•°æ®åŒºä¸­çš„ç¨‹åºè®¡æ•°å™¨æ¥å­˜å‚¨å„ä¸ªçº¿ç¨‹çš„è¿è¡ŒçŠ¶æ€çš„ï¼Œä»¥ä¾¿äºä¸‹æ¬¡è¿è¡Œçº¿ç¨‹æ—¶å¯ä»¥æ¥ç€ä¸Šæ¬¡æŒ‡ä»¤ç»§ç»­è¿è¡Œï¼ˆæ¯”å¦‚çº¿ç¨‹Aåšäº†ä¸€æ¬¡è®¡ç®—å‡†å¤‡è¿”å›æ•°æ®æ—¶ï¼Œåˆ‡æ¢åˆ°äº†çº¿ç¨‹Bï¼Œç„¶ååˆåˆ‡å›çº¿ç¨‹Aï¼Œæ˜¯ç›´æ¥è¿”å›æ•°æ®ï¼Œè€Œä¸æ˜¯å†å»è®¡ç®—ä¸€éï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹åºè®¡æ•°å™¨æŒ‡çš„æ˜¯JVMä¸­çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œå­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼Œé€šè¿‡å®ƒï¼ŒJavaå¯ä»¥çŸ¥é“æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°äº†å“ªä¸€æ­¥æŒ‡ä»¤ï¼ˆç”±æ­¤å¯ä»¥çœ‹å‡ºç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€èˆ¬è€Œè¨€ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯æ¯”è¾ƒè€—è´¹CPUæ—¶é—´çš„ä¸€ç§æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;çº¿ç¨‹çš„å‡ ç§çŠ¶æ€&#34;&gt;çº¿ç¨‹çš„å‡ ç§çŠ¶æ€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºï¼šæŒ‡çš„æ˜¯ç”Ÿæˆçº¿ç¨‹å¯¹è±¡ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰è°ƒç”¨startæ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;å°±ç»ªï¼šè°ƒç”¨çº¿ç¨‹çš„startæ–¹æ³•åï¼Œçº¿ç¨‹ä¾¿è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œæ­¤æ—¶ç­‰å¾…ç³»ç»Ÿè°ƒåº¦ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œï¼šé€šè¿‡ç³»ç»Ÿè°ƒåº¦ï¼Œå¼€å§‹è¿è¡Œçº¿ç¨‹ä¸­çš„runå‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;ç­‰å¾…ï¼šè°ƒç”¨äº†Object.wait()ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚ä¸€èˆ¬éœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹åšå‡ºä¸€äº›ç‰¹å®šçš„é€šçŸ¥æˆ–è€…ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;è¶…æ—¶ç­‰å¾…ï¼šè¯¥çŠ¶æ€ä¸ç­‰å¾…çŠ¶æ€æœ‰ä¸€ç‚¹åŒºåˆ«å°±æ˜¯å®ƒä¼šè‡ªåŠ¨è¿”å›ï¼Œæ¯”å¦‚è°ƒç”¨Threa.sleep(long)ï¼Œåœ¨è¶…æ—¶ä¹‹åï¼Œä¼šè‡ªåŠ¨è¿”å›è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;é˜»å¡ï¼šæŒ‡çš„æ˜¯å»è·å–é”æ—¶(ç­‰å¾…è¿›å…¥synchronizedæ–¹æ³•æˆ–å—)ï¼Œå‘ç°åŒæ­¥é”è¢«å ç”¨äº†ï¼Œè¿™æ—¶çº¿ç¨‹ä¼šè¢«æ”¾å…¥é”æ± ï¼Œç­‰å¾…è·å–é”ã€‚&lt;/li&gt;
&lt;li&gt;æ­»äº¡ï¼šè¿è¡Œå®Œrunæ–¹æ³•ï¼Œmainæ–¹æ³•ï¼ˆmainæ–¹æ³•æŒ‡çš„æ˜¯ä¸»çº¿ç¨‹ï¼‰ä¹‹åæ­£å¸¸é€€å‡ºï¼Œä¹Ÿæœ‰å¯èƒ½å‡ºç°å¼‚å¸¸å¯¼è‡´æ­»äº¡ï¼›æ­»äº¡çš„çº¿ç¨‹ä¸èƒ½é‡æ–°å¯ç”¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼&#34;&gt;åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼&lt;/h2&gt;
&lt;h3 id=&#34;ç»§æ‰¿thread&#34;&gt;ç»§æ‰¿Thread&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;public class ThreadTest {
    public static void main(String[] args){
        new TestThread().start();
    }
}

class TestThread extends Thread{
    @Override
    public void run(){
        System.out.println(&amp;quot;Test Thread&amp;quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å®ç°runnable&#34;&gt;å®ç°Runnable&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;public class ThreadTest {
    public static void main(String[] args){
        new Thread(new TestRunnable()).start();
    }
}

class TestRunnable implements Runnable{
    @Override
    public void run() {
        System.out.println(&amp;quot;Test Runnable&amp;quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å®ç°callable&#34;&gt;å®ç°Callable&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;public class ThreadTest {
    public static void main(String[] args){
        FutureTask&amp;lt;Integer&amp;gt; task = new FutureTask(new TestCallable());
        new Thread(task).start();
        try {
            System.out.println(task.get());//getæ–¹æ³•ä¼šå¾—åˆ°callæ‰§è¡Œå®Œä¹‹åçš„å€¼
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
    }
}

class TestCallable implements Callable&amp;lt;Integer&amp;gt; {
    @Override
    public Integer call() throws Exception {
        int num = 0;
        while(num &amp;lt; 5){
            num++;
        }
        return num;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;çº¿ç¨‹å®‰å…¨æ€§&#34;&gt;çº¿ç¨‹å®‰å…¨æ€§&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åŸå­æ€§ï¼šåŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼ˆatomicå¼€å¤´çš„åŸå­ç±»,synchronizedï¼ŒLockï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¯ä»¥åŠæ—¶åœ°è¢«å…¶ä»–çº¿ç¨‹è§‚å¯Ÿåˆ°ï¼Œï¼ˆsynchronized,volatileï¼ŒLockï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰åºæ€§ï¼šæŒ‡çš„æ˜¯å¯ä»¥è§‚å¯Ÿåˆ°å…¶ä»–çº¿ç¨‹çš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºï¼Œç”±äºæŒ‡ä»¤é‡æ’ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ— åºçš„ï¼ˆhappens-beforeåŸåˆ™ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;çº¿ç¨‹æ­»é”&#34;&gt;çº¿ç¨‹æ­»é”&lt;/h3&gt;
&lt;h4 id=&#34;æ­»é”&#34;&gt;æ­»é”&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡çš„æ˜¯å¤šä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé™·å…¥ç¯è·¯é˜»å¡çš„ä¸€ç§ç°è±¡ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ˆè¿è¡Œä¹‹åï¼Œä¸¤ä¸ªçº¿ç¨‹é™·å…¥æ­»é”ä¸­ï¼Œå¦‚æœæ²¡æœ‰å¤–åŠ›ä¸­æ–­ï¼Œå°†ä¼šä¸€ç›´é”å®šï¼‰ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public class ThreadTest {
    //å…±äº«èµ„æºA
    private static final Object A = new Object();
    //å…±äº«èµ„æºB
    private static final Object B = new Object();

    public static void main(String[] args){
        new Thread(() -&amp;gt; {
            synchronized (A){
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---A&amp;quot;);
                try {
                    Thread.sleep(1000);//æ­¤å¤„ä¼‘çœ æ˜¯ä¸ºäº†è®©å…¶ä»–çº¿ç¨‹è·å¾—æ‰§è¡Œæœºä¼š
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå»è·å–èµ„æº---B&amp;quot;);
                synchronized (B){
                    System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---B&amp;quot;);
                }
            }
        },&amp;quot;Thread-01&amp;quot;).start();

        new Thread(() -&amp;gt; {
            synchronized (B){
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---B&amp;quot;);
                try {
                    Thread.sleep(1000);//æ­¤å¤„ä¼‘çœ æ˜¯ä¸ºäº†è®©å…¶ä»–çº¿ç¨‹è·å¾—æ‰§è¡Œæœºä¼š
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå»è·å–èµ„æº---A&amp;quot;);
                synchronized (A){
                    System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---A&amp;quot;);
                }
            }
        },&amp;quot;Thread-02&amp;quot;).start();
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;æ­»é”å››ä¸ªå¿…è¦æ¡ä»¶ä»¥åŠå¦‚ä½•é¿å…æ­»é”&#34;&gt;æ­»é”å››ä¸ªå¿…è¦æ¡ä»¶ä»¥åŠå¦‚ä½•é¿å…æ­»é”&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºåœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼Œå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œéœ€è¦ç­‰å¾…åŸçº¿ç¨‹é‡Šæ”¾èµ„æºï¼ˆæ­¤æ¡ä»¶ä¸èƒ½è¢«ç ´åï¼Œå› ä¸ºé”æœ¬èº«å°±æ˜¯ä¸ºäº†äº’æ–¥è®¿é—®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å·²ç»è·å–äº†ä¸€éƒ¨åˆ†èµ„æºï¼Œåˆå»è¯·æ±‚å…¶ä»–èµ„æºï¼Œå¦‚æœå…¶ä»–èµ„æºæ­£è¢«å ç”¨ï¼ŒåŸçº¿ç¨‹é™·å…¥é˜»å¡ï¼Œä¸”ä¸ä¼šé‡Šæ”¾è‡ªå·±å ç”¨çš„èµ„æºï¼ˆä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æºï¼›æˆ–è€…é˜»å¡æ—¶ï¼Œé‡Šæ”¾è‡ªå·±å ç”¨çš„èµ„æºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å·²ç»è·å¾—çš„èµ„æºï¼Œåœ¨è‡ªå·±æœªä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å‰¥å¤ºï¼Œåªèƒ½è‡ªå·±ä½¿ç”¨ç»“æŸåé‡Šæ”¾ï¼ˆå¦‚æœå»è·å–æ­£åœ¨è¢«å…¶ä»–çº¿ç¨‹ä½¿ç”¨çš„èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯ä»¥é‡Šæ”¾è‡ªå·±å ç”¨çš„èµ„æºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ï¼ˆæŒ‰ä¸€å®šçš„é¡ºåºæ¥è·å–èµ„æºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹ä¸Šè¿°ä¾‹å­è€Œè¨€ï¼Œå¯ä»¥è®©ç°çº¿ç¨‹1å…ˆè·å–èµ„æºABï¼Œæ‰§è¡Œå®Œä¹‹åï¼Œå†è®©çº¿ç¨‹2è·å–èµ„æºABï¼Œæ”¹åŠ¨å¦‚ä¸‹ï¼ˆæ‰§è¡Œé¡ºåºä¸ºï¼šçº¿ç¨‹1å…ˆè·å–èµ„æºAï¼Œæ¥ç€é‡Šæ”¾CPUï¼Œçº¿ç¨‹2æ‰§è¡Œå‡†å¤‡å»è·å–èµ„æºAï¼Œå‘ç°èµ„æºAå·²è¢«å ç”¨ï¼Œæ­¤æ—¶çº¿ç¨‹2é˜»å¡ï¼Œç„¶åä¸€ç§’ä¹‹åé‡Šæ”¾CPUï¼Œçº¿ç¨‹1æ¥ç€æ‰§è¡Œï¼Œå»è·å–èµ„æºBï¼Œæ­£å¸¸è·å–ï¼Œæ‰§è¡Œå®Œæ¯•ï¼Œé‡Šæ”¾CPUï¼›çº¿ç¨‹2å¼€å§‹è·å–èµ„æºAï¼Œç”±äºçº¿ç¨‹1å·²ç»æ‰§è¡Œå®Œæ¯•é‡Šæ”¾äº†é”ï¼Œæ‰€ä»¥çº¿ç¨‹2æ­£å¸¸è·å–èµ„æºAï¼Œæ¥ç€ä¼‘çœ ä¸€ç§’é‡Šæ”¾CPUï¼Œç„¶ååˆå»è·å–èµ„æºBï¼ŒåŒæ ·æ­£å¸¸è·å–ï¼Œæ‰§è¡Œå®Œæ¯•ï¼‰ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;public class ThreadTest {
    //å…±äº«èµ„æºA
    private static final Object A = new Object();
    //å…±äº«èµ„æºB
    private static final Object B = new Object();

    public static void main(String[] args){
        new Thread(() -&amp;gt; {
            synchronized (A){
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---A&amp;quot;);
                try {
                    Thread.sleep(1000);//æ­¤å¤„ä¼‘çœ æ˜¯ä¸ºäº†è®©å…¶ä»–çº¿ç¨‹è·å¾—æ‰§è¡Œæœºä¼š
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå»è·å–èµ„æº---B&amp;quot;);
                synchronized (B){
                    System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---B&amp;quot;);
                }
            }
        },&amp;quot;Thread-01&amp;quot;).start();

        new Thread(() -&amp;gt; {
            //çº¿ç¨‹2å»è·å–Aæ—¶è¢«é˜»å¡
            synchronized (A){
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---A&amp;quot;);
                try {
                    Thread.sleep(1000);//æ­¤å¤„ä¼‘çœ æ˜¯ä¸ºäº†è®©å…¶ä»–çº¿ç¨‹è·å¾—æ‰§è¡Œæœºä¼š
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå»è·å–èµ„æº---B&amp;quot;);
                synchronized (B){
                    System.out.println(Thread.currentThread().getName() + &amp;quot;ï¼šå¾—åˆ°èµ„æº---B&amp;quot;);
                }
            }
        },&amp;quot;Thread-02&amp;quot;).start();
    }
}
&lt;/code&gt;&lt;/pre&gt;
">Javaå¤šçº¿ç¨‹åŸºç¡€</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java-ji-he-ji-chu-zhi-shi/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Javaä¸­çš„é›†åˆï¼Œlistï¼Œsetï¼Œmapç­‰ç»“æ„ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/beach-418742_1280.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;æ¥å£ç»§æ‰¿å…³ç³»å’Œå®ç°&#34;&gt;æ¥å£ç»§æ‰¿å…³ç³»å’Œå®ç°&lt;/h2&gt;
&lt;h3 id=&#34;é›†åˆç±»æ¦‚å¿µ&#34;&gt;é›†åˆç±»æ¦‚å¿µ&lt;/h3&gt;
&lt;p&gt;é›†åˆç±»å­˜æ”¾äºjava.utilåŒ…ä¸­ï¼Œä¸»è¦æœ‰ä¸‰ç§ï¼Œsetï¼ˆé›†ï¼‰ï¼Œlistï¼ˆåˆ—è¡¨åŒ…å«Queueï¼‰ï¼Œmapï¼ˆæ˜ å°„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Collectionï¼šé›†åˆç±»çš„é€šç”¨æ¥å£ï¼Œç›´æ¥ç»§æ‰¿æ¥å£æœ‰Listå’ŒSetã€‚&lt;/p&gt;
&lt;p&gt;Iteratorï¼šä¸€ä¸ªè½»é‡çº§å¯¹è±¡ï¼ˆåˆ›å»ºä»£ä»·å°ï¼‰ï¼Œä¸»è¦ç”¨æ¥å¯¹é›†åˆè¿›è¡Œéå†ç§»é™¤ç­‰æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;Mapï¼šä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨çš„å®¹å™¨ï¼Œæ˜ å°„è¡¨çš„åŸºç¡€æ¥å£ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301010.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301011.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;list&#34;&gt;List&lt;/h3&gt;
&lt;p&gt;æœ‰åºé›†åˆï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œå®ƒçš„å®ç°ç±»æœ‰ArrayListï¼ŒVectorä»¥åŠLinkedListã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301012.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ArrayListï¼šåº•å±‚æ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œæ·»åŠ åˆ é™¤è¾ƒæ…¢ï¼ˆé»˜è®¤æ·»åŠ åœ¨æœ«å°¾ï¼Œåœ¨æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ æ•ˆç‡æ¯”è¾ƒä½ï¼Œå› ä¸ºéœ€è¦å°†æŒ‡å®šä½ç½®åç»­çš„å…ƒç´ éƒ½å¾€åç§»ä½ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Vectorï¼šä¸ArrayListåŸºæœ¬ä¸€è‡´ï¼Œå”¯ä¸€çš„å·®åˆ«å°±æ˜¯å…¶æ“ä½œä¸ºåŒæ­¥ï¼ˆåŠ äº†é”ï¼‰ï¼Œå³æŸä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿå†™Vectorï¼Œè¿™ä¹Ÿå¯¼è‡´å…¶æŸ¥è¯¢æ•ˆç‡æ¯”ArrayListæ…¢ã€‚&lt;/p&gt;
&lt;p&gt;LinkedListï¼šåº•å±‚æ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼ˆprevæŒ‡å‘å‰èŠ‚ç‚¹ï¼ŒnextæŒ‡å‘åèŠ‚ç‚¹ï¼‰ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒæ…¢ï¼Œæ·»åŠ åˆ é™¤æ¯”è¾ƒå¿«ã€‚å¦å¤–ï¼Œå®ƒè¿˜æä¾›äº†Listæ¥å£ä¸­æ²¡æœ‰å®šä¹‰çš„æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºæ“ä½œè¡¨å¤´å’Œè¡¨å°¾å…ƒç´ ï¼Œå¯ä»¥å½“åšå †æ ˆï¼Œé˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—æ¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;set&#34;&gt;Set&lt;/h3&gt;
&lt;p&gt;Setæ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨ï¼Œå…¶ç‰¹ç‚¹æ˜¯æ— åºä¸”ä¸èƒ½å‡ºç°é‡å¤å€¼ã€‚å¯¹è±¡çš„ç›¸ç­‰æ€§æœ¬è´¨æ˜¯ç”±å¯¹è±¡çš„hashCodeå€¼ï¼ˆjavaæ˜¯æ ¹æ®å¯¹è±¡çš„å†…å­˜åœ°å€è®¡ç®—å‡ºçš„æ­¤åºå·ï¼‰åˆ¤æ–­çš„ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™å…¶hashCodeä»¥åŠequalsæ¯”è¾ƒç»“æœå¿…ç„¶ç›¸ç­‰ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301013.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;HashSetï¼ˆhashè¡¨ï¼‰ï¼šå“ˆå¸Œè¡¨ä¸­å­˜æ”¾çš„æ˜¯å“ˆå¸Œå€¼ï¼ŒhashSetå­˜å‚¨å…ƒç´ å¹¶ä¸æ˜¯æŒ‰ç…§å­˜å…¥æ—¶çš„é¡ºåºï¼ˆæ— åºï¼‰ï¼Œè€Œæ˜¯æŒ‰ç…§å“ˆå¸Œå€¼æ¥å­˜çš„ï¼Œæ•…å…¶å–æ•°æ®ä¹Ÿæ˜¯ä¾æ®å“ˆå¸Œå€¼ã€‚å…ƒç´ çš„å“ˆå¸Œå€¼æ˜¯é€šè¿‡å…ƒç´ çš„hashCodeæ–¹æ³•è·å–çš„ã€‚&lt;/p&gt;
&lt;p&gt;hashSetåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰ï¼šå…ˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„å“ˆå¸Œå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœå“ˆå¸Œå€¼ä¸€æ ·ï¼Œå†æ¯”è¾ƒequalsæ–¹æ³•ï¼Œå¦‚æœè¿”å›trueåˆ™ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰ï¼Œå¦åˆ™ä¸ç›¸ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;hashSeté€šè¿‡hashCodeå€¼æ¥ç¡®å®šå…ƒç´ åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚ä¸€ä¸ªhashCodeä½ç½®ä¸Šå¯ä»¥å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼ˆequalsç»“æœä¸ºfalseï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;TreeSetï¼ˆäºŒå‰æ ‘ï¼‰ï¼šä¼šå¯¹æ’å…¥çš„å…ƒç´ è¿›è¡Œæ’åºï¼ˆä¾æ®äºŒå‰æ ‘ï¼‰ã€‚å¦‚æœæ˜¯è‡ªå®šä¹‰çš„ç±»éœ€è¦è¿›è¡Œæ’åºï¼Œéœ€è¦è‡ªå®šä¹‰ç±»å®ç°Comparableï¼Œè¦†å†™å¯¹åº”çš„compareTo()å‡½æ•°ï¼Œå¹¶è¿”å›ç›¸åº”çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;LinkHashSetï¼ˆhashSet+LinkedHashMapï¼‰ï¼šå…¶ç»§æ‰¿äºHashSetï¼Œåº•å±‚ä½¿ç”¨LinkedHashMapä¿å­˜æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;map&#34;&gt;Map&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301014.png&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;hashTableï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰ï¼šæ˜¯ä¸€ä¸ªé—ç•™ç±»ï¼Œä¸hashMapç±»ä¼¼ï¼Œåªæ˜¯åŠ äº†å…¨å±€é”ï¼Œä¿è¯äº†å¤šçº¿ç¨‹ä¸‹çš„å®‰å…¨ã€‚ç°åœ¨å·²ä¸å»ºè®®ä½¿ç”¨ï¼Œå¦‚æœéœ€è¦çº¿ç¨‹å®‰å…¨ï¼Œæ¨èä½¿ç”¨ConcurrentHashMapã€‚&lt;/p&gt;
&lt;p&gt;TreeMapï¼ˆå¯æ’åºï¼‰ï¼šå®ç°äº†SortedMapæ¥å£ï¼Œèƒ½å¤Ÿå°†å…¶ä¿å­˜çš„è®°å½•æŒ‰é”®è¿›è¡Œæ’åºï¼ˆé»˜è®¤å‡åºï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;LinkHashMapï¼ˆæœ‰åºï¼‰ï¼šhashMap+åŒå‘é“¾è¡¨ï¼Œæ˜¯hashMapçš„ä¸€ä¸ªå­ç±»ï¼Œä¿å­˜äº†è®°å½•çš„æ’å…¥é¡ºåºï¼Œåœ¨ä½¿ç”¨Iteratoréå†æ—¶ï¼Œå…ˆå¾—çš„æ•°æ®å¿…ç„¶æ˜¯å…ˆæ’å…¥çš„ï¼ˆæœ‰åºï¼‰ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œè®¾ç½®ï¼Œå…³é”®å‚æ•°ä¸ºaccessOrderï¼ˆtrueåˆ™æ˜¯è®¿é—®é¡ºåºï¼Œfalseåˆ™æ˜¯æ’å…¥é¡ºåºï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;hashmap&#34;&gt;hashMap&lt;/h4&gt;
&lt;p&gt;hashMapï¼ˆæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰ï¼šæ ¹æ®é”®çš„hashCodeå€¼å­˜å‚¨æ•°æ®ã€‚éçº¿ç¨‹å®‰å…¨ï¼ˆCollectionsçš„synchronizedMapä»¥åŠConcurrentHashMapå¯å®ç°çº¿ç¨‹å®‰å…¨ï¼‰ï¼Œå…è®¸ç©ºé”®å€¼ï¼Œæ‰§è¡Œæ•ˆç‡ç›¸å¯¹è¾ƒé«˜ã€‚&lt;/p&gt;
&lt;p&gt;capacityï¼šå½“å‰æ•°ç»„å®¹é‡ï¼Œå§‹ç»ˆä¿æŒ2^nï¼Œå¯ä»¥æ‰©å®¹ï¼Œæ‰©å®¹åæ•°ç»„å¤§å°ä¸ºå½“å‰çš„2å€ã€‚&lt;/p&gt;
&lt;p&gt;loadFactorï¼šè´Ÿè½½å› å­ï¼Œé»˜è®¤ä¸º0.75ã€‚å…¶å¤§å°å†³å®šäº†æ•£åˆ—è¡¨ç©ºé—´çš„ç¨€å¯†åº¦ï¼ˆè¶Šå¤§ï¼Œè¶Šå¯†é›†ï¼Œé“¾è¡¨è¶Šé•¿ï¼Œç´¢å¼•è¶Šæ…¢ï¼›è¶Šå°ï¼Œè¶Šç¨€ç–ï¼Œé“¾è¡¨è¶ŠçŸ­ï¼Œç´¢å¼•è¶Šå¿«ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;thresholdï¼šæ‰©å®¹é˜ˆå€¼ï¼Œç­‰äºcapacity * loadFactor&lt;/p&gt;
&lt;p&gt;Java7ä¸­ï¼ŒhashMapç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301015.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;Java8ä¸­ï¼ŒhashMapç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301016.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;concurrenthashmap&#34;&gt;ConcurrenthashMap&lt;/h4&gt;
&lt;p&gt;ConcurrenthashMapï¼šç›¸æ¯”äºhashMapè€Œè¨€ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå…¶ä½™åŸºæœ¬ä¸€è‡´ã€‚java7ä¸­ï¼Œä½¿ç”¨çš„æ˜¯åˆ†æ®µé”ï¼ˆSegmentï¼Œé»˜è®¤å¹¶è¡Œåº¦16ï¼‰ï¼›java8ä¸­ä½¿ç”¨çš„æ˜¯èŠ‚ç‚¹é”ï¼ˆç²’åº¦æ›´ç»†ï¼Œä¸”å¼•å…¥äº†çº¢é»‘æ ‘ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Java7ä¸­ï¼ŒConcurrenthashMapç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301017.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;Java8ä¸­ï¼ŒConcurrenthashMapç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/clipboard20230301018.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
">Javaé›†åˆåŸºç¡€çŸ¥è¯†</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/java-ji-chu-zhi-shi/"" data-c="
          &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦ç®€è¿°Javaä¸­é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ï¼ŒåŸºæœ¬æ•°æ®ç»“æ„ï¼Œå…­å¤§åŸºæœ¬åŸåˆ™ã€‚ä½œä¸ºåšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œç•¥æ˜¾ç®€å•ï¼Œä¸è¿‡å¯¹äºæˆ‘è€Œè¨€ï¼Œå´æ˜¯å‘å‰è¿ˆå‡ºäº†ä¸€å¤§æ­¥ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/philosopherZB/blog-images/master/blogImg/flowers-g5952415a3_1280.jpg&#34; alt=&#34;img&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§&#34;&gt;é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§&lt;/h2&gt;
&lt;h3 id=&#34;å°è£…&#34;&gt;å°è£…&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å°†ç°å®ä¸­çš„å®¢è§‚äº‹ç‰©å°è£…æˆæŠ½è±¡çš„ç±»ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹ä¸€ä¸ªç±»ä¸­çš„å˜é‡ï¼Œæ–¹æ³•è¿›è¡Œè®¿é—®ç¬¦ä¿®é¥°ï¼Œä»¥è¾¾åˆ°æœ‰äº›å˜é‡ï¼Œæ–¹æ³•å¯¹å¤–å¼€æ”¾ï¼Œæœ‰äº›å˜é‡ï¼Œæ–¹æ³•éšè—ã€‚&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹ç¬¬2ç‚¹å¯¹åº”çš„è®¿é—®ä¿®é¥°ç¬¦æœ‰(èŒƒå›´ä»å¤§åˆ°å°)ï¼špublic &amp;gt; protected &amp;gt; default &amp;gt; privateã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºå°è£…éšè—äº†å…·ä½“å®ç°ï¼Œä»…æä¾›æ¥å£ä¾›å¤–éƒ¨è°ƒç”¨ï¼Œæ‰€ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç»§æ‰¿&#34;&gt;ç»§æ‰¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥å®ç°å·²å­˜åœ¨çš„ç±»çš„å˜é‡ï¼Œæ–¹æ³•ï¼ˆéprivateï¼‰ï¼Œå¹¶å¯ä»¥æ‰©å±•å•å±äºè‡ªæˆ‘çš„å˜é‡åŠæ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;ç»§æ‰¿åœ¨Javaä¸­ä¸ºå•ç»§æ‰¿ï¼Œå³ä¸€ä¸ªå­ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼ˆå¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ç»§æ‰¿åˆ›å»ºçš„ç±»ç§°ä¸ºâ€œå­ç±»â€ï¼Œâ€œæ´¾ç”Ÿç±»â€ã€‚&lt;/li&gt;
&lt;li&gt;è¢«ç»§æ‰¿çš„ç±»ç§°ä¸ºâ€œçˆ¶ç±»â€ï¼Œâ€œåŸºç±»â€ï¼Œâ€œè¶…ç±»â€ã€‚&lt;/li&gt;
&lt;li&gt;ç»§æ‰¿çš„å…³ç³»æ˜¯is-aï¼Œæ¯”å¦‚è¯´è€å¸ˆæ˜¯äººï¼Œç‹®å­æ˜¯åŠ¨ç‰©ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;ç»§æ‰¿å¯ä»¥é™ä½ä»£ç çš„é‡å¤æ€§ï¼Œæ–¹ä¾¿åç»­å¯¹å…¬å…±è¡Œä¸ºçš„ç»´æŠ¤ï¼Œä¸è¿‡åŒæ—¶ä¹Ÿå¢åŠ äº†ä»£ç çš„è€¦åˆåº¦ã€‚&lt;/li&gt;
&lt;li&gt;å­ç±»ä¸ç»§æ‰¿çˆ¶ç±»çš„æ„é€ å™¨ï¼Œè€Œæ˜¯æ˜¾ç¤ºæˆ–éšå¼çš„è°ƒç”¨ï¼ˆå¦‚æœçˆ¶ç±»ä¸­å­˜åœ¨ä¸å¸¦å‚æ„é€ å™¨ï¼Œåˆ™å­ç±»éšå¼è°ƒç”¨è¯¥æ„é€ å™¨ï¼›å¦åˆ™å¦‚æœçˆ¶ç±»ä¸­ä»…å­˜åœ¨å¸¦å‚æ„é€ å™¨ï¼Œåˆ™å­ç±»éœ€è¦é€šè¿‡superæ¥æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»å¸¦å‚æ„é€ å™¨ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¤šæ€&#34;&gt;å¤šæ€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹åŒä¸€ä¸ªè¡Œä¸ºä½“ç°å‡ºä¸åŒçš„è¡¨ç°å½¢å¼ï¼Œæ¯”å¦‚åƒï¼Œå¯ä»¥åƒé¥­ï¼Œåƒé›¶é£Ÿç­‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨Javaä¸­ä½“ç°ä¸ºå¯¹æ–¹æ³•çš„é‡å†™ä»¥åŠé‡è½½ï¼Œå³ä¼ å…¥å‚æ•°æ¥å†³å®šåšå“ªä¸€ç§å…·ä½“çš„åŠ¨ä½œï¼ˆé‡è½½ï¼‰ä¸åŒç±»ä¹‹é—´åŒä¸€æ–¹æ³•ä¸åŒè¡¨ç°ï¼ˆé‡å†™ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é‡å†™ä¸€èˆ¬ä¸ºçˆ¶å­ç±»ä¹‹é—´å¯¹æ–¹æ³•çš„ä¸åŒæ“ä½œï¼Œé‡è½½ä¸€èˆ¬ä¸ºåŒä¸€ä¸ªç±»ä¸­å¯¹æ–¹æ³•çš„ä¸åŒæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åŸºæœ¬æ•°æ®ç±»å‹å››ä¸ªæ•´æ•°ä¸¤ä¸ªæµ®ç‚¹ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå¸ƒå°”&#34;&gt;åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå››ä¸ªæ•´æ•°ï¼Œä¸¤ä¸ªæµ®ç‚¹ï¼Œä¸€ä¸ªå­—ç¬¦ï¼Œä¸€ä¸ªå¸ƒå°”ï¼‰&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;byteï¼Œå 8ä½ï¼Œ1å­—èŠ‚ï¼Œé»˜è®¤å€¼ï¼š0ï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Byte&lt;/li&gt;
&lt;li&gt;shortï¼Œå 16ä½ï¼Œ2å­—èŠ‚ï¼Œé»˜è®¤å€¼ï¼š0ï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Short&lt;/li&gt;
&lt;li&gt;intï¼Œå 32ä½ï¼Œ4å­—èŠ‚ï¼Œé»˜è®¤å€¼ï¼š0ï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Integer&lt;/li&gt;
&lt;li&gt;longï¼Œå 64ä½ï¼Œ8å­—èŠ‚ï¼Œé»˜è®¤å€¼ï¼š0Lï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Long&lt;/li&gt;
&lt;li&gt;floatï¼Œå 32ä½ï¼Œ4å­—èŠ‚ï¼Œé»˜è®¤å€¼ï¼š0.0fï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Float&lt;/li&gt;
&lt;li&gt;doubleï¼Œå 64ä½ï¼Œ8å­—èŠ‚ï¼Œé»˜è®¤å€¼ï¼š0.fdï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Double&lt;/li&gt;
&lt;li&gt;charï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•å­—ç¬¦ï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Character&lt;/li&gt;
&lt;li&gt;booleanï¼Œé»˜è®¤å€¼ï¼šfalseï¼ŒåŒ…è£…ç±»ï¼šjava.lang.Boolean&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é¢å‘å¯¹è±¡çš„å…­å¤§åŸºæœ¬åŸå†Œ&#34;&gt;é¢å‘å¯¹è±¡çš„å…­å¤§åŸºæœ¬åŸå†Œ&lt;/h2&gt;
&lt;h3 id=&#34;å•ä¸€èŒè´£åŸåˆ™single-responsibility-priciple&#34;&gt;å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Pricipleï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·ä»–å˜åŒ–çš„åŸå› ã€‚&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚ï¼Œä¸è¦å°†teacher,doctoréƒ½æ”¾åœ¨ä¸€ä¸ªpersonç±»ä¸­ï¼Œè€Œæ˜¯å°†å…¶æ‹†æˆteacherç±»ï¼Œdoctorç±»ã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿä¸€å®šç¨‹åº¦ä¸Šé™ä½è€¦åˆåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¼€é—­åŸåˆ™open-close-priciple&#34;&gt;å¼€é—­åŸåˆ™ï¼ˆOpen Close Pricipleï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œå¯¹äºä¿®æ”¹æ˜¯å…³é—­çš„ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€èˆ¬æ¥è¯´å°±æ˜¯ä¸è¦ä¿®æ”¹ä¹‹å‰çš„ä»£ç ï¼Œå¯ä»¥é€‰æ‹©ç»§æ‰¿æˆ–è€…å®ç°æ¥å£æ¥æ‰©å±•å¯¹åº”çš„åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é‡Œå¼æ›¿æ¢åŸåˆ™liskov-substitution-priciple&#34;&gt;é‡Œå¼æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Pricipleï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰å¼•ç”¨çˆ¶ç±»çš„åœ°æ–¹éƒ½å¯ä»¥é€æ˜çš„ä½¿ç”¨å…¶å­ç±»å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;å³çˆ¶ç±»å‡ºç°çš„åœ°æ–¹ï¼ŒæŠŠçˆ¶ç±»æ¢æˆå­ç±»ä¸ä¼šå‡ºç°å¼‚å¸¸æˆ–é”™è¯¯ï¼›åä¹‹ï¼Œå­ç±»å‡ºç°çš„åœ°æ–¹ï¼ŒæŠŠå­ç±»æ¢æˆçˆ¶ç±»å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸æˆ–é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚,personç±»å…·æœ‰eatåŠŸèƒ½ï¼Œé‚£ä¹ˆå°†person.eatæ¢æˆteacher.eatæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼›è€Œå¦‚æœteacherç±»å…·æœ‰ç‹¬ç‰¹çš„teachåŠŸèƒ½ï¼Œé‚£ä¹ˆå¦‚æœå°†teacher.teachæ¢æˆperson.teachå°±ä¼šå‡ºç°é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¾èµ–å€’ç½®åŸåˆ™dependence-inversion-priciple&#34;&gt;ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependence Inversion Pricipleï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œè€Œæ˜¯åº”è¯¥ä¾èµ–å…¶æŠ½è±¡&lt;/li&gt;
&lt;li&gt;æŠ½è±¡ä¸ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚ä¾èµ–äºæŠ½è±¡&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚teacherç±»ä¸­åº”è¯¥å°½é‡åšä¸€äº›è€å¸ˆå…±æœ‰çš„æŠ½è±¡è¡Œä¸ºï¼Œæ¯”å¦‚æ•™ä¹¦ï¼Œè¿™æ ·åé¢çš„è¯­æ–‡è€å¸ˆï¼Œæ•°å­¦è€å¸ˆç­‰å¯ä»¥ç»§æ‰¿è¯¥æŠ½è±¡è€å¸ˆç±»è¿›è¡Œæ‰©å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ¥å£éš”ç¦»åŸåˆ™interface-segregation-priciple&#34;&gt;æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Pricipleï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£;ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š&lt;/li&gt;
&lt;li&gt;å°½é‡ä¸€ä¸ªæ¥å£åªå®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œå¦‚æœæ¥å£åŠŸèƒ½å¤ªå¤šå¯è¿›è¡Œæ‹†åˆ†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿ªç±³ç‰¹åŸåˆ™law-of-demeter-or-least-knowlegde-priciple&#34;&gt;è¿ªç±³ç‰¹åŸåˆ™ï¼ˆLaw of Demeter or Least Knowlegde Pricipleï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤åŸåˆ™ä¸æ¥å£éš”ç¦»åŸåˆ™å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œå°½é‡ä¿æŒä¸€ä¸ªæ–¹æ³•ä¸€ä¸ªå…·ä½“è¡Œä¸ºï¼Œè€Œä¸è¦æ¶µç›–å¤šä¸ªè¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
">JavaåŸºç¡€çŸ¥è¯†</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://philosopherzb.github.io/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å…³äºæœ¬ç«™&#34;&gt;ğŸ  å…³äºæœ¬ç«™&lt;/h2&gt;
&lt;p&gt;æœ¬ç«™ä½¿ç”¨github-pagesåŠGrideaæ­å»ºè€Œæˆï¼Œä¸“é—¨ç”¨äºæŠ€æœ¯åˆ†äº«ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·å‚ä¸ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;github-pages doc: &lt;a href=&#34;https://docs.github.com/en/pages&#34;&gt;https://docs.github.com/en/pages&lt;/a&gt;&lt;br&gt;
gridea doc: &lt;a href=&#34;https://gridea.dev/gridea-start/&#34;&gt;https://gridea.dev/gridea-start/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;åšä¸»æ˜¯è°&#34;&gt;ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°&lt;/h2&gt;
&lt;p&gt;æ±‚çŸ¥è·¯ä¸Šçš„é™Œç”Ÿäºº&lt;/p&gt;
&lt;h2 id=&#34;è”ç³»æˆ‘å‘€&#34;&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/h2&gt;
&lt;p&gt;æœ‰é—®é¢˜å¯ä»¥ç•™è¨€è®¨è®ºå“ˆğŸ˜„&lt;/p&gt;
">å…³äº</a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + 'ç§’ä¹‹å‰';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + 'åˆ†é’Ÿä¹‹å‰';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + 'å°æ—¶ä¹‹å‰';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + 'å¤©ä¹‹å‰';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }
  //æ‹¿æ¥ä¸»ä¹‰(çœŸé¦™)^_^ï¼ŒClipboard å®ç°æ‘˜è‡ªæ˜é‡‘ https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // åˆ¤æ–­æ˜¯ä¸æ˜¯iosç«¯
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //åˆ›å»ºæ–‡æœ¬å…ƒç´ 
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //é€‰æ‹©å†…å®¹
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //å¤åˆ¶åˆ°å‰ªè´´æ¿
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("å¤åˆ¶é”™è¯¯ï¼è¯·æ‰‹åŠ¨å¤åˆ¶ï¼")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === 'å¤åˆ¶æˆåŠŸ') {
        return;
      }
      e.srcElement.textContent = 'å¤åˆ¶æˆåŠŸ';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === 'å¤åˆ¶æˆåŠŸ') {
            elem.textContent = 'å¤åˆ¶ä»£ç '
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = 'å¤åˆ¶ä»£ç ';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>


<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 200
  });
</script>





</html>